<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>äº‹ä»¶ | è½æ‹“æ— å¶å“Ÿ</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vuepressBlog/img/favicon.ico">
    <meta name="description" content="Enjoy when you can, and endure when you must.">
    <meta name="keywords" content="å‰ç«¯åšå®¢,ä¸ªäººæŠ€æœ¯åšå®¢,å‰ç«¯,å‰ç«¯å¼€å‘,å‰ç«¯æ¡†æ¶,webå‰ç«¯,å‰ç«¯é¢è¯•é¢˜,æŠ€æœ¯æ–‡æ¡£,å­¦ä¹ ,é¢è¯•,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-w9NrrX740O">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/vuepressBlog/assets/css/0.styles.df9d68ed.css" as="style"><link rel="preload" href="/vuepressBlog/assets/js/app.01b93228.js" as="script"><link rel="preload" href="/vuepressBlog/assets/js/2.15c062aa.js" as="script"><link rel="preload" href="/vuepressBlog/assets/js/3.9268bcf7.js" as="script"><link rel="preload" href="/vuepressBlog/assets/js/149.4a705130.js" as="script"><link rel="prefetch" href="/vuepressBlog/assets/js/10.0bcfd931.js"><link rel="prefetch" href="/vuepressBlog/assets/js/100.84488b16.js"><link rel="prefetch" href="/vuepressBlog/assets/js/101.d81fe028.js"><link rel="prefetch" href="/vuepressBlog/assets/js/102.7f8380df.js"><link rel="prefetch" href="/vuepressBlog/assets/js/103.73fc6c23.js"><link rel="prefetch" href="/vuepressBlog/assets/js/104.ca7e30af.js"><link rel="prefetch" href="/vuepressBlog/assets/js/105.86f7c1a9.js"><link rel="prefetch" href="/vuepressBlog/assets/js/106.b433d36b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/107.e385fac5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/108.de126817.js"><link rel="prefetch" href="/vuepressBlog/assets/js/109.68759411.js"><link rel="prefetch" href="/vuepressBlog/assets/js/11.fa8ee4a0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/110.594efbaa.js"><link rel="prefetch" href="/vuepressBlog/assets/js/111.4f484d5e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/112.02d580de.js"><link rel="prefetch" href="/vuepressBlog/assets/js/113.59e94c08.js"><link rel="prefetch" href="/vuepressBlog/assets/js/114.544a2a9c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/115.dce2e87b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/116.cac2a945.js"><link rel="prefetch" href="/vuepressBlog/assets/js/117.007a63c7.js"><link rel="prefetch" href="/vuepressBlog/assets/js/118.4499b520.js"><link rel="prefetch" href="/vuepressBlog/assets/js/119.a780fba0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/12.d70a8f89.js"><link rel="prefetch" href="/vuepressBlog/assets/js/120.8664062b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/121.b61e473f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/122.439f63c1.js"><link rel="prefetch" href="/vuepressBlog/assets/js/123.9f3dd9f2.js"><link rel="prefetch" href="/vuepressBlog/assets/js/124.c664f0a5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/125.6d3c795a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/126.5d19856c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/127.f061a990.js"><link rel="prefetch" href="/vuepressBlog/assets/js/128.500ed16b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/129.55ef3c61.js"><link rel="prefetch" href="/vuepressBlog/assets/js/13.98efe7d6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/130.3d06a25f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/131.43dc33f9.js"><link rel="prefetch" href="/vuepressBlog/assets/js/132.dfda9b40.js"><link rel="prefetch" href="/vuepressBlog/assets/js/133.2e759971.js"><link rel="prefetch" href="/vuepressBlog/assets/js/134.5d0aa46f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/135.00c4d912.js"><link rel="prefetch" href="/vuepressBlog/assets/js/136.dcb641c1.js"><link rel="prefetch" href="/vuepressBlog/assets/js/137.3bc46cc7.js"><link rel="prefetch" href="/vuepressBlog/assets/js/138.1f41913e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/139.2dc04885.js"><link rel="prefetch" href="/vuepressBlog/assets/js/14.2c4bbd5a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/140.5f74e9d8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/141.a6e39238.js"><link rel="prefetch" href="/vuepressBlog/assets/js/142.14d64d79.js"><link rel="prefetch" href="/vuepressBlog/assets/js/143.188ad027.js"><link rel="prefetch" href="/vuepressBlog/assets/js/144.6a3067c7.js"><link rel="prefetch" href="/vuepressBlog/assets/js/145.d9cd23fa.js"><link rel="prefetch" href="/vuepressBlog/assets/js/146.9c1c9ca8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/147.34e7f9e4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/148.a838fec0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/15.59374802.js"><link rel="prefetch" href="/vuepressBlog/assets/js/150.c5afb793.js"><link rel="prefetch" href="/vuepressBlog/assets/js/151.88bd492d.js"><link rel="prefetch" href="/vuepressBlog/assets/js/152.6eff1677.js"><link rel="prefetch" href="/vuepressBlog/assets/js/153.b0254bfa.js"><link rel="prefetch" href="/vuepressBlog/assets/js/154.2eb11ea4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/155.f8360a3f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/156.9678c969.js"><link rel="prefetch" href="/vuepressBlog/assets/js/157.35584760.js"><link rel="prefetch" href="/vuepressBlog/assets/js/158.133197cd.js"><link rel="prefetch" href="/vuepressBlog/assets/js/159.8c4aba0e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/16.51b5049f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/160.8d64cd04.js"><link rel="prefetch" href="/vuepressBlog/assets/js/161.b54eab33.js"><link rel="prefetch" href="/vuepressBlog/assets/js/162.7124d4a2.js"><link rel="prefetch" href="/vuepressBlog/assets/js/163.81743599.js"><link rel="prefetch" href="/vuepressBlog/assets/js/164.fbd074eb.js"><link rel="prefetch" href="/vuepressBlog/assets/js/165.88a4cd16.js"><link rel="prefetch" href="/vuepressBlog/assets/js/166.dd00d24d.js"><link rel="prefetch" href="/vuepressBlog/assets/js/167.d9719379.js"><link rel="prefetch" href="/vuepressBlog/assets/js/168.a18e0b9e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/169.1d35d391.js"><link rel="prefetch" href="/vuepressBlog/assets/js/17.6bb05c36.js"><link rel="prefetch" href="/vuepressBlog/assets/js/170.7bd68dc8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/171.fb225393.js"><link rel="prefetch" href="/vuepressBlog/assets/js/172.92bc2b65.js"><link rel="prefetch" href="/vuepressBlog/assets/js/173.12269bf3.js"><link rel="prefetch" href="/vuepressBlog/assets/js/174.9dcb1105.js"><link rel="prefetch" href="/vuepressBlog/assets/js/175.cfae7a19.js"><link rel="prefetch" href="/vuepressBlog/assets/js/176.43b1443f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/177.5c3e333c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/178.4573b20a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/179.3ae99593.js"><link rel="prefetch" href="/vuepressBlog/assets/js/18.b54327e2.js"><link rel="prefetch" href="/vuepressBlog/assets/js/180.1c5e9135.js"><link rel="prefetch" href="/vuepressBlog/assets/js/181.a90d16cc.js"><link rel="prefetch" href="/vuepressBlog/assets/js/182.b177cf46.js"><link rel="prefetch" href="/vuepressBlog/assets/js/183.a43d4f5e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/184.f848bccf.js"><link rel="prefetch" href="/vuepressBlog/assets/js/185.1f77ce9e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/186.77069c5a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/187.ebbdf399.js"><link rel="prefetch" href="/vuepressBlog/assets/js/188.91726890.js"><link rel="prefetch" href="/vuepressBlog/assets/js/189.86fb3ef9.js"><link rel="prefetch" href="/vuepressBlog/assets/js/19.b106c051.js"><link rel="prefetch" href="/vuepressBlog/assets/js/190.1db66b51.js"><link rel="prefetch" href="/vuepressBlog/assets/js/191.19ad9d9c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/192.a0fe8bbc.js"><link rel="prefetch" href="/vuepressBlog/assets/js/193.d5ed3c78.js"><link rel="prefetch" href="/vuepressBlog/assets/js/194.19a2e26c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/195.d5187642.js"><link rel="prefetch" href="/vuepressBlog/assets/js/196.1ee07af1.js"><link rel="prefetch" href="/vuepressBlog/assets/js/197.0005560e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/198.392fc232.js"><link rel="prefetch" href="/vuepressBlog/assets/js/199.d04cab15.js"><link rel="prefetch" href="/vuepressBlog/assets/js/20.89510be6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/200.0076ab61.js"><link rel="prefetch" href="/vuepressBlog/assets/js/201.0cc14966.js"><link rel="prefetch" href="/vuepressBlog/assets/js/202.a2a8dfba.js"><link rel="prefetch" href="/vuepressBlog/assets/js/203.d27eae18.js"><link rel="prefetch" href="/vuepressBlog/assets/js/204.82879159.js"><link rel="prefetch" href="/vuepressBlog/assets/js/205.c797cac3.js"><link rel="prefetch" href="/vuepressBlog/assets/js/206.75c6fb8a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/207.07a0e8e6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/208.3da07b2c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/209.8b307879.js"><link rel="prefetch" href="/vuepressBlog/assets/js/21.1c27130c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/210.b42773a3.js"><link rel="prefetch" href="/vuepressBlog/assets/js/211.c796780d.js"><link rel="prefetch" href="/vuepressBlog/assets/js/212.0974bbfc.js"><link rel="prefetch" href="/vuepressBlog/assets/js/213.ca0dc916.js"><link rel="prefetch" href="/vuepressBlog/assets/js/214.f242dfe0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/215.6c01ddab.js"><link rel="prefetch" href="/vuepressBlog/assets/js/216.2c7cdec1.js"><link rel="prefetch" href="/vuepressBlog/assets/js/217.a132e29e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/218.5d72b70f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/219.d10071c6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/22.bdf22c21.js"><link rel="prefetch" href="/vuepressBlog/assets/js/220.b4bef083.js"><link rel="prefetch" href="/vuepressBlog/assets/js/221.9af185ca.js"><link rel="prefetch" href="/vuepressBlog/assets/js/222.b614bfd5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/223.72825a0c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/224.4cf7db8b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/225.95f0c61f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/226.b7f1bae6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/227.8b53f8fe.js"><link rel="prefetch" href="/vuepressBlog/assets/js/228.4af7c5a3.js"><link rel="prefetch" href="/vuepressBlog/assets/js/23.4ced690e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/24.8a7bdd65.js"><link rel="prefetch" href="/vuepressBlog/assets/js/25.c8c81ac2.js"><link rel="prefetch" href="/vuepressBlog/assets/js/26.82bebcad.js"><link rel="prefetch" href="/vuepressBlog/assets/js/27.0a0c5c41.js"><link rel="prefetch" href="/vuepressBlog/assets/js/28.4aae4fc8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/29.a141872f.js"><link rel="prefetch" href="/vuepressBlog/assets/js/30.e885c228.js"><link rel="prefetch" href="/vuepressBlog/assets/js/31.c5ca22d0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/32.b62d6521.js"><link rel="prefetch" href="/vuepressBlog/assets/js/33.f1211353.js"><link rel="prefetch" href="/vuepressBlog/assets/js/34.6e06044b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/35.b694c3dc.js"><link rel="prefetch" href="/vuepressBlog/assets/js/36.5bc3a02b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/37.8c839c96.js"><link rel="prefetch" href="/vuepressBlog/assets/js/38.e7c0c0a8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/39.16a24fc4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/4.68e98903.js"><link rel="prefetch" href="/vuepressBlog/assets/js/40.0b7ae0c7.js"><link rel="prefetch" href="/vuepressBlog/assets/js/41.0a44bcba.js"><link rel="prefetch" href="/vuepressBlog/assets/js/42.2663ad55.js"><link rel="prefetch" href="/vuepressBlog/assets/js/43.ded9cb63.js"><link rel="prefetch" href="/vuepressBlog/assets/js/44.aeb40874.js"><link rel="prefetch" href="/vuepressBlog/assets/js/45.8635552a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/46.bb4c932a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/47.52b8e946.js"><link rel="prefetch" href="/vuepressBlog/assets/js/48.ff80d6d5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/49.a08ab0f7.js"><link rel="prefetch" href="/vuepressBlog/assets/js/5.ff7f89a5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/50.26f3e398.js"><link rel="prefetch" href="/vuepressBlog/assets/js/51.32fb7d22.js"><link rel="prefetch" href="/vuepressBlog/assets/js/52.b99ad699.js"><link rel="prefetch" href="/vuepressBlog/assets/js/53.8879f011.js"><link rel="prefetch" href="/vuepressBlog/assets/js/54.86492740.js"><link rel="prefetch" href="/vuepressBlog/assets/js/55.bede085c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/56.84979de6.js"><link rel="prefetch" href="/vuepressBlog/assets/js/57.3a500a0c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/58.71513b7e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/59.db8b63d2.js"><link rel="prefetch" href="/vuepressBlog/assets/js/6.ca725bc4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/60.e81fdc08.js"><link rel="prefetch" href="/vuepressBlog/assets/js/61.8ab59cc8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/62.00a24219.js"><link rel="prefetch" href="/vuepressBlog/assets/js/63.45edf79b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/64.078426d5.js"><link rel="prefetch" href="/vuepressBlog/assets/js/65.660cef5a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/66.b3130a2c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/67.cb522883.js"><link rel="prefetch" href="/vuepressBlog/assets/js/68.3c6c556e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/69.ce6ee68e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/7.cc49363c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/70.5aa13597.js"><link rel="prefetch" href="/vuepressBlog/assets/js/71.316426d0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/72.afe8f86b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/73.d304cff0.js"><link rel="prefetch" href="/vuepressBlog/assets/js/74.b2769f59.js"><link rel="prefetch" href="/vuepressBlog/assets/js/75.ffc1eeac.js"><link rel="prefetch" href="/vuepressBlog/assets/js/76.c30cd2d9.js"><link rel="prefetch" href="/vuepressBlog/assets/js/77.13e43099.js"><link rel="prefetch" href="/vuepressBlog/assets/js/78.d6855ae4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/79.53dbd3db.js"><link rel="prefetch" href="/vuepressBlog/assets/js/8.c94e7d3c.js"><link rel="prefetch" href="/vuepressBlog/assets/js/80.04c2c7e8.js"><link rel="prefetch" href="/vuepressBlog/assets/js/81.0e3255ab.js"><link rel="prefetch" href="/vuepressBlog/assets/js/82.6f2ba046.js"><link rel="prefetch" href="/vuepressBlog/assets/js/83.54100615.js"><link rel="prefetch" href="/vuepressBlog/assets/js/84.04ca2d8b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/85.c1198af4.js"><link rel="prefetch" href="/vuepressBlog/assets/js/86.faebfd9e.js"><link rel="prefetch" href="/vuepressBlog/assets/js/87.af46e90a.js"><link rel="prefetch" href="/vuepressBlog/assets/js/88.38a8c169.js"><link rel="prefetch" href="/vuepressBlog/assets/js/89.f3c21b56.js"><link rel="prefetch" href="/vuepressBlog/assets/js/9.832d96cb.js"><link rel="prefetch" href="/vuepressBlog/assets/js/90.815d6b0d.js"><link rel="prefetch" href="/vuepressBlog/assets/js/91.8b6d7255.js"><link rel="prefetch" href="/vuepressBlog/assets/js/92.681911b1.js"><link rel="prefetch" href="/vuepressBlog/assets/js/93.e361c1b9.js"><link rel="prefetch" href="/vuepressBlog/assets/js/94.d2da9f02.js"><link rel="prefetch" href="/vuepressBlog/assets/js/95.735aca2b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/96.e24d5d6b.js"><link rel="prefetch" href="/vuepressBlog/assets/js/97.1bf20870.js"><link rel="prefetch" href="/vuepressBlog/assets/js/98.80d11164.js"><link rel="prefetch" href="/vuepressBlog/assets/js/99.168fe21a.js">
    <link rel="stylesheet" href="/vuepressBlog/assets/css/0.styles.df9d68ed.css">
    <style>
      .theme-mode-light:after{background-image: url(https://api.ixiaowai.cn/api/api.php);content: "";background-repeat: no-repeat;background-position: 50%;opacity: .06;-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter: grayscale(100%);filter: #808080;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;}
      .theme-vdoing-wrapper{letter-spacing: 2px!important;background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%)!important;background-size: 20px 20px!important;background-position: center center!important}
</style>
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepressBlog/" class="home-link router-link-active"><img src="https://xavierpic.oss-cn-hangzhou.aliyuncs.com/img/11.jpg" alt="è½æ‹“æ— å¶å“Ÿ" class="logo"> <span class="site-name can-hide">è½æ‹“æ— å¶å“Ÿ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepressBlog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><a href="/vuepressBlog/web/" class="link-title">å‰ç«¯</a> <span class="title" style="display:none;">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å‰ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/note/javascript/" class="nav-link">ã€ŠJavaScriptæ•™ç¨‹ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/es6/" class="nav-link">ã€ŠES6 æ•™ç¨‹ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/vue/" class="nav-link">ã€ŠVueã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/typescript-axios/" class="nav-link">ã€ŠTypeScript ä»é›¶å®ç° axiosã€‹</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/wx-miniprogram/" class="nav-link"> å°ç¨‹åºç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/javascriptbasics/" class="nav-link"> JavaScript åŸºç¡€</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡µé¢" class="dropdown-title"><a href="/vuepressBlog/ui/" class="link-title">é¡µé¢</a> <span class="title" style="display:none;">é¡µé¢</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŠ€æœ¯" class="dropdown-title"><a href="/vuepressBlog/technology/" class="link-title">æŠ€æœ¯</a> <span class="title" style="display:none;">æŠ€æœ¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><a href="/vuepressBlog/interview/" class="link-title">é¢è¯•</a> <span class="title" style="display:none;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>é¢è¯•é¢˜åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/58734d/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/26864d/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/ceea45/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/4547e6/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/a134b2/" class="nav-link">é›¶ç¢</a></li></ul></li><li class="dropdown-item"><h4>é¢è¯•å¿ƒå¾—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/331dbf/" class="nav-link">æ‚è¨€ç¢è¯­</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¯»ä¹¦æ´¾" class="dropdown-title"><a href="/vuepressBlog/bookssent/" class="link-title">è¯»ä¹¦æ´¾</a> <span class="title" style="display:none;">è¯»ä¹¦æ´¾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æ‘˜æŠ„æ”¶å½•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/ChickenSoup/" class="nav-link">â˜† åŠ±å¿—é¸¡æ±¤</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/PassionLife/" class="nav-link">â€ äººé—´çƒŸç«</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/ThingsLost/" class="nav-link">â˜£ ä¸‡ç‰©æ²¦ä¸§</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/NoTrouble/" class="nav-link">âœŒ å…³æ‰çƒ¦æ¼</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/Bistro/" class="nav-link">âœ² å°é…’é¦†</a></li></ul></li><li class="dropdown-item"><h4>è¯»ä¹¦ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/note/xgqq/" class="nav-link">ã€Šæ´»ç€ã€‹</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/vuepressBlog/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/f2a556/" class="nav-link">å­¦ä¹ </a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/aea6571b7a8bae86/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/2d615df9a36a98ed/" class="nav-link">å¿ƒæƒ…æ‚è´§</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li></ul></div></div><div class="nav-item"><a href="/vuepressBlog/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ”¶è—" class="dropdown-title"><a href="/vuepressBlog/pages/beb6c0bd8a66cea6/" class="link-title">æ”¶è—</a> <span class="title" style="display:none;">æ”¶è—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/beb6c0bd8a66cea6/" class="nav-link">ç½‘ç«™</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/eee83a9211a70f9d/" class="nav-link">èµ„æº</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/12df8ace52d493f6/" class="nav-link">Vueèµ„æº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/vuepressBlog/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/xavi-bryant/vuepressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://xavierpic.oss-cn-hangzhou.aliyuncs.com/img/5.jpg"> <div class="blogger-info"><h3>è½æ‹“</h3> <span>
        åŒ…æ”¾å°å¯çˆ±ä½ åˆ«è·‘ï¼Œæˆ‘æ¥äº†ğŸ˜
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepressBlog/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯" class="dropdown-title"><a href="/vuepressBlog/web/" class="link-title">å‰ç«¯</a> <span class="title" style="display:none;">å‰ç«¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>å‰ç«¯æ–‡ç« </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>å­¦ä¹ ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/note/javascript/" class="nav-link">ã€ŠJavaScriptæ•™ç¨‹ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/es6/" class="nav-link">ã€ŠES6 æ•™ç¨‹ã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/vue/" class="nav-link">ã€ŠVueã€‹ç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/typescript-axios/" class="nav-link">ã€ŠTypeScript ä»é›¶å®ç° axiosã€‹</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/wx-miniprogram/" class="nav-link"> å°ç¨‹åºç¬”è®°</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/note/javascriptbasics/" class="nav-link"> JavaScript åŸºç¡€</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡µé¢" class="dropdown-title"><a href="/vuepressBlog/ui/" class="link-title">é¡µé¢</a> <span class="title" style="display:none;">é¡µé¢</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/0a83b083bdf257cb/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŠ€æœ¯" class="dropdown-title"><a href="/vuepressBlog/technology/" class="link-title">æŠ€æœ¯</a> <span class="title" style="display:none;">æŠ€æœ¯</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/9a7ee40fc232253e/" class="nav-link">æŠ€æœ¯æ–‡æ¡£</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/4c778760be26d8b3/" class="nav-link">GitHubæŠ€å·§</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/41f87d890d0a02af/" class="nav-link">åšå®¢æ­å»º</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¢è¯•" class="dropdown-title"><a href="/vuepressBlog/interview/" class="link-title">é¢è¯•</a> <span class="title" style="display:none;">é¢è¯•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>é¢è¯•é¢˜åº“</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/58734d/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/26864d/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/ceea45/" class="nav-link">jQuery</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/4547e6/" class="nav-link">Vue</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/pages/a134b2/" class="nav-link">é›¶ç¢</a></li></ul></li><li class="dropdown-item"><h4>é¢è¯•å¿ƒå¾—</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/pages/331dbf/" class="nav-link">æ‚è¨€ç¢è¯­</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¯»ä¹¦æ´¾" class="dropdown-title"><a href="/vuepressBlog/bookssent/" class="link-title">è¯»ä¹¦æ´¾</a> <span class="title" style="display:none;">è¯»ä¹¦æ´¾</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>æ‘˜æŠ„æ”¶å½•</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/ChickenSoup/" class="nav-link">â˜† åŠ±å¿—é¸¡æ±¤</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/PassionLife/" class="nav-link">â€ äººé—´çƒŸç«</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/ThingsLost/" class="nav-link">â˜£ ä¸‡ç‰©æ²¦ä¸§</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/NoTrouble/" class="nav-link">âœŒ å…³æ‰çƒ¦æ¼</a></li><li class="dropdown-subitem"><a href="/vuepressBlog/Bistro/" class="nav-link">âœ² å°é…’é¦†</a></li></ul></li><li class="dropdown-item"><h4>è¯»ä¹¦ç¬”è®°</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepressBlog/note/xgqq/" class="nav-link">ã€Šæ´»ç€ã€‹</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ›´å¤š" class="dropdown-title"><a href="/vuepressBlog/more/" class="link-title">æ›´å¤š</a> <span class="title" style="display:none;">æ›´å¤š</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/f2a556/" class="nav-link">å­¦ä¹ </a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/aea6571b7a8bae86/" class="nav-link">é¢è¯•</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/2d615df9a36a98ed/" class="nav-link">å¿ƒæƒ…æ‚è´§</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/friends/" class="nav-link">å‹æƒ…é“¾æ¥</a></li></ul></div></div><div class="nav-item"><a href="/vuepressBlog/about/" class="nav-link">å…³äº</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ”¶è—" class="dropdown-title"><a href="/vuepressBlog/pages/beb6c0bd8a66cea6/" class="link-title">æ”¶è—</a> <span class="title" style="display:none;">æ”¶è—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/beb6c0bd8a66cea6/" class="nav-link">ç½‘ç«™</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/eee83a9211a70f9d/" class="nav-link">èµ„æº</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/pages/12df8ace52d493f6/" class="nav-link">Vueèµ„æº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ç´¢å¼•" class="dropdown-title"><a href="/vuepressBlog/archives/" class="link-title">ç´¢å¼•</a> <span class="title" style="display:none;">ç´¢å¼•</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepressBlog/categories/" class="nav-link">åˆ†ç±»</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/tags/" class="nav-link">æ ‡ç­¾</a></li><li class="dropdown-item"><!----> <a href="/vuepressBlog/archives/" class="nav-link">å½’æ¡£</a></li></ul></div></div> <a href="https://github.com/xavi-bryant/vuepressBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vuepressBlog/pages/0796ba76b4b55368/" class="sidebar-link">åŸºç¡€</a></li><li><a href="/vuepressBlog/pages/74d2ab3fbfeaaa68/" class="sidebar-link">å†…ç½®å¯¹è±¡</a></li><li><a href="/vuepressBlog/pages/659b5af5e2e704e0/" class="sidebar-link">é¢å‘å¯¹è±¡</a></li><li><a href="/vuepressBlog/pages/d61b1cb4cdac1f63/" class="sidebar-link">å¼‚æ­¥æ“ä½œ</a></li><li><a href="/vuepressBlog/pages/7d961b8030c6099e/" class="sidebar-link">DOM</a></li><li><a href="/vuepressBlog/pages/10b2761db5a8e089/" aria-current="page" class="active sidebar-link">äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#ä¸€ã€eventtarget-æ¥å£" class="sidebar-link">ä¸€ã€EventTarget æ¥å£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€æ¦‚è¿°" class="sidebar-link">1ã€æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€eventtarget-addeventlistener" class="sidebar-link">2ã€EventTarget.addEventListener()</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€eventtarget-removeeventlistener" class="sidebar-link">3ã€EventTarget.removeEventListener()</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€eventtarget-dispatchevent" class="sidebar-link">4ã€EventTarget.dispatchEvent()</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#äºŒã€äº‹ä»¶æ¨¡å‹" class="sidebar-link">äºŒã€äº‹ä»¶æ¨¡å‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€ç›‘å¬å‡½æ•°" class="sidebar-link">1ã€ç›‘å¬å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€this-çš„æŒ‡å‘-ï¼ˆæŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰" class="sidebar-link">2ã€this çš„æŒ‡å‘ ï¼ˆæŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€äº‹ä»¶çš„ä¼ æ’­ï¼ˆæ•è·ã€ç›®æ ‡ã€å†’æ³¡ï¼‰" class="sidebar-link">3ã€äº‹ä»¶çš„ä¼ æ’­ï¼ˆæ•è·ã€ç›®æ ‡ã€å†’æ³¡ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€äº‹ä»¶çš„ä»£ç†" class="sidebar-link">4ã€äº‹ä»¶çš„ä»£ç†</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#ä¸‰ã€event-å¯¹è±¡" class="sidebar-link">ä¸‰ã€Event å¯¹è±¡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1-æ¦‚è¿°" class="sidebar-link">1. æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2-å®ä¾‹å±æ€§" class="sidebar-link">2. å®ä¾‹å±æ€§</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€å®ä¾‹æ–¹æ³•" class="sidebar-link">3ã€å®ä¾‹æ–¹æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#å››ã€é¼ æ ‡äº‹ä»¶" class="sidebar-link">å››ã€é¼ æ ‡äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€é¼ æ ‡äº‹ä»¶çš„ç§ç±»" class="sidebar-link">1ã€é¼ æ ‡äº‹ä»¶çš„ç§ç±»</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€mouseevent-æ¥å£æ¦‚è¿°" class="sidebar-link">2ã€MouseEvent æ¥å£æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€mouseevent-æ¥å£çš„å®ä¾‹å±æ€§" class="sidebar-link">3ã€MouseEvent æ¥å£çš„å®ä¾‹å±æ€§</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€mouseevent-æ¥å£çš„å®ä¾‹æ–¹æ³•" class="sidebar-link">4ã€MouseEvent æ¥å£çš„å®ä¾‹æ–¹æ³•</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_5ã€wheelevent-æ¥å£-ï¼ˆæ»šè½®ï¼‰" class="sidebar-link">5ã€WheelEvent æ¥å£ ï¼ˆæ»šè½®ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#äº”ã€é”®ç›˜äº‹ä»¶" class="sidebar-link">äº”ã€é”®ç›˜äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€é”®ç›˜äº‹ä»¶çš„ç§ç±»" class="sidebar-link">1ã€é”®ç›˜äº‹ä»¶çš„ç§ç±»</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€keyboardevent-æ¥å£æ¦‚è¿°" class="sidebar-link">2ã€KeyboardEvent æ¥å£æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€keyboardevent-çš„å®ä¾‹å±æ€§" class="sidebar-link">3ã€KeyboardEvent çš„å®ä¾‹å±æ€§</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€keyboardevent-çš„å®ä¾‹æ–¹æ³•" class="sidebar-link">4ã€KeyboardEvent çš„å®ä¾‹æ–¹æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#å…­ã€è¿›åº¦äº‹ä»¶" class="sidebar-link">å…­ã€è¿›åº¦äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€è¿›åº¦äº‹ä»¶çš„ç§ç±»" class="sidebar-link">1ã€è¿›åº¦äº‹ä»¶çš„ç§ç±»</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€progressevent-æ¥å£" class="sidebar-link">2ã€ProgressEvent æ¥å£</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#ä¸ƒã€è¡¨å•äº‹ä»¶" class="sidebar-link">ä¸ƒã€è¡¨å•äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€è¡¨å•äº‹ä»¶çš„ç§ç±»" class="sidebar-link">1ã€è¡¨å•äº‹ä»¶çš„ç§ç±»</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€inputevent-æ¥å£ï¼ˆinputäº‹ä»¶çš„å®ä¾‹ï¼‰" class="sidebar-link">2ã€InputEvent æ¥å£ï¼ˆinputäº‹ä»¶çš„å®ä¾‹ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#å…«ã€è§¦æ‘¸äº‹ä»¶" class="sidebar-link">å…«ã€è§¦æ‘¸äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€è§¦æ‘¸æ“ä½œæ¦‚è¿°" class="sidebar-link">1ã€è§¦æ‘¸æ“ä½œæ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€touch-æ¥å£" class="sidebar-link">2ã€Touch æ¥å£</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€touchlist-æ¥å£" class="sidebar-link">3ã€TouchList æ¥å£</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€touchevent-æ¥å£" class="sidebar-link">4ã€TouchEvent æ¥å£</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_5ã€è§¦æ‘¸äº‹ä»¶çš„ç§ç±»" class="sidebar-link">5ã€è§¦æ‘¸äº‹ä»¶çš„ç§ç±»</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#ä¹ã€æ‹–æ‹‰äº‹ä»¶" class="sidebar-link">ä¹ã€æ‹–æ‹‰äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€æ‹–æ‹‰äº‹ä»¶çš„ç§ç±»" class="sidebar-link">1ã€æ‹–æ‹‰äº‹ä»¶çš„ç§ç±»</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€dragevent-æ¥å£" class="sidebar-link">2ã€DragEvent æ¥å£</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€datatransfer-æ¥å£æ¦‚è¿°" class="sidebar-link">3ã€DataTransfer æ¥å£æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€datatransfer-çš„å®ä¾‹å±æ€§" class="sidebar-link">4ã€DataTransfer çš„å®ä¾‹å±æ€§</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_5ã€datatransfer-çš„å®ä¾‹æ–¹æ³•" class="sidebar-link">5ã€DataTransfer çš„å®ä¾‹æ–¹æ³•</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#åã€å…¶ä»–å¸¸è§äº‹ä»¶" class="sidebar-link">åã€å…¶ä»–å¸¸è§äº‹ä»¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€èµ„æºäº‹ä»¶" class="sidebar-link">1ã€èµ„æºäº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€session-å†å²äº‹ä»¶" class="sidebar-link">2ã€session å†å²äº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€ç½‘é¡µçŠ¶æ€äº‹ä»¶" class="sidebar-link">3ã€ç½‘é¡µçŠ¶æ€äº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€çª—å£äº‹ä»¶" class="sidebar-link">4ã€çª—å£äº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_5ã€å‰ªè´´æ¿äº‹ä»¶" class="sidebar-link">5ã€å‰ªè´´æ¿äº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_6ã€ç„¦ç‚¹äº‹ä»¶" class="sidebar-link">6ã€ç„¦ç‚¹äº‹ä»¶</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_7ã€customevent-æ¥å£ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰" class="sidebar-link">7ã€CustomEvent æ¥å£ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#åä¸€ã€globaleventhandlers-æ¥å£-ï¼ˆå…¨å±€äº‹ä»¶å¤„ç†æ¥å£ï¼‰" class="sidebar-link">åä¸€ã€GlobalEventHandlers æ¥å£ ï¼ˆå…¨å±€äº‹ä»¶å¤„ç†æ¥å£ï¼‰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_1ã€globaleventhandlers-onabort-ï¼ˆä¸­æ–­äº‹ä»¶ï¼‰" class="sidebar-link">1ã€GlobalEventHandlers.onabort ï¼ˆä¸­æ–­äº‹ä»¶ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_2ã€globaleventhandlers-onerror-ï¼ˆé”™è¯¯äº‹ä»¶ï¼‰" class="sidebar-link">2ã€GlobalEventHandlers.onerror ï¼ˆé”™è¯¯äº‹ä»¶ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_3ã€globaleventhandlers-onloadï¼ˆåŠ è½½å®Œæˆäº‹ä»¶ï¼‰ã€globaleventhandlers-onloadstartï¼ˆå¼€å§‹åŠ è½½äº‹ä»¶ï¼‰" class="sidebar-link">3ã€GlobalEventHandlers.onloadï¼ˆåŠ è½½å®Œæˆäº‹ä»¶ï¼‰ã€GlobalEventHandlers.onloadstartï¼ˆå¼€å§‹åŠ è½½äº‹ä»¶ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_4ã€globaleventhandlers-onfocusï¼ˆè·å–ç„¦ç‚¹äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onblurï¼ˆå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼‰" class="sidebar-link">4ã€GlobalEventHandlers.onfocusï¼ˆè·å–ç„¦ç‚¹äº‹ä»¶ï¼‰ï¼ŒGlobalEventHandlers.onblurï¼ˆå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_5ã€globaleventhandlers-onscrollï¼ˆæ»šåŠ¨äº‹ä»¶ï¼‰" class="sidebar-link">5ã€GlobalEventHandlers.onscrollï¼ˆæ»šåŠ¨äº‹ä»¶ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_6ã€globaleventhandlers-oncontextmenuï¼ˆå³é”®èœå•äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onshowï¼ˆæ˜¾ç¤ºå³é”®èœå•æ—¶è§¦å‘ï¼‰" class="sidebar-link">6ã€GlobalEventHandlers.oncontextmenuï¼ˆå³é”®èœå•äº‹ä»¶ï¼‰ï¼ŒGlobalEventHandlers.onshowï¼ˆæ˜¾ç¤ºå³é”®èœå•æ—¶è§¦å‘ï¼‰</a></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#_7ã€å…¶ä»–çš„äº‹ä»¶å±æ€§" class="sidebar-link">7ã€å…¶ä»–çš„äº‹ä»¶å±æ€§</a></li></ul></li><li class="sidebar-sub-header"><a href="/vuepressBlog/pages/10b2761db5a8e089/#æ–‡æ¡£" class="sidebar-link">æ–‡æ¡£</a></li></ul></li><li><a href="/vuepressBlog/pages/bab4930124ad2c10/" class="sidebar-link">æµè§ˆå™¨æ¨¡å‹</a></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-524b21c0><div class="articleInfo" data-v-524b21c0><ul class="breadcrumbs" data-v-524b21c0><li data-v-524b21c0><a href="/vuepressBlog/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-524b21c0></a></li> <li data-v-524b21c0><a href="/vuepressBlog/note/javascript" title="ã€ŠJavaScriptæ•™ç¨‹ã€‹ç¬”è®°-ç›®å½•é¡µ" data-v-524b21c0>ã€ŠJavaScriptæ•™ç¨‹ã€‹ç¬”è®°</a></li> <!----></ul> <div class="info" data-v-524b21c0><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-524b21c0><a href="https://github.com/xavi-bryant/vuepressBlog" target="_blank" title="ä½œè€…" class="beLink" data-v-524b21c0>è½æ‹“å“Ÿ</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-524b21c0><a href="javascript:;" data-v-524b21c0>2020-01-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          äº‹ä»¶
        </h1> <div class="theme-vdoing-content content__default"><h1 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="header-anchor">#</a> äº‹ä»¶</h1> <h2 id="ä¸€ã€eventtarget-æ¥å£"><a href="#ä¸€ã€eventtarget-æ¥å£" class="header-anchor">#</a> ä¸€ã€EventTarget æ¥å£</h2> <p>äº‹ä»¶çš„æœ¬è´¨æ˜¯ç¨‹åºå„ä¸ªç»„æˆéƒ¨åˆ†ä¹‹é—´çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œä¹Ÿæ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§å®ç°ã€‚DOM æ”¯æŒå¤§é‡çš„äº‹ä»¶ï¼Œæœ¬ç« å¼€å§‹ä»‹ç» <strong>DOM çš„äº‹ä»¶ç¼–ç¨‹</strong>ã€‚</p> <h3 id="_1ã€æ¦‚è¿°"><a href="#_1ã€æ¦‚è¿°" class="header-anchor">#</a> 1ã€æ¦‚è¿°</h3> <p><strong>DOM çš„äº‹ä»¶æ“ä½œï¼ˆç›‘å¬å’Œè§¦å‘ï¼‰ï¼Œéƒ½å®šä¹‰åœ¨<code>EventTarget</code>æ¥å£</strong>ã€‚æ‰€æœ‰èŠ‚ç‚¹å¯¹è±¡éƒ½éƒ¨ç½²äº†è¿™ä¸ªæ¥å£ï¼Œå…¶ä»–ä¸€äº›éœ€è¦äº‹ä»¶é€šä¿¡çš„æµè§ˆå™¨å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼Œ<code>XMLHttpRequest</code>ã€<code>AudioNode</code>ã€<code>AudioContext</code>ï¼‰ä¹Ÿéƒ¨ç½²äº†è¿™ä¸ªæ¥å£ã€‚</p> <p>è¯¥æ¥å£ä¸»è¦æä¾›ä¸‰ä¸ªå®ä¾‹æ–¹æ³•ã€‚</p> <ul><li><code>addEventListener</code>ï¼šç»‘å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•°</li> <li><code>removeEventListener</code>ï¼šç§»é™¤äº‹ä»¶çš„ç›‘å¬å‡½æ•°</li> <li><code>dispatchEvent</code>ï¼šè§¦å‘äº‹ä»¶</li></ul> <h3 id="_2ã€eventtarget-addeventlistener"><a href="#_2ã€eventtarget-addeventlistener" class="header-anchor">#</a> 2ã€EventTarget.addEventListener()</h3> <p><code>EventTarget.addEventListener()</code>ç”¨äº<strong>åœ¨å½“å‰èŠ‚ç‚¹æˆ–å¯¹è±¡ä¸Šï¼Œå®šä¹‰ä¸€ä¸ªç‰¹å®šäº‹ä»¶çš„ç›‘å¬å‡½æ•°</strong>ã€‚<strong>ä¸€æ—¦è¿™ä¸ªäº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œç›‘å¬å‡½æ•°</strong>ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">[</span><span class="token punctuation">,</span> useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// äº‹ä»¶åç§°ï¼Œç›‘å¬å‡½æ•° [ï¼Œæ˜¯å¦åœ¨æ•è·é˜¶æ®µè§¦å‘]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¯¥æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•°ã€‚</p> <ul><li><code>type</code>ï¼šäº‹ä»¶åç§°ï¼Œå¤§å°å†™æ•æ„Ÿã€‚</li> <li><code>listener</code>ï¼šç›‘å¬å‡½æ•°ã€‚äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¼šè°ƒç”¨è¯¥ç›‘å¬å‡½æ•°ã€‚</li> <li><code>useCapture</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åœ¨æ•è·é˜¶æ®µï¼ˆcaptureï¼‰è§¦å‘ï¼ˆå‚è§åæ–‡ã€Šäº‹ä»¶çš„ä¼ æ’­ã€‹éƒ¨åˆ†ï¼‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼ˆç›‘å¬å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè¢«è§¦å‘ï¼‰ã€‚è¯¥å‚æ•°å¯é€‰ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> hello<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>button</code>èŠ‚ç‚¹çš„<code>addEventListener</code>æ–¹æ³•ç»‘å®š<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°<code>hello</code>ï¼Œè¯¥å‡½æ•°åªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p> <p>å…³äºå‚æ•°ï¼Œæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ã€‚</p> <p>é¦–å…ˆï¼Œç¬¬äºŒä¸ªå‚æ•°é™¤äº†ç›‘å¬å‡½æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå…·æœ‰<code>handleEvent</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>buttonElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">handleEvent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>addEventListener</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªå…·æœ‰<code>handleEvent</code>æ–¹æ³•çš„å¯¹è±¡ã€‚</p> <p>å…¶æ¬¡ï¼Œ<strong>ç¬¬ä¸‰ä¸ªå‚æ•°é™¤äº†å¸ƒå°”å€¼<code>useCapture</code>ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡</strong>ã€‚è¯¥å¯¹è±¡æœ‰ä»¥ä¸‹å±æ€§ã€‚</p> <blockquote><ul><li><code>capture</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦åœ¨<code>æ•è·é˜¶æ®µ</code>è§¦å‘ç›‘å¬å‡½æ•°ã€‚</li> <li><code>once</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°æ˜¯å¦åªè§¦å‘ä¸€æ¬¡ï¼Œç„¶åå°±è‡ªåŠ¨ç§»é™¤ã€‚</li> <li><code>passive</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºç›‘å¬å‡½æ•°ä¸ä¼šè°ƒç”¨äº‹ä»¶çš„<code>preventDefault</code>æ–¹æ³•ã€‚å¦‚æœç›‘å¬å‡½æ•°è°ƒç”¨äº†ï¼Œæµè§ˆå™¨å°†å¿½ç•¥è¿™ä¸ªè¦æ±‚ï¼Œå¹¶åœ¨ç›‘æ§å°è¾“å‡ºä¸€è¡Œè­¦å‘Šã€‚</li></ul></blockquote> <p>å¦‚æœå¸Œæœ›äº‹ä»¶ç›‘å¬å‡½æ•°<strong>åªæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå¯ä»¥æ‰“å¼€å±æ€§é…ç½®å¯¹è±¡çš„<code>once</code>å±æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>once<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>addEventListener</code>æ–¹æ³•å¯ä»¥ä¸ºé’ˆå¯¹å½“å‰å¯¹è±¡çš„åŒä¸€ä¸ªäº‹ä»¶ï¼Œæ·»åŠ å¤šä¸ªä¸åŒçš„ç›‘å¬å‡½æ•°ã€‚è¿™äº›å‡½æ•°æŒ‰ç…§æ·»åŠ é¡ºåºè§¦å‘ï¼Œå³å…ˆæ·»åŠ å…ˆè§¦å‘ã€‚å¦‚æœä¸ºåŒä¸€ä¸ªäº‹ä»¶å¤šæ¬¡æ·»åŠ åŒä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œè¯¥å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¤šä½™çš„æ·»åŠ å°†è‡ªåŠ¨è¢«å»é™¤ï¼ˆä¸å¿…ä½¿ç”¨<code>removeEventListener</code>æ–¹æ³•æ‰‹åŠ¨å»é™¤ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> hello<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> hello<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»æ–‡æ¡£åªä¼šè¾“å‡ºä¸€è¡Œ<code>Hello world</code>ã€‚</p> <p>å¦‚æœ<strong>å¸Œæœ›å‘ç›‘å¬å‡½æ•°ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ç”¨åŒ¿åå‡½æ•°åŒ…è£…ä¸€ä¸‹ç›‘å¬å‡½æ•°ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸Šé¢ä»£ç é€šè¿‡åŒ¿åå‡½æ•°ï¼Œå‘ç›‘å¬å‡½æ•°<code>print</code>ä¼ é€’äº†ä¸€ä¸ªå‚æ•°ã€‚</p> <p>ç›‘å¬å‡½æ•°<strong>å†…éƒ¨çš„<code>this</code>ï¼ŒæŒ‡å‘å½“å‰äº‹ä»¶æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;p id=&quot;para&quot;&gt;Hello&lt;/p&gt;</span>
<span class="token keyword">var</span> para <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'para'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
para<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;P&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘äº‹ä»¶æ‰€åœ¨çš„å¯¹è±¡<code>para</code>ã€‚</p> <h3 id="_3ã€eventtarget-removeeventlistener"><a href="#_3ã€eventtarget-removeeventlistener" class="header-anchor">#</a> 3ã€EventTarget.removeEventListener()</h3> <p><code>EventTarget.removeEventListener</code>æ–¹æ³•<strong>ç”¨æ¥ç§»é™¤<code>addEventListener</code>æ–¹æ³•æ·»åŠ çš„äº‹ä»¶ç›‘å¬å‡½æ•°</strong>ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>removeEventListener</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¸<code>addEventListener</code>æ–¹æ³•å®Œå…¨ä¸€è‡´ã€‚å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°â€œäº‹ä»¶ç±»å‹â€ï¼Œå¤§å°å†™æ•æ„Ÿã€‚</p> <p>æ³¨æ„ï¼Œ<code>removeEventListener</code>æ–¹æ³•ç§»é™¤çš„ç›‘å¬å‡½æ•°ï¼Œå¿…é¡»æ˜¯<code>addEventListener</code>æ–¹æ³•æ·»åŠ çš„é‚£ä¸ªç›‘å¬å‡½æ•°ï¼Œè€Œä¸”å¿…é¡»åœ¨åŒä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œå¦åˆ™æ— æ•ˆã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ç§»é™¤æ— æ•ˆï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªç›‘å¬å‡½æ•°</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>removeEventListener</code>æ–¹æ³•æ— æ•ˆï¼Œå› ä¸ºç›‘å¬å‡½æ•°ä¸æ˜¯åŒä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> handleMouseDown<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousedown&quot;</span><span class="token punctuation">,</span> handleMouseDown<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç§»é™¤æ— æ•ˆï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ä¸€æ ·</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>removeEventListener</code>æ–¹æ³•ä¹Ÿæ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¸ä¸€æ ·ã€‚</p> <h3 id="_4ã€eventtarget-dispatchevent"><a href="#_4ã€eventtarget-dispatchevent" class="header-anchor">#</a> 4ã€EventTarget.dispatchEvent()</h3> <p><code>EventTarget.dispatchEvent</code>æ–¹æ³•åœ¨å½“å‰èŠ‚ç‚¹ä¸Š<strong>è§¦å‘æŒ‡å®šäº‹ä»¶ï¼Œä»è€Œè§¦å‘ç›‘å¬å‡½æ•°çš„æ‰§è¡Œã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</strong>ï¼Œåªè¦æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†<code>Event.preventDefault()</code>ï¼Œåˆ™è¿”å›å€¼ä¸º<code>false</code>ï¼Œå¦åˆ™ä¸º<code>true</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>target<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>dispatchEvent</code>æ–¹æ³•çš„<strong>å‚æ•°æ˜¯ä¸€ä¸ª<code>Event</code>å¯¹è±¡çš„å®ä¾‹</strong>ï¼ˆè¯¦è§ã€ŠEvent å¯¹è±¡ã€‹ç« èŠ‚ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>para<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> hello<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
para<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç åœ¨å½“å‰èŠ‚ç‚¹è§¦å‘äº†<code>click</code>äº‹ä»¶ã€‚</p> <p>å¦‚æœ<code>dispatchEvent</code>æ–¹æ³•çš„å‚æ•°ä¸ºç©ºï¼Œæˆ–è€…ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äº‹ä»¶å¯¹è±¡ï¼Œå°†æŠ¥é”™ã€‚</p> <p>ä¸‹é¢ä»£ç æ ¹æ®<code>dispatchEvent</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œ<strong>åˆ¤æ–­äº‹ä»¶æ˜¯å¦è¢«å–æ¶ˆ</strong>äº†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> canceled <span class="token operator">=</span> <span class="token operator">!</span>cb<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>canceled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'äº‹ä»¶å–æ¶ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'äº‹ä»¶æœªå–æ¶ˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="äºŒã€äº‹ä»¶æ¨¡å‹"><a href="#äºŒã€äº‹ä»¶æ¨¡å‹" class="header-anchor">#</a> äºŒã€äº‹ä»¶æ¨¡å‹</h2> <h3 id="_1ã€ç›‘å¬å‡½æ•°"><a href="#_1ã€ç›‘å¬å‡½æ•°" class="header-anchor">#</a> 1ã€ç›‘å¬å‡½æ•°</h3> <p>æµè§ˆå™¨çš„äº‹ä»¶æ¨¡å‹ï¼Œå°±æ˜¯é€šè¿‡ç›‘å¬å‡½æ•°ï¼ˆlistenerï¼‰å¯¹äº‹ä»¶åšå‡ºååº”ã€‚äº‹ä»¶å‘ç”Ÿåï¼Œæµè§ˆå™¨ç›‘å¬åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ç›‘å¬å‡½æ•°ã€‚è¿™æ˜¯äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å¼ï¼ˆevent-drivenï¼‰çš„ä¸»è¦ç¼–ç¨‹æ–¹å¼ã€‚</p> <p>JavaScript æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥ä¸ºäº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°ã€‚</p> <h4 id="_1-2-html-çš„-on-å±æ€§"><a href="#_1-2-html-çš„-on-å±æ€§" class="header-anchor">#</a> 1.2 HTML çš„ on- å±æ€§</h4> <p>HTML è¯­è¨€å…è®¸åœ¨å…ƒç´ çš„å±æ€§ä¸­ï¼Œç›´æ¥å®šä¹‰æŸäº›äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doSomething()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- åŠ åœ†æ‹¬å·--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(<span class="token punctuation">'</span>è§¦å‘äº‹ä»¶<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸º<code>body</code>èŠ‚ç‚¹çš„<code>load</code>äº‹ä»¶ã€<code>div</code>èŠ‚ç‚¹çš„<code>click</code>äº‹ä»¶ï¼ŒæŒ‡å®šäº†ç›‘å¬ä»£ç ã€‚ä¸€æ—¦äº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚</p> <p>å…ƒç´ çš„äº‹ä»¶ç›‘å¬å±æ€§ï¼Œéƒ½æ˜¯<code>on</code>åŠ ä¸Šäº‹ä»¶åï¼Œæ¯”å¦‚<code>onload</code>å°±æ˜¯<code>on + load</code>ï¼Œè¡¨ç¤º<code>load</code>äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p> <p>æ³¨æ„ï¼Œè¿™äº›å±æ€§çš„å€¼æ˜¯å°†ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- æ­£ç¡® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doSomething()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- é”™è¯¯ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doSomething<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸€æ—¦æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œ<code>on-</code>å±æ€§çš„å€¼æ˜¯åŸæ ·ä¼ å…¥ JavaScript å¼•æ“æ‰§è¡Œã€‚å› æ­¤å¦‚æœè¦æ‰§è¡Œå‡½æ•°ï¼Œ<strong>ä¸è¦å¿˜è®°åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·</strong>ã€‚</p> <p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬ä»£ç ï¼Œåªä¼šåœ¨<strong>å†’æ³¡é˜¶æ®µè§¦å‘</strong>ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(2)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(1)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;button&gt;</code>æ˜¯<code>&lt;div&gt;</code>çš„å­å…ƒç´ ã€‚<code>&lt;button&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼Œä¹Ÿä¼šè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚ç”±äº<code>on-</code>å±æ€§çš„ç›‘å¬ä»£ç ï¼Œåªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼Œæ‰€ä»¥ç‚¹å‡»ç»“æœæ˜¯å…ˆè¾“å‡º<code>1</code>ï¼Œå†è¾“å‡º<code>2</code>ï¼Œå³äº‹ä»¶<strong>ä»å­å…ƒç´ å¼€å§‹å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚</strong></p> <p>ç›´æ¥è®¾ç½®<code>on-</code>å±æ€§ï¼Œä¸é€šè¿‡å…ƒç´ èŠ‚ç‚¹çš„<code>setAttribute</code>æ–¹æ³•è®¾ç½®<code>on-</code>å±æ€§ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>el<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token string">'doSomething()'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ç­‰åŒäº</span>
<span class="token comment">// &lt;Element onclick=&quot;doSomething()&quot;&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1-2-å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§-ä¾‹ï¼šel-onclick"><a href="#_1-2-å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§-ä¾‹ï¼šel-onclick" class="header-anchor">#</a> 1.2 å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§ (ä¾‹ï¼šel.onclick)</h4> <p>å…ƒç´ èŠ‚ç‚¹å¯¹è±¡çš„<strong>äº‹ä»¶å±æ€§</strong>ï¼ŒåŒæ ·å¯ä»¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>onload <span class="token operator">=</span> doSomething<span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„è¿™é‡Œæ˜¯å‡½æ•°åï¼Œä¸åŠ åœ†æ‹¬å·</span>

div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// onclickæ˜¯å…ƒç´ çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è§¦å‘ç‚¹å‡»æ—¶æ‰§è¡Œæ­¤å‡½æ•°</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è§¦å‘äº‹ä»¶'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬å‡½æ•°ï¼Œä¹Ÿæ˜¯åªä¼šåœ¨<strong>å†’æ³¡é˜¶æ®µè§¦å‘</strong>ã€‚</p> <p>æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸ HTML çš„<code>on-</code>å±æ€§çš„å·®å¼‚æ˜¯ï¼Œå®ƒçš„å€¼æ˜¯å‡½æ•°åï¼ˆ<code>doSomething</code>ï¼‰ï¼Œè€Œä¸åƒåè€…ï¼Œå¿…é¡»ç»™å‡ºå®Œæ•´çš„ç›‘å¬ä»£ç ï¼ˆ<code>doSomething()</code>ï¼‰ã€‚</p> <h4 id="_1-3-eventtarget-addeventlistener"><a href="#_1-3-eventtarget-addeventlistener" class="header-anchor">#</a> 1.3 EventTarget.addEventListener()</h4> <p><strong>æ‰€æœ‰ DOM èŠ‚ç‚¹å®ä¾‹éƒ½æœ‰<code>addEventListener</code>æ–¹æ³•</strong>ï¼Œç”¨æ¥ä¸ºè¯¥èŠ‚ç‚¹å®šä¹‰äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> doSomething<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„è¿™é‡Œæ˜¯å‡½æ•°åï¼Œä¸åŠ åœ†æ‹¬å·</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>addEventListener</code>æ–¹æ³•çš„è¯¦ç»†ä»‹ç»ï¼Œå‚è§<code>EventTarget</code>ç« èŠ‚ã€‚</p> <h4 id="_1-4-å°ç»“"><a href="#_1-4-å°ç»“" class="header-anchor">#</a> 1.4 å°ç»“</h4> <p>ä¸Šé¢ä¸‰ç§æ–¹æ³•ï¼Œ</p> <p>ç¬¬ä¸€ç§â€œHTML çš„ on- å±æ€§â€ï¼Œè¿åäº† HTML ä¸ JavaScript ä»£ç ç›¸åˆ†ç¦»çš„åŸåˆ™ï¼Œå°†ä¸¤è€…å†™åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºä»£ç åˆ†å·¥ï¼Œå› æ­¤<strong>ä¸æ¨èä½¿ç”¨</strong>ã€‚</p> <p>ç¬¬äºŒç§â€œå…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§â€çš„<strong>ç¼ºç‚¹</strong>åœ¨äºï¼Œ<strong>åŒä¸€ä¸ªäº‹ä»¶åªèƒ½å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®šä¹‰ä¸¤æ¬¡<code>onclick</code>å±æ€§ï¼Œåä¸€æ¬¡å®šä¹‰ä¼šè¦†ç›–å‰ä¸€æ¬¡ã€‚å› æ­¤ï¼Œ<strong>ä¹Ÿä¸æ¨èä½¿ç”¨</strong>ã€‚</p> <p>ç¬¬ä¸‰ç§<code>EventTarget.addEventListener</code>æ˜¯<strong>æ¨èçš„æŒ‡å®šç›‘å¬å‡½æ•°çš„æ–¹æ³•</strong>ã€‚å®ƒæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p> <ul><li>åŒä¸€ä¸ªäº‹ä»¶å¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ã€‚</li> <li>èƒ½å¤ŸæŒ‡å®šåœ¨å“ªä¸ªé˜¶æ®µï¼ˆæ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µï¼‰è§¦å‘ç›‘å¬å‡½æ•°ã€‚</li> <li>é™¤äº† DOM èŠ‚ç‚¹ï¼Œå…¶ä»–å¯¹è±¡ï¼ˆæ¯”å¦‚<code>window</code>ã€<code>XMLHttpRequest</code>ç­‰ï¼‰ä¹Ÿæœ‰è¿™ä¸ªæ¥å£ï¼Œå®ƒç­‰äºæ˜¯æ•´ä¸ª JavaScript ç»Ÿä¸€çš„ç›‘å¬å‡½æ•°æ¥å£ã€‚</li></ul> <h3 id="_2ã€this-çš„æŒ‡å‘-ï¼ˆæŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰"><a href="#_2ã€this-çš„æŒ‡å‘-ï¼ˆæŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰" class="header-anchor">#</a> 2ã€this çš„æŒ‡å‘ ï¼ˆæŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰</h3> <p><strong>ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘è§¦å‘äº‹ä»¶çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚ï¼ˆä¸‰ç§äº‹ä»¶ç»‘å®šçš„thiså…¨æŒ‡å‘å…ƒç´ èŠ‚ç‚¹ï¼‰</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(this.id)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»åä¼šè¾“å‡º<code>btn</code>ã€‚</p> <p>å…¶ä»–ä¸¤ç§ç›‘å¬å‡½æ•°çš„å†™æ³•ï¼Œ<code>this</code>çš„æŒ‡å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;button id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/button&gt;</span>
<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å†™æ³•ä¸€</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å†™æ³•äºŒ</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åä¹Ÿæ˜¯è¾“å‡º<code>btn</code>ã€‚</p> <h3 id="_3ã€äº‹ä»¶çš„ä¼ æ’­ï¼ˆæ•è·ã€ç›®æ ‡ã€å†’æ³¡ï¼‰"><a href="#_3ã€äº‹ä»¶çš„ä¼ æ’­ï¼ˆæ•è·ã€ç›®æ ‡ã€å†’æ³¡ï¼‰" class="header-anchor">#</a> 3ã€äº‹ä»¶çš„ä¼ æ’­ï¼ˆæ•è·ã€ç›®æ ‡ã€å†’æ³¡ï¼‰</h3> <p>ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä¼š<strong>åœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é—´ä¼ æ’­</strong>ï¼ˆpropagationï¼‰ã€‚è¿™ç§ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µã€‚</p> <ul><li><strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼šä»<code>window</code>å¯¹è±¡ä¼ å¯¼åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆä¸Šå±‚ä¼ åˆ°åº•å±‚ï¼‰ï¼Œç§°ä¸ºâ€œ<strong>æ•è·é˜¶æ®µ</strong>â€ï¼ˆcapture phaseï¼‰ã€‚</li> <li><strong>ç¬¬äºŒé˜¶æ®µ</strong>ï¼šåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œç§°ä¸ºâ€œ<strong>ç›®æ ‡é˜¶æ®µ</strong>â€ï¼ˆtarget phaseï¼‰ã€‚</li> <li><strong>ç¬¬ä¸‰é˜¶æ®µ</strong>ï¼šä»ç›®æ ‡èŠ‚ç‚¹ä¼ å¯¼å›<code>window</code>å¯¹è±¡ï¼ˆä»åº•å±‚ä¼ å›ä¸Šå±‚ï¼‰ï¼Œç§°ä¸ºâ€œ<strong>å†’æ³¡é˜¶æ®µ</strong>â€ï¼ˆbubbling phaseï¼‰ã€‚</li></ul> <p>è¿™ç§ä¸‰é˜¶æ®µçš„ä¼ æ’­æ¨¡å‹ï¼Œä½¿å¾—åŒä¸€ä¸ªäº‹ä»¶ä¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè§¦å‘ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ç‚¹å‡»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;div&gt;</code>èŠ‚ç‚¹ä¹‹ä¸­æœ‰ä¸€ä¸ª<code>&lt;p&gt;</code>èŠ‚ç‚¹ã€‚</p> <p>å¦‚æœå¯¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéƒ½è®¾ç½®<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œå„è®¾ç½®ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå…±è®¡è®¾ç½®å››ä¸ªç›‘å¬å‡½æ•°ã€‚ç„¶åï¼Œå¯¹<code>&lt;p&gt;</code>ç‚¹å‡»ï¼Œ<code>click</code>äº‹ä»¶ä¼šè§¦å‘å››æ¬¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> phases <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'capture'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'target'</span><span class="token punctuation">,</span>
  <span class="token number">3</span><span class="token operator">:</span> <span class="token string">'bubble'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// fasle è¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè§¦å‘</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fasle è¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè§¦å‘</span>

<span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tag <span class="token operator">=</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>tagName<span class="token punctuation">;</span> <span class="token comment">// å½“å‰ç›®æ ‡å¯¹è±¡çš„æ ‡ç­¾å</span>
  <span class="token keyword">var</span> phase <span class="token operator">=</span> phases<span class="token punctuation">[</span>event<span class="token punctuation">.</span>eventPhase<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// è§¦å‘çš„é˜¶æ®µ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Tag: '&quot;</span> <span class="token operator">+</span> tag <span class="token operator">+</span> <span class="token string">&quot;'. EventPhase: '&quot;</span> <span class="token operator">+</span> phase <span class="token operator">+</span> <span class="token string">&quot;'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ç‚¹å‡»ä»¥åçš„ç»“æœ</span>
<span class="token comment">// Tag: 'DIV'. EventPhase: 'capture'  æ•è·é˜¶æ®µ</span>
<span class="token comment">// Tag: 'P'. EventPhase: 'target' ç›®æ ‡é˜¶æ®µ</span>
<span class="token comment">// Tag: 'P'. EventPhase: 'target' ç›®æ ‡é˜¶æ®µ</span>
<span class="token comment">// Tag: 'DIV'. EventPhase: 'bubble' å†’æ³¡é˜¶æ®µ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>click</code>äº‹ä»¶è¢«è§¦å‘äº†å››æ¬¡ï¼š<code>&lt;div&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µå„1æ¬¡ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„ç›®æ ‡é˜¶æ®µè§¦å‘äº†2æ¬¡ã€‚</p> <ol><li>æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>å‘<code>&lt;p&gt;</code>ä¼ æ’­æ—¶ï¼Œè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li> <li>ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>åˆ°è¾¾<code>&lt;p&gt;</code>æ—¶ï¼Œè§¦å‘<code>&lt;p&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li> <li>å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;p&gt;</code>ä¼ å›<code>&lt;div&gt;</code>æ—¶ï¼Œå†æ¬¡è§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚</li></ol> <p>å…¶ä¸­ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼ˆ<code>addEventListener</code>æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´ç»‘å®šä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šå› ä¸º<code>click</code>äº‹ä»¶è§¦å‘ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œ<code>&lt;p&gt;</code>ä¼šåœ¨<code>target</code>é˜¶æ®µæœ‰ä¸¤æ¬¡è¾“å‡ºã€‚</p> <p><strong>æ³¨æ„</strong>ï¼Œ<strong>æµè§ˆå™¨æ€»æ˜¯å‡å®š<code>click</code>äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œå°±æ˜¯ç‚¹å‡»ä½ç½®åµŒå¥—æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹</strong>ï¼ˆæœ¬ä¾‹æ˜¯<code>&lt;div&gt;</code>èŠ‚ç‚¹é‡Œé¢çš„<code>&lt;p&gt;</code>èŠ‚ç‚¹ï¼‰ã€‚æ‰€ä»¥ï¼Œ<strong><code>&lt;p&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œéƒ½ä¼šæ˜¾ç¤ºä¸º<code>target</code>é˜¶æ®µã€‚</strong></p> <p>äº‹ä»¶ä¼ æ’­çš„æœ€ä¸Šå±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œæ¥ç€ä¾æ¬¡æ˜¯<code>document</code>ï¼Œ<code>html</code>ï¼ˆ<code>document.documentElement</code>ï¼‰å’Œ<code>body</code>ï¼ˆ<code>document.body</code>ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¾‹çš„äº‹ä»¶ä¼ æ’­é¡ºåºï¼Œåœ¨æ•è·é˜¶æ®µä¾æ¬¡ä¸º<code>window</code>ã€<code>document</code>ã€<code>html</code>ã€<code>body</code>ã€<code>div</code>ã€<code>p</code>ï¼Œåœ¨å†’æ³¡é˜¶æ®µä¾æ¬¡ä¸º<code>p</code>ã€<code>div</code>ã€<code>body</code>ã€<code>html</code>ã€<code>document</code>ã€<code>window</code>ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>æ•è·é˜¶æ®µï¼š
window(æµè§ˆå™¨å¯¹è±¡)--&gt; document(æ–‡æ¡£å¯¹è±¡) --&gt; html --&gt; body --&gt; div --&gt; p (ç‚¹å‡»ç›®æ ‡ï¼Œåœ¨ç›®æ ‡é˜¶æ®µ)

å†’æ³¡é˜¶æ®µï¼š
p (ç‚¹å‡»ç›®æ ‡ï¼Œåœ¨ç›®æ ‡é˜¶æ®µ)--&gt; div --&gt; body --&gt; html --&gt; document(æ–‡æ¡£å¯¹è±¡) --&gt; window(æµè§ˆå™¨å¯¹è±¡)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_4ã€äº‹ä»¶çš„ä»£ç†"><a href="#_4ã€äº‹ä»¶çš„ä»£ç†" class="header-anchor">#</a> 4ã€äº‹ä»¶çš„ä»£ç†</h3> <p>ç”±äºäº‹ä»¶ä¼šåœ¨å†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠ<strong>å­èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç”±çˆ¶èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚è¿™ç§æ–¹æ³•å«åšäº‹ä»¶çš„ä»£ç†</strong>ï¼ˆdelegationï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æµè§ˆå™¨å‡å®šclickåµŒå¥—æœ€æ·±çš„å…ƒç´ æ˜¯ç›®æ ‡å…ƒç´ </span>
    <span class="token comment">// some code</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨<code>&lt;ul&gt;</code>èŠ‚ç‚¹ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¤„ç†çš„æ˜¯å­èŠ‚ç‚¹<code>&lt;li&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œå°±èƒ½å¤„ç†å¤šä¸ªå­èŠ‚ç‚¹çš„äº‹ä»¶ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸ª<code>&lt;li&gt;</code>èŠ‚ç‚¹ä¸Šå®šä¹‰ç›‘å¬å‡½æ•°ã€‚è€Œä¸”ä»¥åå†æ·»åŠ å­èŠ‚ç‚¹ï¼Œç›‘å¬å‡½æ•°ä¾ç„¶æœ‰æ•ˆã€‚</p> <h5 id="é˜»æ­¢äº‹ä»¶å†’æ³¡-event-stoppropagation"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡-event-stoppropagation" class="header-anchor">#</a> é˜»æ­¢äº‹ä»¶å†’æ³¡ event.stopPropagation()</h5> <p>å¦‚æœå¸Œæœ›äº‹ä»¶åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºæ­¢ï¼Œä¸å†ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„<code>stopPropagation</code>æ–¹æ³•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// äº‹ä»¶ä¼ æ’­åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸‹ä¼ æ’­äº†</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯¥æ–¹æ³•åœ¨äº‹ä»¶å¯¹è±¡eventä¸Š</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// trueè¡¨ç¤ºåœ¨æ•è·é˜¶æ®µç»‘å®šäº‹ä»¶ç›‘å¬å‡½æ•°</span>

<span class="token comment">// äº‹ä»¶å†’æ³¡åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸Šå†’æ³¡äº†</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// falseè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µï¼ˆé»˜è®¤å€¼ï¼‰ç»‘å®šäº‹ä»¶ç›‘å¬å‡½æ•°</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopPropagation</code>æ–¹æ³•åˆ†åˆ«åœ¨æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œé˜»æ­¢äº†äº‹ä»¶çš„ä¼ æ’­ã€‚</p> <p>ä½†æ˜¯ï¼Œ<strong><code>stopPropagation</code>æ–¹æ³•åªä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œä¸ä¼šé˜»æ­¢è¯¥äº‹ä»¶è§¦å‘<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„å…¶ä»–<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å½»åº•å–æ¶ˆ<code>click</code>äº‹ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¼šè§¦å‘</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>å…ƒç´ ç»‘å®šäº†ä¸¤ä¸ª<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚<code>stopPropagation</code>æ–¹æ³•åªèƒ½é˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­ï¼Œä¸èƒ½å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œå› æ­¤ï¼Œç¬¬äºŒä¸ªç›‘å¬å‡½æ•°ä¼šè§¦å‘ã€‚è¾“å‡ºç»“æœä¼šå…ˆæ˜¯1ï¼Œç„¶åæ˜¯2ã€‚</p> <p>å¦‚æœ<strong>æƒ³è¦å½»åº•å–æ¶ˆè¯¥äº‹ä»¶</strong>ï¼Œä¸å†è§¦å‘åé¢æ‰€æœ‰<code>click</code>çš„ç›‘å¬å‡½æ•°ï¼Œ<strong>å¯ä»¥ä½¿ç”¨<code>stopImmediatePropagation()</code>æ–¹æ³•</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸ä¼šè¢«è§¦å‘</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopImmediatePropagation</code>æ–¹æ³•å¯ä»¥å½»åº•å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œä½¿å¾—åé¢ç»‘å®šçš„æ‰€æœ‰<code>click</code>ç›‘å¬å‡½æ•°éƒ½ä¸å†è§¦å‘ã€‚æ‰€ä»¥ï¼Œåªä¼šè¾“å‡º1ï¼Œä¸ä¼šè¾“å‡º2ã€‚</p> <h2 id="ä¸‰ã€event-å¯¹è±¡"><a href="#ä¸‰ã€event-å¯¹è±¡" class="header-anchor">#</a> ä¸‰ã€Event å¯¹è±¡</h2> <h3 id="_1-æ¦‚è¿°"><a href="#_1-æ¦‚è¿°" class="header-anchor">#</a> 1. æ¦‚è¿°</h3> <p><strong>äº‹ä»¶å‘ç”Ÿä»¥åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œä½œä¸ºå‚æ•°ä¼ ç»™ç›‘å¬å‡½æ•°</strong>ã€‚æµè§ˆå™¨åŸç”Ÿæä¾›ä¸€ä¸ª<code>Event</code>å¯¹è±¡ï¼Œæ‰€æœ‰çš„äº‹ä»¶éƒ½æ˜¯è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œæˆ–è€…è¯´ç»§æ‰¿äº†<code>Event.prototype</code>å¯¹è±¡ã€‚</p> <p><strong><code>Event</code>å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆæ–°çš„å®ä¾‹</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å‚æ•°ä¸€ï¼Œäº‹ä»¶åç§°ï¼› å‚æ•°äºŒï¼Œäº‹ä»¶å¯¹è±¡çš„é…ç½®å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Event</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°<code>type</code>æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åç§°ï¼›ç¬¬äºŒä¸ªå‚æ•°<code>options</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡çš„é…ç½®ã€‚è¯¥å¯¹è±¡ä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªå±æ€§ã€‚</p> <ul><li><code>bubbles</code>ï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼Œè¡¨ç¤ºäº‹ä»¶å¯¹è±¡<strong>æ˜¯å¦å†’æ³¡</strong>ã€‚</li> <li><code>cancelable</code>ï¼šå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤ä¸º<code>false</code>ï¼Œè¡¨ç¤ºäº‹ä»¶<strong>æ˜¯å¦å¯ä»¥è¢«å–æ¶ˆ</strong>ï¼Œå³èƒ½å¦ç”¨<code>Event.preventDefault()</code>å–æ¶ˆè¿™ä¸ªäº‹ä»¶ã€‚ä¸€æ—¦äº‹ä»¶è¢«å–æ¶ˆï¼Œå°±å¥½åƒä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ï¼Œä¸ä¼šè§¦å‘æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> ev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span> <span class="token comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å®ä¾‹</span>
  <span class="token string">'look'</span><span class="token punctuation">,</span> <span class="token comment">// äº‹ä»¶åç§°</span>
  <span class="token punctuation">{</span> <span class="token comment">// äº‹ä»¶é…ç½®</span>
    <span class="token string">'bubbles'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// äº‹ä»¶æ˜¯å¦å†’æ³¡</span>
    <span class="token string">'cancelable'</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// äº‹ä»¶æ˜¯å¦å¯ä»¥è¢«å–æ¶ˆ</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è§¦å‘evå®ä¾‹ï¼Œè¯¥å®ä¾‹æ˜¯lookäº‹ä»¶</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸Šé¢ä»£ç æ–°å»ºä¸€ä¸ª<code>look</code>äº‹ä»¶å®ä¾‹ï¼Œç„¶åä½¿ç”¨<code>dispatchEvent</code>æ–¹æ³•è§¦å‘è¯¥äº‹ä»¶ã€‚</p> <p>æ³¨æ„ï¼Œå¦‚æœä¸æ˜¯æ˜¾å¼æŒ‡å®š<code>bubbles</code>å±æ€§ä¸º<code>true</code>ï¼Œç”Ÿæˆçš„äº‹ä»¶å°±åªèƒ½åœ¨â€œæ•è·é˜¶æ®µâ€è§¦å‘ç›‘å¬å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;div&gt;&lt;p&gt;Hello&lt;/p&gt;&lt;/div&gt;</span>
<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> tag <span class="token operator">=</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>tagName<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Tag: '</span> <span class="token operator">+</span> tag<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ²¡æœ‰ä»»ä½•è¾“å‡º</span>
<span class="token punctuation">}</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¯¥äº‹ä»¶æ˜¯åœ¨å†’æ³¡é˜¶æ®µç›‘å¬å‡½æ•°</span>

<span class="token keyword">var</span> click <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
p<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»™på‘å‡ºä¸€ä¸ªclickäº‹ä»¶ï¼Œè¯¥äº‹ä»¶é»˜è®¤ä¸ä¼šå†’æ³¡ï¼Œå› æ­¤ä¸ä¼šè§¦å‘çˆ¶å…ƒç´ divçš„clickäº‹ä»¶</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>å…ƒç´ å‘å‡ºä¸€ä¸ª<code>click</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶é»˜è®¤ä¸ä¼šå†’æ³¡ã€‚<code>div.addEventListener</code>æ–¹æ³•æŒ‡å®šåœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œå› æ­¤ç›‘å¬å‡½æ•°ä¸ä¼šè§¦å‘ã€‚å¦‚æœå†™æˆ<code>div.addEventListener('click', callback, true)</code>ï¼Œé‚£ä¹ˆåœ¨â€œæ•è·é˜¶æ®µâ€å¯ä»¥ç›‘å¬åˆ°è¿™ä¸ªäº‹ä»¶ã€‚</p> <p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœè¿™ä¸ªäº‹ä»¶åœ¨<code>div</code>å…ƒç´ ä¸Šè§¦å‘ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é‚£ä¹ˆï¼Œä¸ç®¡<code>div</code>å…ƒç´ æ˜¯åœ¨å†’æ³¡é˜¶æ®µç›‘å¬ï¼Œè¿˜æ˜¯åœ¨æ•è·é˜¶æ®µç›‘å¬ï¼Œéƒ½ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚å› ä¸ºè¿™æ—¶<code>div</code>å…ƒç´ æ˜¯äº‹ä»¶çš„ç›®æ ‡ï¼Œä¸å­˜åœ¨æ˜¯å¦å†’æ³¡çš„é—®é¢˜ï¼Œ<code>div</code>å…ƒç´ æ€»æ˜¯ä¼šæ¥æ”¶åˆ°äº‹ä»¶ï¼Œå› æ­¤å¯¼è‡´ç›‘å¬å‡½æ•°ç”Ÿæ•ˆã€‚</p> <h3 id="_2-å®ä¾‹å±æ€§"><a href="#_2-å®ä¾‹å±æ€§" class="header-anchor">#</a> 2. å®ä¾‹å±æ€§</h3> <h4 id="_2-1-event-bubbles-æ˜¯å¦ä¼šå†’æ³¡ï¼Œåªè¯»ï¼Œevent-eventphase-è¿”å›æ•´æ•°ï¼Œè¡¨ç¤ºäº‹ä»¶æ‰€å¤„é˜¶æ®µï¼Œåªè¯»"><a href="#_2-1-event-bubbles-æ˜¯å¦ä¼šå†’æ³¡ï¼Œåªè¯»ï¼Œevent-eventphase-è¿”å›æ•´æ•°ï¼Œè¡¨ç¤ºäº‹ä»¶æ‰€å¤„é˜¶æ®µï¼Œåªè¯»" class="header-anchor">#</a> 2.1 Event.bubbles æ˜¯å¦ä¼šå†’æ³¡ï¼Œåªè¯»ï¼ŒEvent.eventPhase è¿”å›æ•´æ•°ï¼Œè¡¨ç¤ºäº‹ä»¶æ‰€å¤„é˜¶æ®µï¼Œåªè¯»</h4> <p><code>Event.bubbles</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰äº‹ä»¶æ˜¯å¦ä¼šå†’æ³¡</strong>ã€‚è¯¥å±æ€§ä¸º<strong>åªè¯»</strong>å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹æ˜¯å¦å¯ä»¥å†’æ³¡ã€‚å‰é¢è¯´è¿‡ï¼Œé™¤éæ˜¾å¼å£°æ˜ï¼Œ<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œé»˜è®¤æ˜¯ä¸å†’æ³¡çš„ã€‚</p> <p><code>Event.eventPhase</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªæ•´æ•°å¸¸é‡ï¼Œè¡¨ç¤ºäº‹ä»¶ç›®å‰æ‰€å¤„çš„é˜¶æ®µã€‚è¯¥å±æ€§åªè¯»</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> phase <span class="token operator">=</span> event<span class="token punctuation">.</span>eventPhase<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Event.eventPhase</code>çš„è¿”å›å€¼æœ‰å››ç§å¯èƒ½ã€‚</p> <ul><li>0ï¼Œäº‹ä»¶ç›®å‰<strong>æ²¡æœ‰å‘ç”Ÿ</strong>ã€‚</li> <li>1ï¼Œäº‹ä»¶ç›®å‰å¤„äº<strong>æ•è·é˜¶æ®µ</strong>ï¼Œå³å¤„äºä»ç¥–å…ˆèŠ‚ç‚¹å‘ç›®æ ‡èŠ‚ç‚¹çš„ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚</li> <li>2ï¼Œäº‹ä»¶<strong>åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹</strong>ï¼Œå³<code>Event.target</code>å±æ€§æŒ‡å‘çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚</li> <li>3ï¼Œäº‹ä»¶å¤„äº<strong>å†’æ³¡é˜¶æ®µ</strong>ï¼Œå³å¤„äºä»ç›®æ ‡èŠ‚ç‚¹å‘ç¥–å…ˆèŠ‚ç‚¹çš„åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ã€‚</li></ul> <h4 id="_2-2-event-cancelable-æ˜¯å¦å¯å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼Œevent-cancelbubbleæ˜¯å¦é˜»æ­¢å†’æ³¡ï¼Œevent-defaultprevented-æ˜¯å¦è°ƒç”¨è¿‡å–æ¶ˆé»˜è®¤è¡Œä¸ºæ–¹æ³•"><a href="#_2-2-event-cancelable-æ˜¯å¦å¯å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼Œevent-cancelbubbleæ˜¯å¦é˜»æ­¢å†’æ³¡ï¼Œevent-defaultprevented-æ˜¯å¦è°ƒç”¨è¿‡å–æ¶ˆé»˜è®¤è¡Œä¸ºæ–¹æ³•" class="header-anchor">#</a> 2.2 Event.cancelable æ˜¯å¦å¯å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼ŒEvent.cancelBubbleæ˜¯å¦é˜»æ­¢å†’æ³¡ï¼Œevent.defaultPrevented æ˜¯å¦è°ƒç”¨è¿‡å–æ¶ˆé»˜è®¤è¡Œä¸ºæ–¹æ³•</h4> <p><code>Event.cancelable</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦å¯ä»¥å–æ¶ˆ</strong>ã€‚è¯¥å±æ€§ä¸º<strong>åªè¯»</strong>å±æ€§ï¼Œä¸€èˆ¬ç”¨æ¥äº†è§£ Event å®ä¾‹çš„ç‰¹æ€§ã€‚</p> <p><strong>å¤§å¤šæ•°æµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶æ˜¯å¯ä»¥å–æ¶ˆçš„</strong>ã€‚æ¯”å¦‚ï¼Œå–æ¶ˆ<code>click</code>äº‹ä»¶ï¼Œç‚¹å‡»é“¾æ¥å°†æ— æ•ˆã€‚ä½†æ˜¯é™¤éæ˜¾å¼å£°æ˜ï¼Œ<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œ<strong>é»˜è®¤æ˜¯ä¸å¯ä»¥å–æ¶ˆçš„</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> evt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
evt<span class="token punctuation">.</span>cancelable  <span class="token comment">// false é»˜è®¤ä¸å¯å–æ¶ˆ</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å½“<code>Event.cancelable</code>å±æ€§ä¸º<code>true</code>æ—¶ï¼Œè°ƒç”¨<code>Event.preventDefault()</code>å°±å¯ä»¥å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œé˜»æ­¢æµè§ˆå™¨å¯¹è¯¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚</p> <p>å¦‚æœäº‹ä»¶ä¸èƒ½å–æ¶ˆï¼Œè°ƒç”¨<code>Event.preventDefault()</code>ä¼šæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œæœ€å¥½ç”¨<code>Event.cancelable</code>å±æ€§åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¯ä»¥å–æ¶ˆã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">preventEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>cancelable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">'This event couldn\'t be canceled.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>Event.cancelBubble</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœè®¾ä¸º<code>true</code>ï¼Œç›¸å½“äºæ‰§è¡Œ<code>Event.stopPropagation()</code>ï¼Œå¯ä»¥<strong>é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ã€‚</strong></p> <p><code>Event.defaultPrevented</code>å±æ€§è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶<strong>æ˜¯å¦è°ƒç”¨è¿‡<code>Event.preventDefault</code>æ–¹æ³•ã€‚è¯¥å±æ€§åªè¯»ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>defaultPrevented<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¯¥äº‹ä»¶å·²ç»å–æ¶ˆäº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-3-event-currenttargetå½“å‰æ­£åœ¨é€šè¿‡çš„èŠ‚ç‚¹ï¼Œevent-targetç›®æ ‡èŠ‚ç‚¹"><a href="#_2-3-event-currenttargetå½“å‰æ­£åœ¨é€šè¿‡çš„èŠ‚ç‚¹ï¼Œevent-targetç›®æ ‡èŠ‚ç‚¹" class="header-anchor">#</a> 2.3 Event.currentTargetå½“å‰æ­£åœ¨é€šè¿‡çš„èŠ‚ç‚¹ï¼ŒEvent.targetç›®æ ‡èŠ‚ç‚¹</h4> <p>äº‹ä»¶å‘ç”Ÿä»¥åï¼Œä¼šç»è¿‡æ•è·å’Œå†’æ³¡ä¸¤ä¸ªé˜¶æ®µï¼Œä¾æ¬¡é€šè¿‡å¤šä¸ª DOM èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œä»»æ„æ—¶ç‚¹éƒ½æœ‰ä¸¤ä¸ªä¸äº‹ä»¶ç›¸å…³çš„èŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶çš„<strong>åŸå§‹è§¦å‘èŠ‚ç‚¹</strong>ï¼ˆ<code>Event.target</code>ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯äº‹ä»¶<strong>å½“å‰æ­£åœ¨é€šè¿‡çš„èŠ‚ç‚¹</strong>ï¼ˆ<code>Event.currentTarget</code>ï¼‰ã€‚<strong>å‰è€…é€šå¸¸æ˜¯åè€…çš„åä»£èŠ‚ç‚¹</strong>ã€‚</p> <p><code>Event.currentTarget</code>å±æ€§è¿”å›äº‹ä»¶<strong>å½“å‰æ‰€åœ¨çš„èŠ‚ç‚¹</strong>ï¼Œå³äº‹ä»¶å½“å‰æ­£åœ¨é€šè¿‡çš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„ç›‘å¬å‡½æ•°æ‰€åœ¨çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚<strong>éšç€äº‹ä»¶çš„ä¼ æ’­ï¼Œè¿™ä¸ªå±æ€§çš„å€¼ä¼šå˜</strong>ã€‚</p> <p><code>Event.target</code>å±æ€§è¿”å›<strong>åŸå§‹è§¦å‘äº‹ä»¶çš„é‚£ä¸ªèŠ‚ç‚¹</strong>ï¼Œå³äº‹ä»¶æœ€åˆå‘ç”Ÿçš„èŠ‚ç‚¹ã€‚è¿™ä¸ªå±æ€§ä¸ä¼šéšç€äº‹ä»¶çš„ä¼ æ’­è€Œæ”¹å˜ã€‚</p> <p>äº‹ä»¶ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œä¸åŒèŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>Event.target</code>ä¸<code>Event.currentTarget</code>å±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;p id=&quot;para&quot;&gt;Hello &lt;em&gt;World&lt;/em&gt;&lt;/p&gt;</span>
<span class="token keyword">function</span> <span class="token function">hide</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸ç®¡ç‚¹å‡» Hello æˆ– Worldï¼Œæ€»æ˜¯è¿”å› true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ç‚¹å‡» Helloï¼Œè¿”å› true</span>
  <span class="token comment">// ç‚¹å‡» Worldï¼Œè¿”å› false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'para'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> hide<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;em&gt;</code>æ˜¯<code>&lt;p&gt;</code>çš„å­èŠ‚ç‚¹ï¼Œç‚¹å‡»<code>&lt;em&gt;</code>æˆ–è€…ç‚¹å‡»<code>&lt;p&gt;</code>ï¼Œéƒ½ä¼šå¯¼è‡´ç›‘å¬å‡½æ•°æ‰§è¡Œã€‚è¿™æ—¶ï¼Œ<code>e.target</code>æ€»æ˜¯æŒ‡å‘åŸå§‹ç‚¹å‡»ä½ç½®çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œè€Œ<code>e.currentTarget</code>æŒ‡å‘äº‹ä»¶ä¼ æ’­è¿‡ç¨‹ä¸­æ­£åœ¨ç»è¿‡çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚ç”±äºç›‘å¬å‡½æ•°åªæœ‰äº‹ä»¶ç»è¿‡æ—¶æ‰ä¼šè§¦å‘ï¼Œæ‰€ä»¥<code>e.currentTarget</code>æ€»æ˜¯ç­‰åŒäºç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>ã€‚</p> <h4 id="_2-4-event-type-äº‹ä»¶ç±»å‹ï¼ˆå¦‚ï¼š-click-ï¼‰"><a href="#_2-4-event-type-äº‹ä»¶ç±»å‹ï¼ˆå¦‚ï¼š-click-ï¼‰" class="header-anchor">#</a> 2.4 Event.type äº‹ä»¶ç±»å‹ï¼ˆå¦‚ï¼š'click'ï¼‰</h4> <p><code>Event.type</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹</strong>ã€‚äº‹ä»¶çš„ç±»å‹æ˜¯åœ¨ç”Ÿæˆäº‹ä»¶çš„æ—¶å€™æŒ‡å®šçš„ã€‚è¯¥å±æ€§åªè¯»ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> evt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
evt<span class="token punctuation">.</span>type <span class="token comment">// &quot;foo&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-5-event-timestamp-ç›¸å¯¹äºæ‰“å¼€ç½‘é¡µåçš„æ¯«ç§’æ—¶é—´æˆ³"><a href="#_2-5-event-timestamp-ç›¸å¯¹äºæ‰“å¼€ç½‘é¡µåçš„æ¯«ç§’æ—¶é—´æˆ³" class="header-anchor">#</a> 2.5 Event.timeStamp ç›¸å¯¹äºæ‰“å¼€ç½‘é¡µåçš„æ¯«ç§’æ—¶é—´æˆ³</h4> <p><code>Event.timeStamp</code>å±æ€§è¿”å›ä¸€ä¸ªæ¯«ç§’æ—¶é—´æˆ³ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´ã€‚å®ƒæ˜¯ç›¸å¯¹äºç½‘é¡µåŠ è½½æˆåŠŸå¼€å§‹è®¡ç®—çš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> evt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
evt<span class="token punctuation">.</span>timeStamp <span class="token comment">// 3683.6999999995896</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å®ƒçš„è¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•´æ•°ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å°æ•°ï¼ˆé«˜ç²¾åº¦æ—¶é—´æˆ³ï¼‰ï¼Œå–å†³äºæµè§ˆå™¨çš„è®¾ç½®ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ª<strong>è®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦çš„ä¾‹å­</strong>ï¼Œæ˜¾ç¤ºæ¯ç§’ç§»åŠ¨çš„åƒç´ æ•°é‡ã€‚</p> <h6 id="ä¾‹å­ï¼šè®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦"><a href="#ä¾‹å­ï¼šè®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦" class="header-anchor">#</a> ä¾‹å­ï¼šè®¡ç®—é¼ æ ‡ç§»åŠ¨é€Ÿåº¦</h6> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> previousX<span class="token punctuation">;</span>
<span class="token keyword">var</span> previousY<span class="token punctuation">;</span>
<span class="token keyword">var</span> previousT<span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    previousX <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
    previousY <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span>
    previousT <span class="token operator">!==</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> deltaX <span class="token operator">=</span> event<span class="token punctuation">.</span>screenX <span class="token operator">-</span> previousX<span class="token punctuation">;</span>
    <span class="token keyword">var</span> deltaY <span class="token operator">=</span> event<span class="token punctuation">.</span>screenY <span class="token operator">-</span> previousY<span class="token punctuation">;</span>
    <span class="token keyword">var</span> deltaD <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>deltaX<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>deltaY<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> deltaT <span class="token operator">=</span> event<span class="token punctuation">.</span>timeStamp <span class="token operator">-</span> previousT<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deltaD <span class="token operator">/</span> deltaT <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  previousX <span class="token operator">=</span> event<span class="token punctuation">.</span>screenX<span class="token punctuation">;</span>
  previousY <span class="token operator">=</span> event<span class="token punctuation">.</span>screenY<span class="token punctuation">;</span>
  previousT <span class="token operator">=</span> event<span class="token punctuation">.</span>timeStamp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="_2-6-event-istrusted-æ˜¯å¦ç”±çœŸå®ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„äº‹ä»¶"><a href="#_2-6-event-istrusted-æ˜¯å¦ç”±çœŸå®ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„äº‹ä»¶" class="header-anchor">#</a> 2.6 Event.isTrusted æ˜¯å¦ç”±çœŸå®ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿçš„äº‹ä»¶</h4> <p><code>Event.isTrusted</code>å±æ€§è¿”å›ä¸€ä¸ª<strong>å¸ƒå°”å€¼</strong>ï¼Œè¡¨ç¤º<strong>è¯¥äº‹ä»¶æ˜¯å¦ç”±çœŸå®çš„ç”¨æˆ·è¡Œä¸ºäº§ç”Ÿ</strong>ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥ä¼šäº§ç”Ÿä¸€ä¸ª<code>click</code>äº‹ä»¶ï¼Œè¯¥äº‹ä»¶æ˜¯ç”¨æˆ·äº§ç”Ÿçš„ï¼›<code>Event</code>æ„é€ å‡½æ•°ç”Ÿæˆçš„äº‹ä»¶ï¼Œåˆ™æ˜¯è„šæœ¬äº§ç”Ÿçš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> evt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
evt<span class="token punctuation">.</span>isTrusted <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>evt</code>å¯¹è±¡æ˜¯è„šæœ¬äº§ç”Ÿçš„ï¼Œæ‰€ä»¥<code>isTrusted</code>å±æ€§è¿”å›<code>false</code>ã€‚</p> <h4 id="_2-7-event-detail-äº‹ä»¶çš„ç»†èŠ‚ï¼ˆå•å‡»oråŒå‡»ç­‰ï¼‰"><a href="#_2-7-event-detail-äº‹ä»¶çš„ç»†èŠ‚ï¼ˆå•å‡»oråŒå‡»ç­‰ï¼‰" class="header-anchor">#</a> 2.7 Event.detail äº‹ä»¶çš„ç»†èŠ‚ï¼ˆå•å‡»oråŒå‡»ç­‰ï¼‰</h4> <p><code>Event.detail</code>å±æ€§åªæœ‰æµè§ˆå™¨çš„ UI ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰äº‹ä»¶æ‰å…·æœ‰ã€‚è¯¥å±æ€§è¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶çš„æŸç§ä¿¡æ¯ã€‚å…·ä½“å«ä¹‰ä¸äº‹ä»¶ç±»å‹ç›¸å…³ã€‚æ¯”å¦‚ï¼Œå¯¹äº<code>click</code>å’Œ<code>dblclick</code>äº‹ä»¶ï¼Œ<code>Event.detail</code>æ˜¯é¼ æ ‡æŒ‰ä¸‹çš„æ¬¡æ•°ï¼ˆ<code>1</code>è¡¨ç¤ºå•å‡»ï¼Œ<code>2</code>è¡¨ç¤ºåŒå‡»ï¼Œ<code>3</code>è¡¨ç¤ºä¸‰å‡»ï¼‰ï¼›å¯¹äºé¼ æ ‡æ»šè½®äº‹ä»¶ï¼Œ<code>Event.detail</code>æ˜¯æ»šè½®æ­£å‘æ»šåŠ¨çš„è·ç¦»ï¼Œè´Ÿå€¼å°±æ˜¯è´Ÿå‘æ»šåŠ¨çš„è·ç¦»ï¼Œè¿”å›å€¼æ€»æ˜¯3çš„å€æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;p&gt;Hello&lt;/p&gt;</span>
<span class="token keyword">function</span> <span class="token function">giveDetails</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¿«é€Ÿç‚¹å‡»çš„æ¬¡æ•°</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> giveDetails<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3ã€å®ä¾‹æ–¹æ³•"><a href="#_3ã€å®ä¾‹æ–¹æ³•" class="header-anchor">#</a> 3ã€å®ä¾‹æ–¹æ³•</h3> <h4 id="_3-1-event-preventdefault-å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸º"><a href="#_3-1-event-preventdefault-å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸º" class="header-anchor">#</a> 3.1 Event.preventDefault()  å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</h4> <p><code>Event.preventDefault</code>æ–¹æ³•<strong>å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</strong>ã€‚æ¯”å¦‚ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨é»˜è®¤ä¼šè·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åï¼Œå°±ä¸ä¼šè·³è½¬äº†ï¼›å†æ¯”å¦‚ï¼ŒæŒ‰ä¸€ä¸‹ç©ºæ ¼é”®ï¼Œé¡µé¢å‘ä¸‹æ»šåŠ¨ä¸€æ®µè·ç¦»ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä»¥åä¹Ÿä¸ä¼šæ»šåŠ¨äº†ã€‚è¯¥æ–¹æ³•ç”Ÿæ•ˆçš„å‰ææ˜¯ï¼Œäº‹ä»¶å¯¹è±¡çš„<code>cancelable</code>å±æ€§ä¸º<code>true</code>ï¼Œå¦‚æœä¸º<code>false</code>ï¼Œè°ƒç”¨è¯¥æ–¹æ³•æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</p> <p><strong>æ³¨æ„ï¼Œè¯¥æ–¹æ³•åªæ˜¯å–æ¶ˆäº‹ä»¶å¯¹å½“å‰å…ƒç´ çš„é»˜è®¤å½±å“ï¼Œä¸ä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­</strong>ã€‚å¦‚æœè¦é˜»æ­¢ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨<code>stopPropagation()</code>æˆ–<code>stopImmediatePropagation()</code>æ–¹æ³•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;input type=&quot;checkbox&quot; id=&quot;my-checkbox&quot; /&gt;</span>
<span class="token keyword">var</span> cb <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-checkbox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

cb<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºæ˜¯å•å‡»ä¼šé€‰ä¸­å•é€‰æ¡†ï¼Œå–æ¶ˆè¿™ä¸ªè¡Œä¸ºï¼Œå°±å¯¼è‡´æ— æ³•é€‰ä¸­å•é€‰æ¡†ã€‚</p> <p>åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¸ºæ–‡æœ¬è¾“å…¥æ¡†è®¾ç½®æ ¡éªŒæ¡ä»¶ã€‚å¦‚æœç”¨æˆ·çš„è¾“å…¥ä¸ç¬¦åˆæ¡ä»¶ï¼Œå°±æ— æ³•å°†å­—ç¬¦è¾“å…¥æ–‡æœ¬æ¡†ã€‚</p> <h6 id="ä¾‹å­ï¼šåªèƒ½è¾“å…¥å­—æ¯çš„è¾“å…¥æ¡†"><a href="#ä¾‹å­ï¼šåªèƒ½è¾“å…¥å­—æ¯çš„è¾“å…¥æ¡†" class="header-anchor">#</a> ä¾‹å­ï¼šåªèƒ½è¾“å…¥å­—æ¯çš„è¾“å…¥æ¡†</h6> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;input type=&quot;text&quot; id=&quot;my-input&quot; /&gt;</span>
<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'my-input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keypress'</span><span class="token punctuation">,</span> checkName<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">checkName</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>charCode <span class="token operator">&lt;</span> <span class="token number">97</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>charCode <span class="token operator">&gt;</span> <span class="token number">122</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸ºæ–‡æœ¬æ¡†çš„<code>keypress</code>äº‹ä»¶è®¾å®šç›‘å¬å‡½æ•°åï¼Œå°†åªèƒ½è¾“å…¥å°å†™å­—æ¯ï¼Œå¦åˆ™è¾“å…¥äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå†™å…¥æ–‡æœ¬æ¡†ï¼‰å°†è¢«å–æ¶ˆï¼Œå¯¼è‡´ä¸èƒ½å‘æ–‡æœ¬æ¡†è¾“å…¥å†…å®¹ã€‚</p> <h4 id="_3-2-event-stoppropagation-é˜»æ­¢äº‹ä»¶ä¼ æ’­"><a href="#_3-2-event-stoppropagation-é˜»æ­¢äº‹ä»¶ä¼ æ’­" class="header-anchor">#</a> 3.2 Event.stopPropagation() é˜»æ­¢äº‹ä»¶ä¼ æ’­</h4> <p><code>stopPropagation</code>æ–¹æ³•é˜»æ­¢äº‹ä»¶åœ¨ DOM ä¸­ç»§ç»­ä¼ æ’­ï¼Œé˜²æ­¢å†è§¦å‘å®šä¹‰åœ¨åˆ«çš„èŠ‚ç‚¹ä¸Šçš„ç›‘å¬å‡½æ•°ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬åœ¨å½“å‰èŠ‚ç‚¹ä¸Šå…¶ä»–çš„äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stopEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é˜»æ­¢äº‹ä»¶å†’æ³¡</span>
<span class="token punctuation">}</span>

el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> stopEvent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶å°†ä¸ä¼šè¿›ä¸€æ­¥å†’æ³¡åˆ°<code>el</code>èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚</p> <h4 id="_3-3-event-stopimmediatepropagation-é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨"><a href="#_3-3-event-stopimmediatepropagation-é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨" class="header-anchor">#</a> 3.3 Event.stopImmediatePropagation() é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨</h4> <p><code>Event.stopImmediatePropagation</code>æ–¹æ³•é˜»æ­¢åŒä¸€ä¸ªäº‹ä»¶çš„å…¶ä»–ç›‘å¬å‡½æ•°è¢«è°ƒç”¨ï¼Œä¸ç®¡ç›‘å¬å‡½æ•°å®šä¹‰åœ¨å½“å‰èŠ‚ç‚¹è¿˜æ˜¯å…¶ä»–èŠ‚ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œæ¯”<code>Event.stopPropagation()</code>æ›´å½»åº•ã€‚</p> <p>å¦‚æœåŒä¸€ä¸ªèŠ‚ç‚¹å¯¹äºåŒä¸€ä¸ªäº‹ä»¶æŒ‡å®šäº†å¤šä¸ªç›‘å¬å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¼šæ ¹æ®æ·»åŠ çš„é¡ºåºä¾æ¬¡è°ƒç”¨ã€‚åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªç›‘å¬å‡½æ•°è°ƒç”¨äº†<code>Event.stopImmediatePropagation</code>æ–¹æ³•ï¼Œå…¶ä»–çš„ç›‘å¬å‡½æ•°å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">l1</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">stopImmediatePropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">l2</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ä¸ä¼šè¢«è°ƒç”¨</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> l1<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> l2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢ä»£ç åœ¨<code>el</code>èŠ‚ç‚¹ä¸Šï¼Œä¸º<code>click</code>äº‹ä»¶æ·»åŠ äº†ä¸¤ä¸ªç›‘å¬å‡½æ•°<code>l1</code>å’Œ<code>l2</code>ã€‚ç”±äº<code>l1</code>è°ƒç”¨äº†<code>event.stopImmediatePropagation</code>æ–¹æ³•ï¼Œæ‰€ä»¥<code>l2</code>ä¸ä¼šè¢«è°ƒç”¨ã€‚</p> <h4 id="_3-4-event-composedpath-æ•°ç»„ï¼Œç›®æ ‡å’Œå†’æ³¡çš„èŠ‚ç‚¹"><a href="#_3-4-event-composedpath-æ•°ç»„ï¼Œç›®æ ‡å’Œå†’æ³¡çš„èŠ‚ç‚¹" class="header-anchor">#</a> 3.4 Event.composedPath() æ•°ç»„ï¼Œç›®æ ‡å’Œå†’æ³¡çš„èŠ‚ç‚¹</h4> <p><code>Event.composedPath()</code>è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹å’Œä¾æ¬¡å†’æ³¡ç»è¿‡çš„æ‰€æœ‰ä¸Šå±‚èŠ‚ç‚¹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;div&gt;</span>
<span class="token comment">//   &lt;p&gt;Hello&lt;/p&gt;</span>
<span class="token comment">// &lt;/div&gt;</span>
<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">composedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [p, div, body, html, document, Window]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹æ˜¯<code>p</code>ï¼Œå‘ä¸Šä¾æ¬¡æ˜¯<code>div</code>ã€<code>body</code>ã€<code>html</code>ã€<code>document</code>ã€<code>Window</code>ã€‚</p> <h2 id="å››ã€é¼ æ ‡äº‹ä»¶"><a href="#å››ã€é¼ æ ‡äº‹ä»¶" class="header-anchor">#</a> å››ã€é¼ æ ‡äº‹ä»¶</h2> <h3 id="_1ã€é¼ æ ‡äº‹ä»¶çš„ç§ç±»"><a href="#_1ã€é¼ æ ‡äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 1ã€é¼ æ ‡äº‹ä»¶çš„ç§ç±»</h3> <p>é¼ æ ‡äº‹ä»¶æŒ‡ä¸é¼ æ ‡ç›¸å…³çš„äº‹ä»¶ï¼Œç»§æ‰¿äº†<code>MouseEvent</code>æ¥å£ã€‚å…·ä½“çš„äº‹ä»¶ä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›ã€‚</p> <ul><li><code>click</code>ï¼šæŒ‰ä¸‹é¼ æ ‡ï¼ˆé€šå¸¸æ˜¯æŒ‰ä¸‹ä¸»æŒ‰é’®ï¼‰æ—¶è§¦å‘ã€‚<strong>ã€å•å‡»ã€‘</strong></li> <li><code>dblclick</code>ï¼šåœ¨åŒä¸€ä¸ªå…ƒç´ ä¸ŠåŒå‡»é¼ æ ‡æ—¶è§¦å‘ã€‚<strong>ã€åŒå‡»ã€‘</strong></li> <li><code>mousedown</code>ï¼šæŒ‰ä¸‹é¼ æ ‡é”®æ—¶è§¦å‘ã€‚<strong>ã€æŒ‰ä¸‹ã€‘</strong></li> <li><code>mouseup</code>ï¼šé‡Šæ”¾æŒ‰ä¸‹çš„é¼ æ ‡é”®æ—¶è§¦å‘ã€‚<strong>ã€æŠ¬èµ·ã€‘</strong></li> <li><code>mousemove</code>ï¼šå½“é¼ æ ‡åœ¨ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨ç§»åŠ¨æ—¶è§¦å‘ã€‚å½“é¼ æ ‡æŒç»­ç§»åŠ¨æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šè¿ç»­è§¦å‘ã€‚ä¸ºäº†é¿å…æ€§èƒ½é—®é¢˜ï¼Œå»ºè®®å¯¹è¯¥äº‹ä»¶çš„ç›‘å¬å‡½æ•°åšä¸€äº›é™å®šï¼Œæ¯”å¦‚é™å®šä¸€æ®µæ—¶é—´å†…åªèƒ½è¿è¡Œä¸€æ¬¡ã€‚<strong>ã€ç»è¿‡ï¼ˆå¤šæ¬¡ï¼‰ã€‘</strong></li> <li><code>mouseenter</code>ï¼šé¼ æ ‡è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ï¼Œè¿›å…¥å­èŠ‚ç‚¹ä¸ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚<strong>ã€è¿›å…¥ï¼ˆå•æ¬¡ï¼‰ã€‘</strong></li> <li><code>mouseover</code>ï¼šé¼ æ ‡è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ï¼Œè¿›å…¥å­èŠ‚ç‚¹ä¼šå†ä¸€æ¬¡è§¦å‘è¿™ä¸ªäº‹ä»¶ï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚<strong>ã€è¿›å…¥+å­èŠ‚ç‚¹ã€‘</strong></li> <li><code>mouseleave</code>ï¼šé¼ æ ‡ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ï¼Œç¦»å¼€çˆ¶èŠ‚ç‚¹ä¸ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚<strong>ã€ç¦»å¼€ï¼ˆå•æ¬¡ï¼‰ã€‘</strong></li> <li><code>mouseout</code>ï¼šé¼ æ ‡ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ï¼Œç¦»å¼€çˆ¶èŠ‚ç‚¹ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚<strong>ã€ç¦»å¼€+å­èŠ‚ç‚¹ã€‘</strong></li> <li><code>contextmenu</code>ï¼šæŒ‰ä¸‹é¼ æ ‡å³é”®æ—¶ï¼ˆä¸Šä¸‹æ–‡èœå•å‡ºç°å‰ï¼‰è§¦å‘ï¼Œæˆ–è€…æŒ‰ä¸‹â€œä¸Šä¸‹æ–‡èœå•é”®â€æ—¶è§¦å‘ã€‚<strong>ã€å³é”®ã€‘</strong></li> <li><code>wheel</code>ï¼šæ»šåŠ¨é¼ æ ‡çš„æ»šè½®æ—¶è§¦å‘ï¼Œè¯¥äº‹ä»¶ç»§æ‰¿çš„æ˜¯<code>WheelEvent</code>æ¥å£ã€‚<strong>ã€æ»šè½®ã€‘</strong></li></ul> <p><code>click</code>äº‹ä»¶æŒ‡çš„æ˜¯ï¼Œç”¨æˆ·åœ¨åŒä¸€ä¸ªä½ç½®å…ˆå®Œæˆ<code>mousedown</code>åŠ¨ä½œï¼Œå†å®Œæˆ<code>mouseup</code>åŠ¨ä½œã€‚å› æ­¤ï¼Œè§¦å‘é¡ºåºæ˜¯ï¼Œ<code>mousedown</code>é¦–å…ˆè§¦å‘ï¼Œ<code>mouseup</code>æ¥ç€è§¦å‘ï¼Œ<code>click</code>æœ€åè§¦å‘ã€‚</p> <p><code>dblclick</code>äº‹ä»¶åˆ™ä¼šåœ¨<code>mousedown</code>ã€<code>mouseup</code>ã€<code>click</code>ä¹‹åè§¦å‘ã€‚</p> <p><code>mouseover</code>äº‹ä»¶å’Œ<code>mouseenter</code>äº‹ä»¶ï¼Œéƒ½æ˜¯é¼ æ ‡è¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œ<code>mouseenter</code>äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼Œè€Œåªè¦é¼ æ ‡åœ¨èŠ‚ç‚¹å†…éƒ¨ç§»åŠ¨ï¼Œ<code>mouseover</code>äº‹ä»¶ä¼šåœ¨å­èŠ‚ç‚¹ä¸Šè§¦å‘å¤šæ¬¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
 &lt;ul&gt;
   &lt;li&gt;item 1&lt;/li&gt;
   &lt;li&gt;item 2&lt;/li&gt;
  &lt;li&gt;item 3&lt;/li&gt;
 &lt;/ul&gt;
*/</span>

<span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿›å…¥ ul èŠ‚ç‚¹ä»¥åï¼Œmouseenter äº‹ä»¶åªä¼šè§¦å‘ä¸€æ¬¡</span>
<span class="token comment">// ä»¥ååªè¦é¼ æ ‡åœ¨èŠ‚ç‚¹å†…ç§»åŠ¨ï¼Œéƒ½ä¸ä¼šå†è§¦å‘è¿™ä¸ªäº‹ä»¶</span>
<span class="token comment">// event.target æ˜¯ ul èŠ‚ç‚¹</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'purple'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿›å…¥ ul èŠ‚ç‚¹ä»¥åï¼Œåªè¦åœ¨å­èŠ‚ç‚¹ä¸Šç§»åŠ¨ï¼Œmouseover äº‹ä»¶ä¼šè§¦å‘å¤šæ¬¡</span>
<span class="token comment">// event.target æ˜¯ li èŠ‚ç‚¹</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨çˆ¶èŠ‚ç‚¹å†…éƒ¨è¿›å…¥å­èŠ‚ç‚¹ï¼Œä¸ä¼šè§¦å‘<code>mouseenter</code>äº‹ä»¶ï¼Œä½†æ˜¯ä¼šè§¦å‘<code>mouseover</code>äº‹ä»¶ã€‚</p> <p><code>mouseout</code>äº‹ä»¶å’Œ<code>mouseleave</code>äº‹ä»¶ï¼Œéƒ½æ˜¯é¼ æ ‡ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹æ—¶è§¦å‘ã€‚ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼Œåœ¨çˆ¶å…ƒç´ å†…éƒ¨ç¦»å¼€ä¸€ä¸ªå­å…ƒç´ æ—¶ï¼Œ<code>mouseleave</code>äº‹ä»¶ä¸ä¼šè§¦å‘ï¼Œè€Œ<code>mouseout</code>äº‹ä»¶ä¼šè§¦å‘ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
 &lt;ul&gt;
   &lt;li&gt;item 1&lt;/li&gt;
   &lt;li&gt;item 2&lt;/li&gt;
  &lt;li&gt;item 3&lt;/li&gt;
 &lt;/ul&gt;
*/</span>

<span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å…ˆè¿›å…¥ ul èŠ‚ç‚¹ï¼Œç„¶ååœ¨èŠ‚ç‚¹å†…éƒ¨ç§»åŠ¨ï¼Œä¸ä¼šè§¦å‘ mouseleave äº‹ä»¶</span>
<span class="token comment">// åªæœ‰ç¦»å¼€ ul èŠ‚ç‚¹æ—¶ï¼Œè§¦å‘ä¸€æ¬¡ mouseleave</span>
<span class="token comment">// event.target æ˜¯ ul èŠ‚ç‚¹</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'purple'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å…ˆè¿›å…¥ ul èŠ‚ç‚¹ï¼Œç„¶ååœ¨èŠ‚ç‚¹å†…éƒ¨ç§»åŠ¨ï¼Œmouseout äº‹ä»¶ä¼šè§¦å‘å¤šæ¬¡</span>
<span class="token comment">// event.target æ˜¯ li èŠ‚ç‚¹</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'orange'</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨çˆ¶èŠ‚ç‚¹å†…éƒ¨ç¦»å¼€å­èŠ‚ç‚¹ï¼Œä¸ä¼šè§¦å‘<code>mouseleave</code>äº‹ä»¶ï¼Œä½†æ˜¯ä¼šè§¦å‘<code>mouseout</code>äº‹ä»¶ã€‚</p> <h3 id="_2ã€mouseevent-æ¥å£æ¦‚è¿°"><a href="#_2ã€mouseevent-æ¥å£æ¦‚è¿°" class="header-anchor">#</a> 2ã€MouseEvent æ¥å£æ¦‚è¿°</h3> <p><code>MouseEvent</code>æ¥å£ä»£è¡¨<strong>æ‰€æœ‰é¼ æ ‡äº‹ä»¶æ‰€äº§ç”Ÿçš„å¯¹è±¡éƒ½æ˜¯<code>MouseEvent</code>å®ä¾‹</strong>ã€‚æ­¤å¤–ï¼Œ<strong>æ»šè½®äº‹ä»¶å’Œæ‹–æ‹‰äº‹ä»¶ä¹Ÿæ˜¯<code>MouseEvent</code>å®ä¾‹ã€‚</strong></p> <p><code>MouseEvent</code>æ¥å£<strong>ç»§æ‰¿äº†<code>Event</code>æ¥å£</strong>ï¼Œæ‰€ä»¥æ‹¥æœ‰<code>Event</code>çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚å®ƒè¿˜æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚</p> <p>æµè§ˆå™¨<strong>åŸç”Ÿæä¾›ä¸€ä¸ª<code>MouseEvent</code>æ„é€ å‡½æ•°</strong>ï¼Œç”¨äºæ–°å»ºä¸€ä¸ª<code>MouseEvent</code>å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MouseEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å‚æ•°ä¸€ï¼Œäº‹ä»¶åç§°å­—ç¬¦ä¸²ï¼›å‚æ•°äºŒï¼Œäº‹ä»¶é…ç½®å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>MouseEvent</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>äº‹ä»¶åç§°</strong>ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<strong>äº‹ä»¶é…ç½®å¯¹è±¡</strong>ï¼Œè¯¥å‚æ•°å¯é€‰ã€‚é™¤äº†<code>Event</code>æ¥å£çš„å®ä¾‹é…ç½®å±æ€§ï¼Œè¯¥å¯¹è±¡å¯ä»¥é…ç½®ä»¥ä¸‹å±æ€§ï¼Œæ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ã€‚</p> <ul><li><code>screenX</code>ï¼šæ•°å€¼ï¼Œé¼ æ ‡ç›¸å¯¹äº<strong>å±å¹•</strong>çš„æ°´å¹³ä½ç½®ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè®¾ç½®è¯¥å±æ€§ä¸ä¼šç§»åŠ¨é¼ æ ‡ã€‚</li> <li><code>screenY</code>ï¼šæ•°å€¼ï¼Œé¼ æ ‡ç›¸å¯¹äº<strong>å±å¹•</strong>çš„å‚ç›´ä½ç½®ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œå…¶ä»–ä¸<code>screenX</code>ç›¸åŒã€‚</li> <li><code>clientX</code>ï¼šæ•°å€¼ï¼Œé¼ æ ‡ç›¸å¯¹äº<strong>ç¨‹åºçª—å£</strong>çš„æ°´å¹³ä½ç½®ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œé»˜è®¤å€¼ä¸º0ï¼Œè®¾ç½®è¯¥å±æ€§ä¸ä¼šç§»åŠ¨é¼ æ ‡ã€‚</li> <li><code>clientY</code>ï¼šæ•°å€¼ï¼Œé¼ æ ‡ç›¸å¯¹äº<strong>ç¨‹åºçª—å£</strong>çš„å‚ç›´ä½ç½®ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œå…¶ä»–ä¸<code>clientX</code>ç›¸åŒã€‚</li> <li><code>ctrlKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦åŒæ—¶æŒ‰ä¸‹äº† Ctrl é”®ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>shiftKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦åŒæ—¶æŒ‰ä¸‹äº† Shift é”®ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>altKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦åŒæ—¶æŒ‰ä¸‹ Alt é”®ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>metaKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦åŒæ—¶æŒ‰ä¸‹ Meta é”®ï¼ˆwiné”®ï¼‰ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>button</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæŒ‰ä¸‹äº†å“ªä¸€ä¸ªé¼ æ ‡æŒ‰é”®ï¼Œé»˜è®¤å€¼ä¸º<code>0</code>ï¼Œè¡¨ç¤ºæŒ‰ä¸‹ä¸»é”®ï¼ˆé€šå¸¸æ˜¯é¼ æ ‡çš„å·¦é”®ï¼‰æˆ–è€…å½“å‰äº‹ä»¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªå±æ€§ï¼›<code>1</code>è¡¨ç¤ºæŒ‰ä¸‹è¾…åŠ©é”®ï¼ˆé€šå¸¸æ˜¯é¼ æ ‡çš„ä¸­é—´é”®ï¼‰ï¼Œ<code>2</code>è¡¨ç¤ºæŒ‰ä¸‹æ¬¡è¦é”®ï¼ˆé€šå¸¸æ˜¯é¼ æ ‡çš„å³é”®ï¼‰ã€‚</li> <li><code>buttons</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæŒ‰ä¸‹äº†é¼ æ ‡çš„å“ªäº›é”®ï¼Œæ˜¯ä¸€ä¸ªä¸‰ä¸ªæ¯”ç‰¹ä½çš„äºŒè¿›åˆ¶å€¼ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼ˆæ²¡æœ‰æŒ‰ä¸‹ä»»ä½•é”®ï¼‰ã€‚<code>1</code>ï¼ˆäºŒè¿›åˆ¶<code>001</code>ï¼‰è¡¨ç¤ºæŒ‰ä¸‹ä¸»é”®ï¼ˆé€šå¸¸æ˜¯å·¦é”®ï¼‰ï¼Œ<code>2</code>ï¼ˆäºŒè¿›åˆ¶<code>010</code>ï¼‰è¡¨ç¤ºæŒ‰ä¸‹æ¬¡è¦é”®ï¼ˆé€šå¸¸æ˜¯å³é”®ï¼‰ï¼Œ<code>4</code>ï¼ˆäºŒè¿›åˆ¶<code>100</code>ï¼‰è¡¨ç¤ºæŒ‰ä¸‹è¾…åŠ©é”®ï¼ˆé€šå¸¸æ˜¯ä¸­é—´é”®ï¼‰ã€‚å› æ­¤ï¼Œå¦‚æœè¿”å›<code>3</code>ï¼ˆäºŒè¿›åˆ¶<code>011</code>ï¼‰å°±è¡¨ç¤ºåŒæ—¶æŒ‰ä¸‹äº†å·¦é”®å’Œå³é”®ã€‚</li> <li><code>relatedTarget</code>ï¼šèŠ‚ç‚¹å¯¹è±¡ï¼Œè¡¨ç¤ºäº‹ä»¶çš„ç›¸å…³èŠ‚ç‚¹ï¼Œé»˜è®¤ä¸º<code>null</code>ã€‚<code>mouseenter</code>å’Œ<code>mouseover</code>äº‹ä»¶æ—¶ï¼Œè¡¨ç¤ºé¼ æ ‡åˆšåˆšç¦»å¼€çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼›<code>mouseout</code>å’Œ<code>mouseleave</code>äº‹ä»¶æ—¶ï¼Œè¡¨ç¤ºé¼ æ ‡æ­£åœ¨è¿›å…¥çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MouseEvent</span><span class="token punctuation">(</span><span class="token string">'click2'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'bubbles'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">'cancelable'</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> cb <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'checkbox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cb<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click2'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ç»‘å®šäº‹ä»¶ç›‘å¬å‡½æ•°</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span> <span class="token comment">// è¢«æ‰§è¡Œ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
cb<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è§¦å‘äº‹ä»¶</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªé¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶è§¦å‘è¯¥äº‹ä»¶ã€‚</p> <h3 id="_3ã€mouseevent-æ¥å£çš„å®ä¾‹å±æ€§"><a href="#_3ã€mouseevent-æ¥å£çš„å®ä¾‹å±æ€§" class="header-anchor">#</a> 3ã€MouseEvent æ¥å£çš„å®ä¾‹å±æ€§</h3> <h4 id="_3-1-mouseevent-altkeyï¼Œmouseevent-ctrlkeyï¼Œmouseevent-metakeyï¼Œmouseevent-shiftkey"><a href="#_3-1-mouseevent-altkeyï¼Œmouseevent-ctrlkeyï¼Œmouseevent-metakeyï¼Œmouseevent-shiftkey" class="header-anchor">#</a> 3.1 MouseEvent.altKeyï¼ŒMouseEvent.ctrlKeyï¼ŒMouseEvent.metaKeyï¼ŒMouseEvent.shiftKey</h4> <p><code>MouseEvent.altKey</code>ã€<code>MouseEvent.ctrlKey</code>ã€<code>MouseEvent.metaKey</code>ã€<code>MouseEvent.shiftKey</code>è¿™å››ä¸ªå±æ€§éƒ½è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ˜¯å¦æŒ‰ä¸‹å¯¹åº”çš„é”®ã€‚å®ƒä»¬éƒ½æ˜¯<strong>åªè¯»</strong>å±æ€§ã€‚</p> <ul><li><code>altKey</code>å±æ€§ï¼šAlt é”®</li> <li><code>ctrlKey</code>å±æ€§ï¼šCtrl é”®</li> <li><code>metaKey</code>å±æ€§ï¼šMeta é”®ï¼ˆMac é”®ç›˜æ˜¯ä¸€ä¸ªå››ç“£çš„å°èŠ±ï¼ŒWindows é”®ç›˜æ˜¯ Windows é”®ï¼‰</li> <li><code>shiftKey</code>å±æ€§ï¼šShift é”®</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;body onclick=&quot;showKey(event)&quot;&gt;</span>
<span class="token keyword">function</span> <span class="token function">showKey</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ALT key pressed: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>altKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'CTRL key pressed: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'META key pressed: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'SHIFT key pressed: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç‚¹å‡»ç½‘é¡µä¼šè¾“å‡ºæ˜¯å¦åŒæ—¶æŒ‰ä¸‹å¯¹åº”çš„é”®ã€‚</p> <h4 id="_3-2-mouseevent-button-é¼ æ ‡çš„å“ªä¸ªé”®ï¼Œmouseevent-buttonsåŒæ—¶æŒ‰å“ªäº›é”®"><a href="#_3-2-mouseevent-button-é¼ æ ‡çš„å“ªä¸ªé”®ï¼Œmouseevent-buttonsåŒæ—¶æŒ‰å“ªäº›é”®" class="header-anchor">#</a> 3.2 MouseEvent.button é¼ æ ‡çš„å“ªä¸ªé”®ï¼ŒMouseEvent.buttonsåŒæ—¶æŒ‰å“ªäº›é”®</h4> <p><code>MouseEvent.button</code>å±æ€§è¿”å›<strong>ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿæ—¶æŒ‰ä¸‹äº†é¼ æ ‡çš„å“ªä¸ªé”®</strong>ã€‚è¯¥å±æ€§<strong>åªè¯»</strong>ã€‚</p> <ul><li>0ï¼šæŒ‰ä¸‹ä¸»é”®ï¼ˆé€šå¸¸æ˜¯å·¦é”®ï¼‰ï¼Œæˆ–è€…è¯¥äº‹ä»¶æ²¡æœ‰åˆå§‹åŒ–è¿™ä¸ªå±æ€§ï¼ˆæ¯”å¦‚<code>mousemove</code>äº‹ä»¶ï¼‰ã€‚</li> <li>1ï¼šæŒ‰ä¸‹è¾…åŠ©é”®ï¼ˆé€šå¸¸æ˜¯ä¸­é”®æˆ–è€…æ»šè½®é”®ï¼‰ã€‚</li> <li>2ï¼šæŒ‰ä¸‹æ¬¡é”®ï¼ˆé€šå¸¸æ˜¯å³é”®ï¼‰ã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;button onmouseup=&quot;whichButton(event)&quot;&gt;ç‚¹å‡»&lt;/button&gt;</span>
<span class="token keyword">var</span> <span class="token function-variable function">whichButton</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>button<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Left button clicked.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Middle button clicked.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Right button clicked.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Unexpected code: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>button<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>MouseEvent.buttons</code>å±æ€§è¿”å›ä¸€ä¸ª<strong>ä¸‰ä¸ªæ¯”ç‰¹ä½çš„å€¼</strong>ï¼Œè¡¨ç¤º<strong>åŒæ—¶æŒ‰ä¸‹äº†å“ªäº›é”®</strong>ã€‚å®ƒ<strong>ç”¨æ¥å¤„ç†åŒæ—¶æŒ‰ä¸‹å¤šä¸ªé¼ æ ‡é”®çš„æƒ…å†µ</strong>ã€‚è¯¥å±æ€§<strong>åªè¯»</strong>ã€‚</p> <ul><li>1ï¼šäºŒè¿›åˆ¶ä¸º<code>001</code>ï¼ˆåè¿›åˆ¶çš„1ï¼‰ï¼Œè¡¨ç¤ºæŒ‰ä¸‹å·¦é”®ã€‚</li> <li>2ï¼šäºŒè¿›åˆ¶ä¸º<code>010</code>ï¼ˆåè¿›åˆ¶çš„2ï¼‰ï¼Œè¡¨ç¤ºæŒ‰ä¸‹å³é”®ã€‚</li> <li>4ï¼šäºŒè¿›åˆ¶ä¸º<code>100</code>ï¼ˆåè¿›åˆ¶çš„4ï¼‰ï¼Œè¡¨ç¤ºæŒ‰ä¸‹ä¸­é”®æˆ–æ»šè½®é”®ã€‚</li></ul> <p>åŒæ—¶æŒ‰ä¸‹å¤šä¸ªé”®çš„æ—¶å€™ï¼Œæ¯ä¸ªæŒ‰ä¸‹çš„é”®å¯¹åº”çš„æ¯”ç‰¹ä½éƒ½ä¼šæœ‰å€¼ã€‚æ¯”å¦‚ï¼ŒåŒæ—¶æŒ‰ä¸‹å·¦é”®å’Œå³é”®ï¼Œä¼šè¿”å›3ï¼ˆäºŒè¿›åˆ¶ä¸º011ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// æ³¨æ„ï¼Œç”¨clickæ—¶ä¸€ç›´éƒ½æ˜¯0</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>buttons<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æœªæŒ‰ä¸‹ä»»ä½•é”®æ—¶æ˜¯ 0</span>
<span class="token comment">// æŒ‰ä¸‹å·¦é”® 1  ï¼ˆ001ï¼‰</span>
<span class="token comment">// æŒ‰ä¸‹å³é”® 2  ï¼ˆ010ï¼‰</span>
<span class="token comment">// æŒ‰ä¸‹ä¸­é”® 4  ï¼ˆ100ï¼‰</span>

<span class="token comment">// æŒ‰ä¸‹å·¦é”®å’Œå³é”® 3  ï¼ˆ011ï¼‰</span>
<span class="token comment">// æŒ‰ä¸‹å·¦é”®å’Œä¸­é”® 5  ï¼ˆ101ï¼‰</span>
<span class="token comment">// æŒ‰ä¸‹å³é”®å’Œä¸­é”® 6  ï¼ˆ110ï¼‰</span>
<span class="token comment">// æŒ‰ä¸‹å·¦ã€ä¸­ã€å³é”® 7  ï¼ˆ111ï¼‰</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3-3-mouseevent-clientx-ç›¸å¯¹æµè§ˆå™¨xåæ ‡ï¼Œmouseevent-clienty-ç›¸å¯¹æµè§ˆå™¨yåæ ‡"><a href="#_3-3-mouseevent-clientx-ç›¸å¯¹æµè§ˆå™¨xåæ ‡ï¼Œmouseevent-clienty-ç›¸å¯¹æµè§ˆå™¨yåæ ‡" class="header-anchor">#</a> 3.3 MouseEvent.clientX ç›¸å¯¹æµè§ˆå™¨Xåæ ‡ï¼ŒMouseEvent.clientY ç›¸å¯¹æµè§ˆå™¨Yåæ ‡</h4> <p><code>MouseEvent.clientX</code>å±æ€§è¿”å›é¼ æ ‡ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£å·¦ä¸Šè§’çš„æ°´å¹³åæ ‡ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œ<code>MouseEvent.clientY</code>å±æ€§è¿”å›å‚ç›´åæ ‡ã€‚è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯<strong>åªè¯»</strong>å±æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç ä¸º</span>
<span class="token comment">// &lt;body onmousedown=&quot;showCoords(event)&quot;&gt;</span>
<span class="token keyword">function</span> <span class="token function">showCoords</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">'clientX value: '</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'\n'</span> <span class="token operator">+</span>
    <span class="token string">'clientY value: '</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">'\n'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¿™ä¸¤ä¸ªå±æ€§è¿˜åˆ†åˆ«æœ‰ä¸€ä¸ª<strong>åˆ«å<code>MouseEvent.x</code>å’Œ<code>MouseEvent.y</code></strong>ã€‚</p> <h4 id="_3-4-mouseevent-movementx-ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„xè·ç¦»ï¼Œmouseevent-movementy-ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„yè·ç¦»"><a href="#_3-4-mouseevent-movementx-ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„xè·ç¦»ï¼Œmouseevent-movementy-ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„yè·ç¦»" class="header-anchor">#</a> 3.4 MouseEvent.movementX ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„Xè·ç¦»ï¼ŒMouseEvent.movementY ä¸Šä¸€ä¸ªé¼ æ ‡ç»è¿‡äº‹ä»¶çš„Yè·ç¦»</h4> <p><code>MouseEvent.movementX</code>å±æ€§è¿”å›å½“å‰ä½ç½®ä¸ä¸Šä¸€ä¸ª<code>mousemove</code>äº‹ä»¶ä¹‹é—´çš„æ°´å¹³è·ç¦»ï¼ˆå•ä½åƒç´ ï¼‰ã€‚æ•°å€¼ä¸Šï¼Œå®ƒç­‰äºä¸‹é¢çš„è®¡ç®—å…¬å¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>currentEvent<span class="token punctuation">.</span>movementX <span class="token operator">=</span> currentEvent<span class="token punctuation">.</span>screenX <span class="token operator">-</span> previousEvent<span class="token punctuation">.</span>screenX
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>MouseEvent.movementY</code>å±æ€§è¿”å›å½“å‰ä½ç½®ä¸ä¸Šä¸€ä¸ª<code>mousemove</code>äº‹ä»¶ä¹‹é—´çš„å‚ç›´è·ç¦»ï¼ˆå•ä½åƒç´ ï¼‰ã€‚æ•°å€¼ä¸Šï¼Œå®ƒç­‰äºä¸‹é¢çš„è®¡ç®—å…¬å¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>currentEvent<span class="token punctuation">.</span>movementY <span class="token operator">=</span> currentEvent<span class="token punctuation">.</span>screenY <span class="token operator">-</span> previousEvent<span class="token punctuation">.</span>screenYã€‚
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯<strong>åªè¯»</strong>å±æ€§ã€‚</p> <h4 id="_3-5-mouseevent-screenx-ç›¸å¯¹å±å¹•xåæ ‡ï¼Œmouseevent-screeny-ç›¸å¯¹å±å¹•yåæ ‡"><a href="#_3-5-mouseevent-screenx-ç›¸å¯¹å±å¹•xåæ ‡ï¼Œmouseevent-screeny-ç›¸å¯¹å±å¹•yåæ ‡" class="header-anchor">#</a> 3.5 MouseEvent.screenX ç›¸å¯¹å±å¹•Xåæ ‡ï¼ŒMouseEvent.screenY ç›¸å¯¹å±å¹•Yåæ ‡</h4> <p><code>MouseEvent.screenX</code>å±æ€§è¿”å›é¼ æ ‡ä½ç½®ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„æ°´å¹³åæ ‡ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œ<code>MouseEvent.screenY</code>å±æ€§è¿”å›å‚ç›´åæ ‡ã€‚è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯<strong>åªè¯»</strong>å±æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;body onmousedown=&quot;showCoords(event)&quot;&gt;</span>
<span class="token keyword">function</span> <span class="token function">showCoords</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">'screenX value: '</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>screenX <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">,</span>
    <span class="token string">'screenY value: '</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>screenY <span class="token operator">+</span> <span class="token string">'\n'</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-6-mouseevent-offsetx-åç§»é‡xï¼Œmouseevent-offsety-åç§»é‡y"><a href="#_3-6-mouseevent-offsetx-åç§»é‡xï¼Œmouseevent-offsety-åç§»é‡y" class="header-anchor">#</a> 3.6 MouseEvent.offsetX åç§»é‡Xï¼ŒMouseEvent.offsetY åç§»é‡Y</h4> <p><code>MouseEvent.offsetX</code>å±æ€§è¿”å›é¼ æ ‡ä½ç½®ä¸ç›®æ ‡èŠ‚ç‚¹å·¦ä¾§çš„<code>padding</code>è¾¹ç¼˜çš„æ°´å¹³è·ç¦»ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œ<code>MouseEvent.offsetY</code>å±æ€§è¿”å›ä¸ç›®æ ‡èŠ‚ç‚¹ä¸Šæ–¹çš„<code>padding</code>è¾¹ç¼˜çš„å‚ç›´è·ç¦»ã€‚è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯åªè¯»å±æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
  &lt;style&gt;
    p {
      width: 100px;
      height: 100px;
      padding: 100px;
    }
  &lt;/style&gt;
  &lt;p&gt;Hello&lt;/p&gt;
*/</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>offsetX<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒ…å«padding</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>offsetY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé¼ æ ‡å¦‚æœåœ¨<code>p</code>å…ƒç´ çš„ä¸­å¿ƒä½ç½®ç‚¹å‡»ï¼Œä¼šè¿”å›<code>150 150</code>ã€‚å› æ­¤ä¸­å¿ƒä½ç½®è·ç¦»å·¦ä¾§å’Œä¸Šæ–¹çš„<code>padding</code>è¾¹ç¼˜ï¼Œç­‰äº<code>padding</code>çš„å®½åº¦ï¼ˆ100åƒç´ ï¼‰åŠ ä¸Šå…ƒç´ å†…å®¹åŒºåŸŸä¸€åŠçš„å®½åº¦ï¼ˆ50åƒç´ ï¼‰ã€‚</p> <h4 id="_3-7-mouseevent-pagex-æ–‡æ¡£xåæ ‡ï¼Œmouseevent-pagey-æ–‡æ¡£yåæ ‡"><a href="#_3-7-mouseevent-pagex-æ–‡æ¡£xåæ ‡ï¼Œmouseevent-pagey-æ–‡æ¡£yåæ ‡" class="header-anchor">#</a> 3.7 MouseEvent.pageX æ–‡æ¡£Xåæ ‡ï¼ŒMouseEvent.pageY æ–‡æ¡£Yåæ ‡</h4> <p><code>MouseEvent.pageX</code>å±æ€§è¿”å›é¼ æ ‡ä½ç½®ä¸æ–‡æ¡£å·¦ä¾§è¾¹ç¼˜çš„è·ç¦»ï¼ˆå•ä½åƒç´ ï¼‰ï¼Œ<code>MouseEvent.pageY</code>å±æ€§è¿”å›ä¸æ–‡æ¡£ä¸Šä¾§è¾¹ç¼˜çš„è·ç¦»ï¼ˆå•ä½åƒç´ ï¼‰ã€‚å®ƒä»¬çš„<strong>è¿”å›å€¼éƒ½åŒ…æ‹¬æ–‡æ¡£ä¸å¯è§çš„éƒ¨åˆ†</strong>ã€‚è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯<strong>åªè¯»</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
  &lt;style&gt;
    body {
      height: 2000px;
    }
  &lt;/style&gt;
*/</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'click'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé¡µé¢é«˜åº¦ä¸º2000åƒç´ ï¼Œä¼šäº§ç”Ÿå‚ç›´æ»šåŠ¨æ¡ã€‚æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼Œç‚¹å‡»é¼ æ ‡è¾“å‡ºçš„<code>pageY</code>å€¼ä¼šæ¥è¿‘2000ã€‚</p> <h4 id="_3-8-mouseevent-relatedtarget-äº‹ä»¶çš„ç›¸å…³èŠ‚ç‚¹"><a href="#_3-8-mouseevent-relatedtarget-äº‹ä»¶çš„ç›¸å…³èŠ‚ç‚¹" class="header-anchor">#</a> 3.8 MouseEvent.relatedTarget äº‹ä»¶çš„ç›¸å…³èŠ‚ç‚¹</h4> <p><code>MouseEvent.relatedTarget</code>å±æ€§<strong>è¿”å›äº‹ä»¶çš„ç›¸å…³èŠ‚ç‚¹</strong>ã€‚å¯¹äºé‚£äº›æ²¡æœ‰ç›¸å…³èŠ‚ç‚¹çš„äº‹ä»¶ï¼Œè¯¥å±æ€§è¿”å›<code>null</code>ã€‚è¯¥å±æ€§<strong>åªè¯»</strong>ã€‚</p> <p>ä¸‹è¡¨åˆ—å‡ºä¸åŒäº‹ä»¶çš„<code>target</code>å±æ€§å€¼å’Œ<code>relatedTarget</code>å±æ€§å€¼ä¹‰ã€‚</p> <table><thead><tr><th style="text-align:left;">äº‹ä»¶åç§°</th> <th style="text-align:left;">target å±æ€§</th> <th style="text-align:left;">relatedTarget å±æ€§</th></tr></thead> <tbody><tr><td style="text-align:left;">focusin</td> <td style="text-align:left;">æ¥å—ç„¦ç‚¹çš„èŠ‚ç‚¹</td> <td style="text-align:left;">ä¸§å¤±ç„¦ç‚¹çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">focusout</td> <td style="text-align:left;">ä¸§å¤±ç„¦ç‚¹çš„èŠ‚ç‚¹</td> <td style="text-align:left;">æ¥å—ç„¦ç‚¹çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">mouseenter</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">mouseleave</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">mouseout</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">mouseover</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">dragenter</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td></tr> <tr><td style="text-align:left;">dragexit</td> <td style="text-align:left;">å°†è¦ç¦»å¼€çš„èŠ‚ç‚¹</td> <td style="text-align:left;">å°†è¦è¿›å…¥çš„èŠ‚ç‚¹</td></tr></tbody></table> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
  HTML ä»£ç å¦‚ä¸‹
  &lt;div id=&quot;outer&quot; style=&quot;height:50px;width:50px;border-width:1px solid black;&quot;&gt;
    &lt;div id=&quot;inner&quot; style=&quot;height:25px;width:25px;border:1px solid black;&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
*/</span>

<span class="token keyword">var</span> inner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'inner'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿›å…¥'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">' ç¦»å¼€'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¿›å…¥'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">' ç¦»å¼€'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¦»å¼€'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">' è¿›å…¥'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mouseleave&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¦»å¼€'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token string">' è¿›å…¥'</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>relatedTarget<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é¼ æ ‡ä» outer è¿›å…¥innerï¼Œè¾“å‡º</span>
<span class="token comment">// è¿›å…¥inner ç¦»å¼€outer</span>
<span class="token comment">// è¿›å…¥inner ç¦»å¼€outer</span>

<span class="token comment">// é¼ æ ‡ä» innerè¿›å…¥ outerï¼Œè¾“å‡º</span>
<span class="token comment">// ç¦»å¼€inner è¿›å…¥outer</span>
<span class="token comment">// ç¦»å¼€inner è¿›å…¥outer</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_4ã€mouseevent-æ¥å£çš„å®ä¾‹æ–¹æ³•"><a href="#_4ã€mouseevent-æ¥å£çš„å®ä¾‹æ–¹æ³•" class="header-anchor">#</a> 4ã€MouseEvent æ¥å£çš„å®ä¾‹æ–¹æ³•</h3> <h4 id="_4-1-mouseevent-getmodifierstate-æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®"><a href="#_4-1-mouseevent-getmodifierstate-æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®" class="header-anchor">#</a> 4.1 MouseEvent.getModifierState() æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®</h4> <p><code>MouseEvent.getModifierState</code>æ–¹æ³•<strong>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæœ‰æ²¡æœ‰æŒ‰ä¸‹ç‰¹å®šçš„åŠŸèƒ½é”®ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªè¡¨ç¤º<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState#Modifier_keys_on_Gecko" target="_blank" rel="noopener noreferrer">åŠŸèƒ½é”®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>çš„å­—ç¬¦ä¸²ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getModifierState</span><span class="token punctuation">(</span><span class="token string">'CapsLock'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢çš„ä»£ç å¯ä»¥äº†è§£ç”¨æˆ·æ˜¯å¦æŒ‰ä¸‹äº†å¤§å†™é”®ã€‚</p> <h3 id="_5ã€wheelevent-æ¥å£-ï¼ˆæ»šè½®ï¼‰"><a href="#_5ã€wheelevent-æ¥å£-ï¼ˆæ»šè½®ï¼‰" class="header-anchor">#</a> 5ã€WheelEvent æ¥å£ ï¼ˆæ»šè½®ï¼‰</h3> <h4 id="_5-1-æ¦‚è¿°"><a href="#_5-1-æ¦‚è¿°" class="header-anchor">#</a> 5.1 æ¦‚è¿°</h4> <p><strong>WheelEvent æ¥å£ç»§æ‰¿äº† MouseEvent å®ä¾‹ï¼Œä»£è¡¨é¼ æ ‡æ»šè½®äº‹ä»¶çš„å®ä¾‹å¯¹è±¡</strong>ã€‚ç›®å‰ï¼Œé¼ æ ‡æ»šè½®ç›¸å…³çš„äº‹ä»¶åªæœ‰ä¸€ä¸ª<code>wheel</code>äº‹ä»¶ï¼Œç”¨æˆ·æ»šåŠ¨é¼ æ ‡çš„æ»šè½®ï¼Œå°±ç”Ÿæˆè¿™ä¸ªäº‹ä»¶çš„å®ä¾‹ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>WheelEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ<code>WheelEvent</code>å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> wheelEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WheelEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>WheelEvent()</code>æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ï¼Œå¯¹äºæ»šè½®äº‹ä»¶æ¥è¯´ï¼Œè¿™ä¸ªå€¼ç›®å‰åªèƒ½æ˜¯<code>wheel</code>ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„é…ç½®å¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å±æ€§é™¤äº†<code>Event</code>ã€<code>UIEvent</code>çš„é…ç½®å±æ€§ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ¥å—ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼Œæ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ã€‚</p> <ul><li><code>deltaX</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„æ°´å¹³æ»šåŠ¨é‡ï¼Œé»˜è®¤å€¼æ˜¯ 0.0ã€‚</li> <li><code>deltaY</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„å‚ç›´æ»šåŠ¨é‡ï¼Œé»˜è®¤å€¼æ˜¯ 0.0ã€‚</li> <li><code>deltaZ</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„ Z è½´æ»šåŠ¨é‡ï¼Œé»˜è®¤å€¼æ˜¯ 0.0ã€‚</li> <li><code>deltaMode</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºç›¸å…³çš„æ»šåŠ¨äº‹ä»¶çš„å•ä½ï¼Œé€‚ç”¨äºä¸Šé¢ä¸‰ä¸ªå±æ€§ã€‚<code>0</code>è¡¨ç¤ºæ»šåŠ¨å•ä½ä¸ºåƒç´ ï¼Œ<code>1</code>è¡¨ç¤ºå•ä½ä¸ºè¡Œï¼Œ<code>2</code>è¡¨ç¤ºå•ä½ä¸ºé¡µï¼Œé»˜è®¤ä¸º<code>0</code>ã€‚</li></ul> <h4 id="_5-2-å®ä¾‹å±æ€§"><a href="#_5-2-å®ä¾‹å±æ€§" class="header-anchor">#</a> 5.2 å®ä¾‹å±æ€§</h4> <p><code>WheelEvent</code>äº‹ä»¶å®ä¾‹é™¤äº†å…·æœ‰<code>Event</code>å’Œ<code>MouseEvent</code>çš„å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€äº›è‡ªå·±çš„å®ä¾‹å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰è‡ªå·±çš„å®ä¾‹æ–¹æ³•ã€‚</p> <p>ä¸‹é¢çš„å±æ€§éƒ½æ˜¯åªè¯»å±æ€§ã€‚</p> <ul><li><code>WheelEvent.deltaX</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„æ°´å¹³æ»šåŠ¨é‡ã€‚</li> <li><code>WheelEvent.deltaY</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„å‚ç›´æ»šåŠ¨é‡ã€‚</li> <li><code>WheelEvent.deltaZ</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæ»šè½®çš„ Z è½´æ»šåŠ¨é‡ã€‚</li> <li><code>WheelEvent.deltaMode</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºä¸Šé¢ä¸‰ä¸ªå±æ€§çš„å•ä½ï¼Œ<code>0</code>æ˜¯åƒç´ ï¼Œ<code>1</code>æ˜¯è¡Œï¼Œ<code>2</code>æ˜¯é¡µã€‚</li></ul> <h2 id="äº”ã€é”®ç›˜äº‹ä»¶"><a href="#äº”ã€é”®ç›˜äº‹ä»¶" class="header-anchor">#</a> äº”ã€é”®ç›˜äº‹ä»¶</h2> <h3 id="_1ã€é”®ç›˜äº‹ä»¶çš„ç§ç±»"><a href="#_1ã€é”®ç›˜äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 1ã€é”®ç›˜äº‹ä»¶çš„ç§ç±»</h3> <p>é”®ç›˜äº‹ä»¶ç”±ç”¨æˆ·å‡»æ‰“é”®ç›˜è§¦å‘ï¼Œä¸»è¦æœ‰<code>keydown</code>ã€<code>keypress</code>ã€<code>keyup</code>ä¸‰ä¸ªäº‹ä»¶ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿äº†<code>KeyboardEvent</code>æ¥å£ã€‚</p> <ul><li><code>keydown</code>ï¼šæŒ‰ä¸‹é”®ç›˜æ—¶è§¦å‘ã€‚<strong>ã€æŒ‰ä¸‹ã€‘</strong></li> <li><code>keypress</code>ï¼šæŒ‰ä¸‹æœ‰å€¼çš„é”®æ—¶è§¦å‘ï¼Œå³æŒ‰ä¸‹ Ctrlã€Altã€Shiftã€Meta è¿™æ ·æ— å€¼çš„é”®ï¼Œè¿™ä¸ªäº‹ä»¶ä¸ä¼šè§¦å‘ã€‚å¯¹äºæœ‰å€¼çš„é”®ï¼ŒæŒ‰ä¸‹æ—¶å…ˆè§¦å‘<code>keydown</code>äº‹ä»¶ï¼Œå†è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚<strong>ã€æŒ‰ä¸‹æœ‰å€¼çš„é”®ã€‘</strong></li> <li><code>keyup</code>ï¼šæ¾å¼€é”®ç›˜æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚<strong>ã€æ¾å¼€ã€‘</strong></li></ul> <p>å¦‚æœç”¨æˆ·ä¸€ç›´æŒ‰é”®ä¸æ¾å¼€ï¼Œå°±ä¼šè¿ç»­è§¦å‘é”®ç›˜äº‹ä»¶ï¼Œè§¦å‘çš„é¡ºåºå¦‚ä¸‹ã€‚</p> <ol><li>keydown</li> <li>keypress</li> <li>keydown</li> <li>keypress</li> <li>...ï¼ˆé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼‰</li> <li>keyup</li></ol> <h3 id="_2ã€keyboardevent-æ¥å£æ¦‚è¿°"><a href="#_2ã€keyboardevent-æ¥å£æ¦‚è¿°" class="header-anchor">#</a> 2ã€KeyboardEvent æ¥å£æ¦‚è¿°</h3> <p><code>KeyboardEvent</code>æ¥å£ç”¨æ¥æè¿°ç”¨æˆ·ä¸é”®ç›˜çš„äº’åŠ¨ã€‚è¿™ä¸ªæ¥å£<strong>ç»§æ‰¿äº†<code>Event</code>æ¥å£</strong>ï¼Œå¹¶ä¸”å®šä¹‰äº†è‡ªå·±çš„å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>KeyboardEvent</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥æ–°å»ºé”®ç›˜äº‹ä»¶çš„å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">KeyboardEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token comment">// å‚æ•°ä¸€ï¼Œäº‹ä»¶ç±»å‹ï¼›å‚æ•°äºŒï¼Œäº‹ä»¶é…ç½®å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>KeyboardEvent</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>äº‹ä»¶ç±»å‹</strong>ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<strong>äº‹ä»¶é…ç½®å¯¹è±¡</strong>ï¼Œè¯¥å‚æ•°å¯é€‰ã€‚é™¤äº†<code>Event</code>æ¥å£æä¾›çš„å±æ€§ï¼Œè¿˜å¯ä»¥é…ç½®ä»¥ä¸‹å­—æ®µï¼Œå®ƒä»¬éƒ½æ˜¯å¯é€‰ã€‚</p> <ul><li><code>key</code>ï¼šå­—ç¬¦ä¸²ï¼Œå½“å‰æŒ‰ä¸‹çš„é”®ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚<strong>ã€é”®åã€‘</strong></li> <li><code>code</code>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰æŒ‰ä¸‹çš„é”®çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚<strong>ã€é”®ç ã€‘</strong></li> <li><code>location</code>ï¼šæ•´æ•°ï¼Œå½“å‰æŒ‰ä¸‹çš„é”®çš„ä½ç½®ï¼Œé»˜è®¤ä¸º<code>0</code>ã€‚</li> <li><code>ctrlKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æŒ‰ä¸‹ Ctrl é”®ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚</li> <li><code>shiftKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æŒ‰ä¸‹ Shift é”®ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚</li> <li><code>altKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æŒ‰ä¸‹ Alt é”®ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚</li> <li><code>metaKey</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦æŒ‰ä¸‹ Meta é”®ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚</li> <li><code>repeat</code>ï¼šå¸ƒå°”å€¼ï¼Œæ˜¯å¦é‡å¤æŒ‰é”®ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚</li></ul> <h3 id="_3ã€keyboardevent-çš„å®ä¾‹å±æ€§"><a href="#_3ã€keyboardevent-çš„å®ä¾‹å±æ€§" class="header-anchor">#</a> 3ã€KeyboardEvent çš„å®ä¾‹å±æ€§</h3> <h4 id="_3-1-keyboardevent-altkeyï¼Œkeyboardevent-ctrlkeyï¼Œkeyboardevent-metakeyï¼Œkeyboardevent-shiftkey-ã€æ˜¯å¦æŒ‰ä¸‹å¯¹åº”é”®ï¼Œå¸ƒå°”å€¼ã€‘"><a href="#_3-1-keyboardevent-altkeyï¼Œkeyboardevent-ctrlkeyï¼Œkeyboardevent-metakeyï¼Œkeyboardevent-shiftkey-ã€æ˜¯å¦æŒ‰ä¸‹å¯¹åº”é”®ï¼Œå¸ƒå°”å€¼ã€‘" class="header-anchor">#</a> 3.1 KeyboardEvent.altKeyï¼ŒKeyboardEvent.ctrlKeyï¼ŒKeyboardEvent.metaKeyï¼ŒKeyboardEvent.shiftKey ã€æ˜¯å¦æŒ‰ä¸‹å¯¹åº”é”®ï¼Œå¸ƒå°”å€¼ã€‘</h4> <p>ä»¥ä¸‹å±æ€§éƒ½æ˜¯<strong>åªè¯»</strong>å±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æŒ‰ä¸‹å¯¹åº”çš„é”®ã€‚</p> <ul><li><code>KeyboardEvent.altKey</code>ï¼šæ˜¯å¦æŒ‰ä¸‹ Alt é”®</li> <li><code>KeyboardEvent.ctrlKey</code>ï¼šæ˜¯å¦æŒ‰ä¸‹ Ctrl é”®</li> <li><code>KeyboardEvent.metaKey</code>ï¼šæ˜¯å¦æŒ‰ä¸‹ meta é”®ï¼ˆMac ç³»ç»Ÿæ˜¯ä¸€ä¸ªå››ç“£çš„å°èŠ±ï¼ŒWindows ç³»ç»Ÿæ˜¯ windows é”®ï¼‰</li> <li><code>KeyboardEvent.shiftKey</code>ï¼šæ˜¯å¦æŒ‰ä¸‹ Shift é”®</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">showChar</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ALT: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>altKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'CTRL: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Meta: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Shift: '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> showChar<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-2-keyboardevent-code-é”®ç "><a href="#_3-2-keyboardevent-code-é”®ç " class="header-anchor">#</a> 3.2 KeyboardEvent.code é”®ç </h4> <p><code>KeyboardEvent.code</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå½“å‰æŒ‰ä¸‹çš„é”®çš„å­—ç¬¦ä¸²å½¢å¼</strong>ã€‚è¯¥å±æ€§<strong>åªè¯»</strong>ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨é”®çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œå…¶ä»–é”®è¯·æŸ¥<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code#Code_values" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <ul><li>æ•°å­—é”®0 - 9ï¼šè¿”å›<code>digital0</code> - <code>digital9</code></li> <li>å­—æ¯é”®A - zï¼šè¿”å›<code>KeyA</code> - <code>KeyZ</code></li> <li>åŠŸèƒ½é”®F1 - F12ï¼šè¿”å› <code>F1</code> - <code>F12</code></li> <li>æ–¹å‘é”®ï¼šè¿”å›<code>ArrowDown</code>ã€<code>ArrowUp</code>ã€<code>ArrowLeft</code>ã€<code>ArrowRight</code></li> <li>Alt é”®ï¼šè¿”å›<code>AltLeft</code>æˆ–<code>AltRight</code></li> <li>Shift é”®ï¼šè¿”å›<code>ShiftLeft</code>æˆ–<code>ShiftRight</code></li> <li>Ctrl é”®ï¼šè¿”å›<code>ControlLeft</code>æˆ–<code>ControlRight</code></li></ul> <h4 id="_3-3-keyboardevent-key-é”®å"><a href="#_3-3-keyboardevent-key-é”®å" class="header-anchor">#</a> 3.3 KeyboardEvent.key é”®å</h4> <p><code>KeyboardEvent.key</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæŒ‰ä¸‹çš„é”®å</strong>ã€‚è¯¥å±æ€§<strong>åªè¯»</strong>ã€‚</p> <p>å¦‚æœæŒ‰ä¸‹çš„é”®ä»£è¡¨å¯æ‰“å°å­—ç¬¦ï¼Œåˆ™è¿”å›è¿™ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚æ•°å­—ã€å­—æ¯ã€‚</p> <p>å¦‚æœæŒ‰ä¸‹çš„é”®ä»£è¡¨ä¸å¯æ‰“å°çš„ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™è¿”å›é¢„å®šä¹‰çš„é”®å€¼ï¼Œæ¯”å¦‚ Backspaceï¼ŒTabï¼ŒEnterï¼ŒShiftï¼ŒControlï¼ŒAltï¼ŒCapsLockï¼ŒEscï¼ŒSpacebarï¼ŒPageUpï¼ŒPageDownï¼ŒEndï¼ŒHomeï¼ŒLeftï¼ŒRightï¼ŒUpï¼ŒDownï¼ŒPrintScreenï¼ŒInsertï¼ŒDelï¼ŒWinï¼ŒF1ï½F12ï¼ŒNumLockï¼ŒScroll ç­‰ã€‚</p> <p>å¦‚æœåŒæ—¶æŒ‰ä¸‹ä¸€ä¸ªæ§åˆ¶é”®å’Œä¸€ä¸ªç¬¦å·é”®ï¼Œåˆ™è¿”å›ç¬¦å·é”®çš„é”®åã€‚æ¯”å¦‚ï¼ŒæŒ‰ä¸‹ Ctrl + aï¼Œåˆ™è¿”å›<code>a</code>ï¼›æŒ‰ä¸‹ Shift + aï¼Œåˆ™è¿”å›å¤§å†™çš„<code>A</code>ã€‚</p> <p>å¦‚æœæ— æ³•è¯†åˆ«é”®åï¼Œè¿”å›å­—ç¬¦ä¸²<code>Unidentified</code>ã€‚</p> <h4 id="_3-4-keyboardevent-location-é”®å¤„äºå“ªä¸ªä½ç½®ï¼Œæ•´æ•°"><a href="#_3-4-keyboardevent-location-é”®å¤„äºå“ªä¸ªä½ç½®ï¼Œæ•´æ•°" class="header-anchor">#</a> 3.4 KeyboardEvent.location é”®å¤„äºå“ªä¸ªä½ç½®ï¼Œæ•´æ•°</h4> <p><code>KeyboardEvent.location</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæŒ‰ä¸‹çš„é”®å¤„åœ¨é”®ç›˜çš„å“ªä¸€ä¸ªåŒºåŸŸ</strong>ã€‚å®ƒå¯èƒ½å–ä»¥ä¸‹å€¼ã€‚</p> <ul><li><p>0ï¼šå¤„åœ¨é”®ç›˜çš„ä¸»åŒºåŸŸï¼Œæˆ–è€…æ— æ³•åˆ¤æ–­å¤„äºå“ªä¸€ä¸ªåŒºåŸŸã€‚</p></li> <li><p>1ï¼šå¤„åœ¨é”®ç›˜çš„å·¦ä¾§ï¼Œåªé€‚ç”¨é‚£äº›æœ‰ä¸¤ä¸ªä½ç½®çš„é”®ï¼ˆæ¯”å¦‚ Ctrl å’Œ Shift é”®ï¼‰ã€‚</p></li> <li><p>2ï¼šå¤„åœ¨é”®ç›˜çš„å³ä¾§ï¼Œåªé€‚ç”¨é‚£äº›æœ‰ä¸¤ä¸ªä½ç½®çš„é”®ï¼ˆæ¯”å¦‚ Ctrl å’Œ Shift é”®ï¼‰ã€‚</p></li> <li><p>3ï¼šå¤„åœ¨æ•°å­—å°é”®ç›˜ã€‚</p></li></ul> <h4 id="_3-5-keyboardevent-repeat-æ˜¯å¦é•¿æŒ‰"><a href="#_3-5-keyboardevent-repeat-æ˜¯å¦é•¿æŒ‰" class="header-anchor">#</a> 3.5 KeyboardEvent.repeat æ˜¯å¦é•¿æŒ‰</h4> <p><code>KeyboardEvent.repeat</code>è¿”å›ä¸€ä¸ª<strong>å¸ƒå°”å€¼ï¼Œä»£è¡¨è¯¥é”®æ˜¯å¦è¢«æŒ‰ç€ä¸æ”¾</strong>ï¼Œä»¥ä¾¿åˆ¤æ–­æ˜¯å¦é‡å¤è¿™ä¸ªé”®ï¼Œå³æµè§ˆå™¨ä¼šæŒç»­è§¦å‘<code>keydown</code>å’Œ<code>keypress</code>äº‹ä»¶ï¼Œç›´åˆ°ç”¨æˆ·æ¾å¼€æ‰‹ä¸ºæ­¢ã€‚</p> <h3 id="_4ã€keyboardevent-çš„å®ä¾‹æ–¹æ³•"><a href="#_4ã€keyboardevent-çš„å®ä¾‹æ–¹æ³•" class="header-anchor">#</a> 4ã€KeyboardEvent çš„å®ä¾‹æ–¹æ³•</h3> <h4 id="_4-1-keyboardevent-getmodifierstate-æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®"><a href="#_4-1-keyboardevent-getmodifierstate-æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®" class="header-anchor">#</a> 4.1 KeyboardEvent.getModifierState() æ˜¯å¦æŒ‰ä¸‹æŒ‡å®šåŠŸèƒ½é”®</h4> <p><code>KeyboardEvent.getModifierState()</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<strong>å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æŒ‰ä¸‹æˆ–æ¿€æ´»æŒ‡å®šçš„åŠŸèƒ½é”®</strong>ã€‚å®ƒçš„å¸¸ç”¨å‚æ•°å¦‚ä¸‹ã€‚</p> <ul><li><code>Alt</code>ï¼šAlt é”®</li> <li><code>CapsLock</code>ï¼šå¤§å†™é”å®šé”®</li> <li><code>Control</code>ï¼šCtrl é”®</li> <li><code>Meta</code>ï¼šMeta é”®</li> <li><code>NumLock</code>ï¼šæ•°å­—é”®ç›˜å¼€å…³é”®</li> <li><code>Shift</code>ï¼šShift é”®</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>
  event<span class="token punctuation">.</span><span class="token function">getModifierState</span><span class="token punctuation">(</span><span class="token string">'Control'</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  event<span class="token punctuation">.</span><span class="token function">getModifierState</span><span class="token punctuation">(</span><span class="token string">'Alt'</span><span class="token punctuation">)</span> <span class="token operator">+</span>
  event<span class="token punctuation">.</span><span class="token function">getModifierState</span><span class="token punctuation">(</span><span class="token string">'Meta'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œåªè¦<code>Control</code>ã€<code>Alt</code>ã€<code>Meta</code>é‡Œé¢ï¼ŒåŒæ—¶æŒ‰ä¸‹ä»»æ„ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„é”®å°±è¿”å›ã€‚</p> <h2 id="å…­ã€è¿›åº¦äº‹ä»¶"><a href="#å…­ã€è¿›åº¦äº‹ä»¶" class="header-anchor">#</a> å…­ã€è¿›åº¦äº‹ä»¶</h2> <h3 id="_1ã€è¿›åº¦äº‹ä»¶çš„ç§ç±»"><a href="#_1ã€è¿›åº¦äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 1ã€è¿›åº¦äº‹ä»¶çš„ç§ç±»</h3> <p><strong>è¿›åº¦äº‹ä»¶ç”¨æ¥æè¿°èµ„æºåŠ è½½çš„è¿›åº¦</strong>ï¼Œä¸»è¦ç”± AJAX è¯·æ±‚ã€<code>&lt;img&gt;</code>ã€<code>&lt;audio&gt;</code>ã€<code>&lt;video&gt;</code>ã€<code>&lt;style&gt;</code>ã€<code>&lt;link&gt;</code>ç­‰å¤–éƒ¨èµ„æºçš„åŠ è½½è§¦å‘ï¼Œç»§æ‰¿äº†<code>ProgressEvent</code>æ¥å£ã€‚å®ƒä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ç§<strong>äº‹ä»¶</strong>ã€‚</p> <ul><li><code>abort</code>ï¼šå¤–éƒ¨èµ„æºä¸­æ­¢åŠ è½½æ—¶ï¼ˆæ¯”å¦‚ç”¨æˆ·å–æ¶ˆï¼‰è§¦å‘ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯å¯¼è‡´ä¸­æ­¢ï¼Œä¸ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚<strong>ã€ä¸­æ­¢åŠ è½½ã€‘</strong></li> <li><code>error</code>ï¼šç”±äºé”™è¯¯å¯¼è‡´å¤–éƒ¨èµ„æºæ— æ³•åŠ è½½æ—¶è§¦å‘ã€‚<strong>ã€åŠ è½½é”™è¯¯ã€‘</strong></li> <li><code>load</code>ï¼šå¤–éƒ¨èµ„æºåŠ è½½æˆåŠŸæ—¶è§¦å‘ã€‚<strong>ã€åŠ è½½æˆåŠŸã€‘</strong></li> <li><code>loadstart</code>ï¼šå¤–éƒ¨èµ„æºå¼€å§‹åŠ è½½æ—¶è§¦å‘ã€‚<strong>ã€å¼€å§‹åŠ è½½ã€‘</strong></li> <li><code>loadend</code>ï¼šå¤–éƒ¨èµ„æºåœæ­¢åŠ è½½æ—¶è§¦å‘ï¼Œå‘ç”Ÿé¡ºåºæ’åœ¨<code>error</code>ã€<code>abort</code>ã€<code>load</code>ç­‰äº‹ä»¶çš„åé¢ã€‚<strong>ã€åœæ­¢åŠ è½½ã€‘</strong></li> <li><code>progress</code>ï¼šå¤–éƒ¨èµ„æºåŠ è½½è¿‡ç¨‹ä¸­ä¸æ–­è§¦å‘ã€‚<strong>ã€åŠ è½½ä¸­ï¼Œä¸æ–­è§¦å‘ã€‘</strong></li> <li><code>timeout</code>ï¼šåŠ è½½è¶…æ—¶æ—¶è§¦å‘ã€‚<strong>ã€åŠ è½½è¶…æ—¶ã€‘</strong></li></ul> <p>æ³¨æ„ï¼Œé™¤äº†èµ„æºä¸‹è½½ï¼Œ<strong>æ–‡ä»¶ä¸Šä¼ ä¹Ÿå­˜åœ¨è¿™äº›äº‹ä»¶</strong>ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŠ è½½æˆåŠŸ</span>
  image<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŠ è½½å‡ºé”™</span>
  image<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç åœ¨å›¾ç‰‡å…ƒç´ åŠ è½½å®Œæˆåï¼Œä¸ºå›¾ç‰‡å…ƒç´ æ·»åŠ ä¸€ä¸ª<code>finished</code>çš„ Classã€‚å¦‚æœåŠ è½½å¤±è´¥ï¼Œå°±æŠŠå›¾ç‰‡å…ƒç´ çš„æ ·å¼è®¾ç½®ä¸ºä¸æ˜¾ç¤ºã€‚</p> <p>æœ‰æ—¶å€™ï¼Œå›¾ç‰‡åŠ è½½ä¼šåœ¨è„šæœ¬è¿è¡Œä¹‹å‰å°±å®Œæˆï¼Œå°¤å…¶æ˜¯å½“è„šæœ¬æ”¾ç½®åœ¨ç½‘é¡µåº•éƒ¨çš„æ—¶å€™ï¼Œå› æ­¤æœ‰å¯èƒ½<code>load</code>å’Œ<code>error</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚æ‰€ä»¥ï¼Œæ¯”è¾ƒå¯é çš„æ–¹å¼ï¼Œæ˜¯ç”¨<code>complete</code>å±æ€§å…ˆåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦åŠ è½½å®Œæˆã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">loaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>complete<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ˜¯å¦åŠ è½½å®Œæˆ</span>
  <span class="token function">loaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  image<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> loaded<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ è½½æˆåŠŸäº‹ä»¶</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç”±äº DOM çš„å…ƒç´ èŠ‚ç‚¹æ²¡æœ‰æä¾›æ˜¯å¦åŠ è½½é”™è¯¯çš„å±æ€§ï¼Œæ‰€ä»¥<code>error</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°æœ€å¥½æ”¾åœ¨<code>&lt;img&gt;</code>å…ƒç´ çš„ HTML ä»£ç ä¸­ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯å‘ç”ŸåŠ è½½é”™è¯¯æ—¶ç™¾åˆ†ä¹‹ç™¾ä¼šæ‰§è¡Œã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/wrong/url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>this.style.display=<span class="token punctuation">'</span>none<span class="token punctuation">'</span>;<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>loadend</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥å–ä»£<code>abort</code>äº‹ä»¶ã€<code>load</code>äº‹ä»¶ã€<code>error</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œå› ä¸ºå®ƒæ€»æ˜¯åœ¨è¿™äº›äº‹ä»¶ä¹‹åå‘ç”Ÿã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>req<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'loadend'</span><span class="token punctuation">,</span> loadEnd<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">loadEnd</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¼ è¾“ç»“æŸï¼ŒæˆåŠŸå¤±è´¥æœªçŸ¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>loadend</code>äº‹ä»¶æœ¬èº«ä¸æä¾›å…³äºè¿›åº¦ç»“æŸçš„åŸå› ï¼Œä½†å¯ä»¥ç”¨å®ƒæ¥åšæ‰€æœ‰åŠ è½½ç»“æŸåœºæ™¯éƒ½éœ€è¦åšçš„ä¸€äº›æ“ä½œã€‚</p> <p>å¦å¤–ï¼Œ<code>error</code>äº‹ä»¶æœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ€§è´¨ï¼Œå°±æ˜¯ä¸ä¼šå†’æ³¡ã€‚æ‰€ä»¥ï¼Œå­å…ƒç´ çš„<code>error</code>äº‹ä»¶ï¼Œä¸ä¼šè§¦å‘çˆ¶å…ƒç´ çš„<code>error</code>äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚</p> <h3 id="_2ã€progressevent-æ¥å£"><a href="#_2ã€progressevent-æ¥å£" class="header-anchor">#</a> 2ã€ProgressEvent æ¥å£</h3> <h4 id="_2-1-æ¦‚è¿°"><a href="#_2-1-æ¦‚è¿°" class="header-anchor">#</a> 2.1 æ¦‚è¿°</h4> <p><code>ProgressEvent</code>æ¥å£ä¸»è¦ç”¨æ¥æè¿°å¤–éƒ¨èµ„æºåŠ è½½çš„è¿›åº¦ï¼Œæ¯”å¦‚ AJAX åŠ è½½ã€<code>&lt;img&gt;</code>ã€<code>&lt;video&gt;</code>ã€<code>&lt;style&gt;</code>ã€<code>&lt;link&gt;</code>ç­‰å¤–éƒ¨èµ„æºåŠ è½½ã€‚è¿›åº¦ç›¸å…³çš„äº‹ä»¶éƒ½ç»§æ‰¿äº†è¿™ä¸ªæ¥å£ã€‚<strong>è¿™ä¸ªæ¥å£ç»§æ‰¿äº†Eventæ¥å£ã€‚</strong></p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›äº†<code>ProgressEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆäº‹ä»¶å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">ProgressEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token comment">// å‚æ•°ä¸€ï¼Œäº‹ä»¶ç±»å‹ï¼›å‚æ•°äºŒï¼Œé…ç½®å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>ProgressEvent()</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„ç±»å‹ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¡¨ç¤ºäº‹ä»¶çš„å±æ€§ï¼Œè¯¥å‚æ•°å¯é€‰ã€‚é…ç½®å¯¹è±¡é™¤äº†å¯ä»¥ä½¿ç”¨<code>Event</code>æ¥å£çš„é…ç½®å±æ€§ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å±æ€§ï¼Œæ‰€æœ‰è¿™äº›å±æ€§éƒ½æ˜¯å¯é€‰çš„ã€‚</p> <ul><li><code>lengthComputable</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåŠ è½½çš„<strong>æ€»é‡æ˜¯å¦å¯ä»¥è®¡ç®—</strong>ï¼Œé»˜è®¤æ˜¯<code>false</code>ã€‚</li> <li><code>loaded</code>ï¼šæ•´æ•°ï¼Œè¡¨ç¤º<strong>å·²ç»åŠ è½½çš„é‡</strong>ï¼Œé»˜è®¤æ˜¯<code>0</code>ã€‚</li> <li><code>total</code>ï¼šæ•´æ•°ï¼Œè¡¨ç¤º<strong>éœ€è¦åŠ è½½çš„æ€»é‡</strong>ï¼Œé»˜è®¤æ˜¯<code>0</code>ã€‚</li></ul> <h4 id="_2-2-progresseventçš„å®ä¾‹å±æ€§ã€‚"><a href="#_2-2-progresseventçš„å®ä¾‹å±æ€§ã€‚" class="header-anchor">#</a> 2.2 ProgressEventçš„å®ä¾‹å±æ€§ã€‚</h4> <ul><li><code>ProgressEvent.lengthComputable</code> <strong>æ€»é‡æ˜¯å¦å¯ä»¥è®¡ç®—</strong></li> <li><code>ProgressEvent.loaded</code> <strong>å·²åŠ è½½çš„é‡</strong></li> <li><code>ProgressEvent.total</code> <strong>éœ€è¦åŠ è½½çš„æ€»é‡</strong></li></ul> <p>å¦‚æœ<code>ProgressEvent.lengthComputable</code>ä¸º<code>false</code>ï¼Œ<code>ProgressEvent.total</code>å®é™…ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProgressEvent</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  lengthComputable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  loaded<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
  total<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å·²ç»åŠ è½½ï¼š'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å·²ç»åŠ è½½ï¼š30%</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸Šé¢ä»£ç å…ˆæ„é€ ä¸€ä¸ª<code>load</code>äº‹ä»¶ï¼ŒæŠ›å‡ºåè¢«ç›‘å¬å‡½æ•°æ•æ‰åˆ°ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">,</span> updateProgress<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ è½½ä¸­</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> transferComplete<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ è½½æˆåŠŸ</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> transferFailed<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ è½½é”™è¯¯</span>
xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'abort'</span><span class="token punctuation">,</span> transferCanceled<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸­æ­¢åŠ è½½</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">updateProgress</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŠ è½½ä¸­</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ˜¯å¦å¯ä»¥è®¡ç®—æ€»é‡</span>
    <span class="token keyword">var</span> percentComplete <span class="token operator">=</span> e<span class="token punctuation">.</span>loaded <span class="token operator">/</span> e<span class="token punctuation">.</span>total<span class="token punctuation">;</span> <span class="token comment">// åŠ è½½è¿›åº¦è®¡ç®—</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¸èƒ½è®¡ç®—è¿›åº¦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">transferComplete</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŠ è½½æˆåŠŸ</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¼ è¾“ç»“æŸ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">transferFailed</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åŠ è½½é”™è¯¯</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">transferCanceled</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸­æ­¢åŠ è½½</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç”¨æˆ·å–æ¶ˆäº†ä¼ è¾“'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>ä¸Šé¢æ˜¯ä¸‹è½½è¿‡ç¨‹çš„è¿›åº¦äº‹ä»¶ï¼Œè¿˜å­˜åœ¨<strong>ä¸Šä¼ è¿‡ç¨‹çš„è¿›åº¦äº‹ä»¶</strong>ã€‚è¿™æ—¶æ‰€æœ‰ç›‘å¬å‡½æ•°éƒ½è¦æ”¾åœ¨<code>XMLHttpRequest.upload</code>å¯¹è±¡ä¸Šé¢ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">,</span> updateProgress<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> transferComplete<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> transferFailed<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'abort'</span><span class="token punctuation">,</span> transferCanceled<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ä¸ƒã€è¡¨å•äº‹ä»¶"><a href="#ä¸ƒã€è¡¨å•äº‹ä»¶" class="header-anchor">#</a> ä¸ƒã€è¡¨å•äº‹ä»¶</h2> <h3 id="_1ã€è¡¨å•äº‹ä»¶çš„ç§ç±»"><a href="#_1ã€è¡¨å•äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 1ã€è¡¨å•äº‹ä»¶çš„ç§ç±»</h3> <h4 id="_1-1-input-äº‹ä»¶-ï¼ˆå€¼å‘ç”Ÿå˜åŒ–è§¦å‘ï¼Œä¼šè¿ç»­ï¼‰"><a href="#_1-1-input-äº‹ä»¶-ï¼ˆå€¼å‘ç”Ÿå˜åŒ–è§¦å‘ï¼Œä¼šè¿ç»­ï¼‰" class="header-anchor">#</a> 1.1 input äº‹ä»¶ ï¼ˆå€¼å‘ç”Ÿå˜åŒ–è§¦å‘ï¼Œä¼šè¿ç»­ï¼‰</h4> <p><code>input</code>äº‹ä»¶å½“<code>&lt;input&gt;</code>ã€<code>&lt;select&gt;</code>ã€<code>&lt;textarea&gt;</code>çš„<strong>å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘</strong>ã€‚å¯¹äºå¤é€‰æ¡†ï¼ˆ<code>&lt;input type=checkbox&gt;</code>ï¼‰æˆ–å•é€‰æ¡†ï¼ˆ<code>&lt;input type=radio&gt;</code>ï¼‰ï¼Œç”¨æˆ·æ”¹å˜é€‰é¡¹æ—¶ï¼Œä¹Ÿä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚å¦å¤–ï¼Œå¯¹äºæ‰“å¼€<code>contenteditable</code>å±æ€§çš„å…ƒç´ ï¼Œåªè¦å€¼å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šè§¦å‘<code>input</code>äº‹ä»¶ã€‚</p> <p><code>input</code>äº‹ä»¶çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯<strong>ä¼šè¿ç»­è§¦å‘</strong>ï¼Œæ¯”å¦‚<strong>ç”¨æˆ·æ¯æŒ‰ä¸‹ä¸€æ¬¡æŒ‰é”®ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡<code>input</code>äº‹ä»¶</strong>ã€‚</p> <p><code>input</code>äº‹ä»¶å¯¹è±¡<strong>ç»§æ‰¿äº†<code>InputEvent</code>æ¥å£</strong>ã€‚</p> <p>è¯¥äº‹ä»¶è·Ÿ<code>change</code>äº‹ä»¶å¾ˆåƒï¼Œä¸åŒä¹‹å¤„åœ¨äº**<code>input</code>äº‹ä»¶åœ¨å…ƒç´ çš„å€¼å‘ç”Ÿå˜åŒ–åç«‹å³å‘ç”Ÿ**ï¼Œ<strong>è€Œ<code>change</code>åœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶å‘ç”Ÿ</strong>ï¼Œè€Œå†…å®¹æ­¤æ—¶å¯èƒ½å·²ç»å˜åŒ–å¤šæ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœ‰è¿ç»­å˜åŒ–ï¼Œ<strong><code>input</code>äº‹ä»¶ä¼šè§¦å‘å¤šæ¬¡ï¼Œè€Œ<code>change</code>äº‹ä»¶åªåœ¨å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ä¸€æ¬¡ã€‚</strong></p> <p>ä¸‹é¢æ˜¯<code>&lt;select&gt;</code>å…ƒç´ çš„ä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
&lt;select id=&quot;mySelect&quot;&gt;
  &lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;
  &lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;
  &lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;
&lt;/select&gt;
*/</span>

<span class="token keyword">function</span> <span class="token function">inputHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> mySelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#mySelect'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySelect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> inputHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ”¹å˜ä¸‹æ‹‰æ¡†é€‰é¡¹æ—¶ï¼Œä¼šè§¦å‘<code>input</code>äº‹ä»¶ï¼Œä»è€Œæ‰§è¡Œå›è°ƒå‡½æ•°<code>inputHandler</code>ã€‚</p> <h4 id="_1-2-select-äº‹ä»¶-ï¼ˆé€‰ä¸­æ–‡æœ¬æ—¶è§¦å‘ï¼‰"><a href="#_1-2-select-äº‹ä»¶-ï¼ˆé€‰ä¸­æ–‡æœ¬æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 1.2 select äº‹ä»¶ ï¼ˆé€‰ä¸­æ–‡æœ¬æ—¶è§¦å‘ï¼‰</h4> <p><code>select</code>äº‹ä»¶å½“åœ¨<code>&lt;input&gt;</code>ã€<code>&lt;textarea&gt;</code>é‡Œé¢<strong>é€‰ä¸­æ–‡æœ¬æ—¶è§¦å‘</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;input id=&quot;test&quot; type=&quot;text&quot; value=&quot;Select me!&quot; /&gt;</span>

<span class="token keyword">var</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'select'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;select&quot; äº‹ä»¶ç±»å‹</span>
    
  <span class="token keyword">var</span> _target <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ–‡æœ¬æ¡†çš„å…¨éƒ¨å€¼</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>selectionDirection<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€‰æ‹©çš„æ–¹å‘ï¼š'forward'æ­£å‘ã€'backward'åå‘</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¼€å§‹é€‰æ‹©çš„ç´¢å¼•</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç»“æŸé€‰æ‹©çš„ç´¢å¼•</span>
  <span class="token comment">// æ³¨æ„ï¼šå¼€å§‹å’Œç»“æŸç´¢å¼•æ˜¯ä¸åˆ†é€‰æ‹©æ–¹å‘çš„ï¼Œå¼€å§‹çš„ç´¢å¼•ä¸€ç›´æ˜¯é å‰çš„</span>
  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>_target<span class="token punctuation">.</span>selectionStart<span class="token punctuation">,</span> _target<span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// é€‰ä¸­çš„é‚£éƒ¨åˆ†å­—ç¬¦ä¸²</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>é€‰ä¸­çš„æ–‡æœ¬å¯ä»¥é€šè¿‡<code>event.target</code>å…ƒç´ çš„<code>selectionDirection</code>ã€<code>selectionEnd</code>ã€<code>selectionStart</code>å’Œ<code>value</code>å±æ€§æ‹¿åˆ°ã€‚</p> <h4 id="_1-3-change-äº‹ä»¶-ï¼ˆå€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œå•æ¬¡ï¼‰"><a href="#_1-3-change-äº‹ä»¶-ï¼ˆå€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œå•æ¬¡ï¼‰" class="header-anchor">#</a> 1.3 change äº‹ä»¶ ï¼ˆå€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œå•æ¬¡ï¼‰</h4> <p><code>change</code>äº‹ä»¶å½“<code>&lt;input&gt;</code>ã€<code>&lt;select&gt;</code>ã€<code>&lt;textarea&gt;</code>çš„<strong>å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘</strong>ã€‚å®ƒä¸<code>input</code>äº‹ä»¶çš„æœ€å¤§ä¸åŒï¼Œå°±æ˜¯<strong>ä¸ä¼šè¿ç»­è§¦å‘ï¼Œåªæœ‰å½“å…¨éƒ¨ä¿®æ”¹å®Œæˆæ—¶æ‰ä¼šè§¦å‘</strong>ï¼Œå¦ä¸€æ–¹é¢<code>input</code>äº‹ä»¶å¿…ç„¶ä¼´éš<code>change</code>äº‹ä»¶ã€‚å…·ä½“æ¥è¯´ï¼Œåˆ†æˆä»¥ä¸‹å‡ ç§æƒ…å†µã€‚</p> <ul><li>æ¿€æ´»å•é€‰æ¡†ï¼ˆradioï¼‰æˆ–å¤é€‰æ¡†ï¼ˆcheckboxï¼‰æ—¶è§¦å‘ã€‚</li> <li>ç”¨æˆ·æäº¤æ—¶è§¦å‘ã€‚æ¯”å¦‚ï¼Œä»ä¸‹åˆ—åˆ—è¡¨ï¼ˆselectï¼‰å®Œæˆé€‰æ‹©ï¼Œåœ¨æ—¥æœŸæˆ–æ–‡ä»¶è¾“å…¥æ¡†å®Œæˆé€‰æ‹©ã€‚</li> <li>å½“æ–‡æœ¬æ¡†æˆ–<code>&lt;textarea&gt;</code>å…ƒç´ çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸”ä¸§å¤±ç„¦ç‚¹æ—¶è§¦å‘ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;select size=&quot;1&quot; onchange=&quot;changeEventHandler(event);&quot;&gt;</span>
<span class="token comment">//   &lt;option&gt;chocolate&lt;/option&gt;</span>
<span class="token comment">//   &lt;option&gt;strawberry&lt;/option&gt;</span>
<span class="token comment">//   &lt;option&gt;vanilla&lt;/option&gt;</span>
<span class="token comment">// &lt;/select&gt;</span>

<span class="token keyword">function</span> <span class="token function">changeEventHandler</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å¦‚æœæ¯”è¾ƒä¸€ä¸‹ä¸Šé¢<code>input</code>äº‹ä»¶çš„ä¾‹å­ï¼Œä½ ä¼šå‘ç°å¯¹äº<code>&lt;select&gt;</code>å…ƒç´ æ¥è¯´ï¼Œ<code>input</code>å’Œ<code>change</code>äº‹ä»¶åŸºæœ¬æ˜¯ç­‰ä»·çš„ã€‚</p> <h4 id="_1-4-invalid-äº‹ä»¶-ï¼ˆè¡¨å•æäº¤ä¸æ»¡è¶³æ¡ä»¶è§¦å‘ï¼‰"><a href="#_1-4-invalid-äº‹ä»¶-ï¼ˆè¡¨å•æäº¤ä¸æ»¡è¶³æ¡ä»¶è§¦å‘ï¼‰" class="header-anchor">#</a> 1.4 invalid äº‹ä»¶ ï¼ˆè¡¨å•æäº¤ä¸æ»¡è¶³æ¡ä»¶è§¦å‘ï¼‰</h4> <p><strong>ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå¦‚æœè¡¨å•å…ƒç´ çš„å€¼ä¸æ»¡è¶³æ ¡éªŒæ¡ä»¶ï¼Œå°±ä¼šè§¦å‘<code>invalid</code>äº‹ä»¶ã€‚</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token attr-name">oninvalid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(<span class="token punctuation">'</span>invalid input<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¾“å…¥æ¡†æ˜¯å¿…å¡«çš„ã€‚å¦‚æœä¸å¡«ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®æäº¤æ—¶ï¼Œå°±ä¼šè§¦å‘è¾“å…¥æ¡†çš„<code>invalid</code>äº‹ä»¶ï¼Œå¯¼è‡´æäº¤è¢«å–æ¶ˆã€‚</p> <h4 id="_1-5-reset-äº‹ä»¶ï¼ˆé‡ç½®ï¼‰ï¼Œsubmit-äº‹ä»¶ï¼ˆæäº¤ï¼‰"><a href="#_1-5-reset-äº‹ä»¶ï¼ˆé‡ç½®ï¼‰ï¼Œsubmit-äº‹ä»¶ï¼ˆæäº¤ï¼‰" class="header-anchor">#</a> 1.5 reset äº‹ä»¶ï¼ˆé‡ç½®ï¼‰ï¼Œsubmit äº‹ä»¶ï¼ˆæäº¤ï¼‰</h4> <p><code>reset</code>äº‹ä»¶å½“<strong>è¡¨å•é‡ç½®ï¼ˆæ‰€æœ‰è¡¨å•æˆå‘˜å˜å›é»˜è®¤å€¼ï¼‰æ—¶è§¦å‘ã€‚</strong></p> <p><code>submit</code>äº‹ä»¶å½“<strong>è¡¨å•æ•°æ®å‘æœåŠ¡å™¨æäº¤æ—¶è§¦å‘</strong>ã€‚</p> <p>æ³¨æ„ï¼Œ<strong>è¿™ä¸¤ä¸ªäº‹ä»¶å‘ç”Ÿåœ¨è¡¨å•å¯¹è±¡<code>&lt;form&gt;</code>ä¸Šï¼Œè€Œä¸æ˜¯å‘ç”Ÿåœ¨è¡¨å•çš„æˆå‘˜ä¸Š</strong>ï¼Œå› ä¸ºæäº¤çš„æ˜¯è¡¨å•ï¼Œè€Œä¸æ˜¯è¡¨å•æˆå‘˜ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onreset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(<span class="token punctuation">'</span>è§¦å‘äº†é‡ç½®äº‹ä»¶<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onsubmit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>console.log(<span class="token punctuation">'</span>è§¦å‘äº†æäº¤äº‹ä»¶<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>html_form_action.php<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>get<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Duck<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reset<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>é‡ç½®<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æäº¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2ã€inputevent-æ¥å£ï¼ˆinputäº‹ä»¶çš„å®ä¾‹ï¼‰"><a href="#_2ã€inputevent-æ¥å£ï¼ˆinputäº‹ä»¶çš„å®ä¾‹ï¼‰" class="header-anchor">#</a> 2ã€InputEvent æ¥å£ï¼ˆinputäº‹ä»¶çš„å®ä¾‹ï¼‰</h3> <p><strong><code>InputEvent</code>æ¥å£ä¸»è¦ç”¨æ¥æè¿°<code>input</code>äº‹ä»¶çš„å®ä¾‹</strong>ã€‚è¯¥æ¥å£<strong>ç»§æ‰¿äº†<code>Event</code>æ¥å£</strong>ï¼Œè¿˜å®šä¹‰äº†ä¸€äº›è‡ªå·±çš„å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>InputEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆå®ä¾‹å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">InputEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token comment">// å‚æ•°ä¸€ï¼Œäº‹ä»¶åç§°ï¼›å‚æ•°äºŒï¼Œé…ç½®å¯¹è±¡</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>InputEvent</code>æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>äº‹ä»¶åç§°</strong>ï¼Œè¯¥å‚æ•°æ˜¯å¿…éœ€çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª<strong>é…ç½®å¯¹è±¡</strong>ï¼Œç”¨æ¥è®¾ç½®äº‹ä»¶å®ä¾‹çš„å±æ€§ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚é…ç½®å¯¹è±¡çš„å­—æ®µé™¤äº†<code>Event</code>æ„é€ å‡½æ•°çš„é…ç½®å±æ€§ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸‹é¢çš„å­—æ®µï¼Œè¿™äº›å­—æ®µéƒ½æ˜¯å¯é€‰çš„ã€‚</p> <ul><li><code>inputType</code>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>å‘ç”Ÿå˜æ›´çš„ç±»å‹</strong>ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚</li> <li><code>data</code>ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>æ’å…¥çš„å­—ç¬¦ä¸²</strong>ã€‚å¦‚æœæ²¡æœ‰æ’å…¥çš„å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åˆ é™¤æ“ä½œï¼‰ï¼Œåˆ™è¿”å›<code>null</code>æˆ–ç©ºå­—ç¬¦ä¸²ã€‚</li> <li><code>dataTransfer</code>ï¼šè¿”å›ä¸€ä¸ª <strong>DataTransfer å¯¹è±¡å®ä¾‹ï¼Œè¯¥å±æ€§é€šå¸¸åªåœ¨è¾“å…¥æ¡†æ¥å—å¯Œæ–‡æœ¬è¾“å…¥æ—¶æœ‰æ•ˆ</strong>ã€‚</li></ul> <p><code>InputEvent</code>çš„å®ä¾‹å±æ€§ä¸»è¦å°±æ˜¯ä¸Šé¢ä¸‰ä¸ªå±æ€§ï¼Œè¿™ä¸‰ä¸ªå®ä¾‹å±æ€§éƒ½æ˜¯<strong>åªè¯»çš„</strong>ã€‚</p> <h4 id="ï¼ˆ1ï¼‰inputevent-data-å˜åŠ¨çš„é‚£éƒ¨åˆ†å†…å®¹"><a href="#ï¼ˆ1ï¼‰inputevent-data-å˜åŠ¨çš„é‚£éƒ¨åˆ†å†…å®¹" class="header-anchor">#</a> ï¼ˆ1ï¼‰InputEvent.data å˜åŠ¨çš„é‚£éƒ¨åˆ†å†…å®¹</h4> <p><code>InputEvent.data</code>å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤º<strong>å˜åŠ¨çš„å†…å®¹</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;input type=&quot;text&quot; id=&quot;myInput&quot;&gt;</span>
<span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> myFunction<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœæ‰‹åŠ¨åœ¨è¾“å…¥æ¡†é‡Œé¢è¾“å…¥<code>abc</code>ï¼Œæ§åˆ¶å°ä¼šå…ˆè¾“å‡º<code>a</code>ï¼Œå†åœ¨ä¸‹ä¸€è¡Œè¾“å‡º<code>b</code>ï¼Œå†åœ¨ä¸‹ä¸€è¡Œè¾“å‡º<code>c</code>ã€‚ç„¶åé€‰ä¸­<code>abc</code>ï¼Œä¸€æ¬¡æ€§å°†å®ƒä»¬åˆ é™¤ï¼Œæ§åˆ¶å°ä¼šè¾“å‡º<code>null</code>æˆ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p> <h4 id="ï¼ˆ2ï¼‰inputevent-inputtype-å˜æ›´ç±»å‹"><a href="#ï¼ˆ2ï¼‰inputevent-inputtype-å˜æ›´ç±»å‹" class="header-anchor">#</a> ï¼ˆ2ï¼‰InputEvent.inputType å˜æ›´ç±»å‹</h4> <p><code>InputEvent.inputType</code>å±æ€§è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²<strong>å‘ç”Ÿå˜æ›´çš„ç±»å‹</strong>ã€‚</p> <p>å¯¹äºå¸¸è§æƒ…å†µï¼ŒChrome æµè§ˆå™¨çš„è¿”å›å€¼å¦‚ä¸‹ã€‚å®Œæ•´åˆ—è¡¨å¯ä»¥å‚è€ƒ<a href="https://w3c.github.io/input-events/index.html#dom-inputevent-inputtype" target="_blank" rel="noopener noreferrer">æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <ul><li>æ‰‹åŠ¨æ’å…¥æ–‡æœ¬ï¼š<code>insertText</code></li> <li>ç²˜è´´æ’å…¥æ–‡æœ¬ï¼š<code>insertFromPaste</code></li> <li>å‘ååˆ é™¤ï¼š<code>deleteContentBackward</code></li> <li>å‘å‰åˆ é™¤ï¼š<code>deleteContentForward</code></li></ul> <h4 id="ï¼ˆ3ï¼‰inputevent-datatransfer"><a href="#ï¼ˆ3ï¼‰inputevent-datatransfer" class="header-anchor">#</a> ï¼ˆ3ï¼‰InputEvent.dataTransfer</h4> <p><code>InputEvent.dataTransfer</code>å±æ€§<strong>è¿”å›ä¸€ä¸ª DataTransfer å®ä¾‹ã€‚è¯¥å±æ€§åªåœ¨æ–‡æœ¬æ¡†æ¥å—ç²˜è´´å†…å®¹ï¼ˆinsertFromPasteï¼‰æˆ–æ‹–æ‹½å†…å®¹ï¼ˆ<code>insertFromDrop</code>ï¼‰æ—¶æ‰æœ‰æ•ˆ</strong>ã€‚</p> <h2 id="å…«ã€è§¦æ‘¸äº‹ä»¶"><a href="#å…«ã€è§¦æ‘¸äº‹ä»¶" class="header-anchor">#</a> å…«ã€è§¦æ‘¸äº‹ä»¶</h2> <h3 id="_1ã€è§¦æ‘¸æ“ä½œæ¦‚è¿°"><a href="#_1ã€è§¦æ‘¸æ“ä½œæ¦‚è¿°" class="header-anchor">#</a> 1ã€è§¦æ‘¸æ“ä½œæ¦‚è¿°</h3> <p>æµè§ˆå™¨çš„è§¦æ‘¸ API ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆã€‚</p> <ul><li>Touchï¼šä¸€ä¸ªè§¦æ‘¸ç‚¹çš„å®ä¾‹</li> <li>TouchListï¼šå¤šä¸ªè§¦æ‘¸ç‚¹é›†åˆçš„å®ä¾‹</li> <li>TouchEventï¼šè§¦æ‘¸å¼•å‘çš„äº‹ä»¶å®ä¾‹</li></ul> <p><code>Touch</code>æ¥å£çš„å®ä¾‹å¯¹è±¡ç”¨æ¥è¡¨ç¤ºè§¦æ‘¸ç‚¹ï¼ˆä¸€æ ¹æ‰‹æŒ‡æˆ–è€…ä¸€æ ¹è§¦æ‘¸ç¬”ï¼‰ï¼ŒåŒ…æ‹¬<strong>ä½ç½®ã€å¤§å°ã€å½¢çŠ¶ã€å‹åŠ›ã€ç›®æ ‡å…ƒç´ ç­‰å±æ€§</strong>ã€‚æœ‰æ—¶ï¼Œè§¦æ‘¸åŠ¨ä½œç”±å¤šä¸ªè§¦æ‘¸ç‚¹ï¼ˆå¤šæ ¹æ‰‹æŒ‡ï¼‰ç»„æˆï¼Œå¤šä¸ªè§¦æ‘¸ç‚¹çš„é›†åˆç”±<code>TouchList</code>æ¥å£çš„å®ä¾‹å¯¹è±¡è¡¨ç¤ºã€‚<code>TouchEvent</code>æ¥å£çš„å®ä¾‹å¯¹è±¡ä»£è¡¨ç”±è§¦æ‘¸å¼•å‘çš„äº‹ä»¶ï¼Œåªæœ‰è§¦æ‘¸å±æ‰ä¼šå¼•å‘è¿™ä¸€ç±»äº‹ä»¶ã€‚</p> <p>å¾ˆå¤šæ—¶å€™ï¼Œ<strong>è§¦æ‘¸äº‹ä»¶å’Œé¼ æ ‡äº‹ä»¶åŒæ—¶è§¦å‘</strong>ï¼Œå³ä½¿è¿™ä¸ªæ—¶å€™å¹¶æ²¡æœ‰ç”¨åˆ°é¼ æ ‡ã€‚è¿™æ˜¯ä¸ºäº†è®©é‚£äº›åªå®šä¹‰é¼ æ ‡äº‹ä»¶ã€æ²¡æœ‰å®šä¹‰è§¦æ‘¸äº‹ä»¶çš„ä»£ç ï¼Œåœ¨è§¦æ‘¸å±çš„æƒ…å†µä¸‹ä»ç„¶èƒ½ç”¨ã€‚å¦‚æœæƒ³é¿å…è¿™ç§æƒ…å†µï¼Œ<strong>å¯ä»¥ç”¨<code>event.preventDefault</code>æ–¹æ³•é˜»æ­¢å‘å‡ºé¼ æ ‡äº‹ä»¶</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>TouchEvent <span class="token punctuation">{</span>isTrusted<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> touches<span class="token operator">:</span> TouchList<span class="token punctuation">,</span> targetTouches<span class="token operator">:</span> TouchList<span class="token punctuation">,</span> changedTouches<span class="token operator">:</span> TouchList<span class="token punctuation">,</span> altKey<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> â€¦<span class="token punctuation">}</span> <span class="token comment">// TouchEventæ¥å£ ï¼Œç»§æ‰¿Eventæ¥å£å±æ€§å’Œæ–¹æ³•</span>
    altKey<span class="token operator">:</span> <span class="token boolean">false</span>
    bubbles<span class="token operator">:</span> <span class="token boolean">true</span>
    cancelBubble<span class="token operator">:</span> <span class="token boolean">false</span>
    cancelable<span class="token operator">:</span> <span class="token boolean">false</span>
    changedTouches<span class="token operator">:</span> TouchList <span class="token comment">// TouchList æ¥å£ ï¼ˆæ‰€æœ‰è§¦æ‘¸ç‚¹é›†åˆï¼‰</span>
            <span class="token number">0</span><span class="token operator">:</span> Touch <span class="token comment">// Touch æ¥å£ ï¼ˆå•ä¸ªè§¦æ‘¸ç‚¹ï¼‰</span>
                clientX<span class="token operator">:</span> <span class="token number">232</span>
                clientY<span class="token operator">:</span> <span class="token number">96</span>
                force<span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">// è§¦æ‘¸å‹åŠ›</span>
                identifier<span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// å”¯ä¸€ID</span>
                pageX<span class="token operator">:</span> <span class="token number">232</span>
                pageY<span class="token operator">:</span> <span class="token number">96</span>
                radiusX<span class="token operator">:</span> <span class="token number">11.5</span>
                radiusY<span class="token operator">:</span> <span class="token number">11.5</span>
                region<span class="token operator">:</span> <span class="token keyword">null</span>
                rotationAngle<span class="token operator">:</span> <span class="token number">0</span>
                screenX<span class="token operator">:</span> <span class="token number">476</span>
                screenY<span class="token operator">:</span> <span class="token number">266</span>
                target<span class="token operator">:</span> html <span class="token comment">// è§¦æ‘¸ç›®æ ‡å…ƒç´ </span>
                __proto__<span class="token operator">:</span> Touch
                length<span class="token operator">:</span> <span class="token number">1</span>

    	__proto__<span class="token operator">:</span> TouchList
        
    composed<span class="token operator">:</span> <span class="token boolean">true</span>
    ctrlKey<span class="token operator">:</span> <span class="token boolean">false</span>
    currentTarget<span class="token operator">:</span> <span class="token keyword">null</span>
    defaultPrevented<span class="token operator">:</span> <span class="token boolean">false</span>
    detail<span class="token operator">:</span> <span class="token number">0</span>
    eventPhase<span class="token operator">:</span> <span class="token number">0</span>
    isTrusted<span class="token operator">:</span> <span class="token boolean">true</span>
    metaKey<span class="token operator">:</span> <span class="token boolean">false</span>
    path<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>html<span class="token punctuation">,</span> document<span class="token punctuation">,</span> Window<span class="token punctuation">]</span>
    returnValue<span class="token operator">:</span> <span class="token boolean">true</span>
    shiftKey<span class="token operator">:</span> <span class="token boolean">false</span>
    sourceCapabilities<span class="token operator">:</span> InputDeviceCapabilities <span class="token punctuation">{</span>firesTouchEvents<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
    srcElement<span class="token operator">:</span> html
    target<span class="token operator">:</span> html
    targetTouches<span class="token operator">:</span> TouchList <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> Touch<span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token comment">// TouchList æ¥å£ ï¼ˆæ‰€æœ‰è§¦æ‘¸ç‚¹é›†åˆï¼‰</span>
    timeStamp<span class="token operator">:</span> <span class="token number">994.1749999998137</span>
    touches<span class="token operator">:</span> TouchList <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> Touch<span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token comment">// TouchList æ¥å£ ï¼ˆæ‰€æœ‰è§¦æ‘¸ç‚¹é›†åˆï¼‰</span>
    type<span class="token operator">:</span> <span class="token string">&quot;touchmove&quot;</span> <span class="token comment">// å½“å‰è§¦æ‘¸äº‹ä»¶ç±»å‹</span>
    view<span class="token operator">:</span> Window <span class="token punctuation">{</span>postMessage<span class="token operator">:</span> Æ’<span class="token punctuation">,</span> blur<span class="token operator">:</span> Æ’<span class="token punctuation">,</span> focus<span class="token operator">:</span> Æ’<span class="token punctuation">,</span> close<span class="token operator">:</span> Æ’<span class="token punctuation">,</span> parent<span class="token operator">:</span> Window<span class="token punctuation">,</span> â€¦<span class="token punctuation">}</span>
    which<span class="token operator">:</span> <span class="token number">0</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="_2ã€touch-æ¥å£"><a href="#_2ã€touch-æ¥å£" class="header-anchor">#</a> 2ã€Touch æ¥å£</h3> <h4 id="_2-1-touch-æ¥å£æ¦‚è¿°-ï¼ˆå•ä¸ªè§¦æ‘¸ç‚¹ï¼‰"><a href="#_2-1-touch-æ¥å£æ¦‚è¿°-ï¼ˆå•ä¸ªè§¦æ‘¸ç‚¹ï¼‰" class="header-anchor">#</a> 2.1 Touch æ¥å£æ¦‚è¿° ï¼ˆå•ä¸ªè§¦æ‘¸ç‚¹ï¼‰</h4> <p>Touch æ¥å£<strong>ä»£è¡¨å•ä¸ªè§¦æ‘¸ç‚¹</strong>ã€‚è§¦æ‘¸ç‚¹å¯èƒ½æ˜¯ä¸€æ ¹æ‰‹æŒ‡ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€æ ¹è§¦æ‘¸ç¬”ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>Touch</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ<code>Touch</code>å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> touch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Touch</span><span class="token punctuation">(</span>touchOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>Touch</code>æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ª<strong>é…ç½®å¯¹è±¡ä½œä¸ºå‚æ•°</strong>ï¼Œå®ƒæœ‰ä»¥ä¸‹å±æ€§ã€‚</p> <ul><li><code>identifier</code>ï¼šå¿…éœ€ï¼Œç±»å‹ä¸ºæ•´æ•°ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹çš„å”¯ä¸€ IDã€‚</li> <li><code>target</code>ï¼šå¿…éœ€ï¼Œç±»å‹ä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹å¼€å§‹æ—¶æ‰€åœ¨çš„ç½‘é¡µå…ƒç´ ã€‚</li> <li><code>clientX</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºæµè§ˆå™¨çª—å£å·¦ä¸Šè§’çš„æ°´å¹³è·ç¦»ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>clientY</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºæµè§ˆå™¨çª—å£å·¦ä¸Šè§’çš„å‚ç›´è·ç¦»ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>screenX</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„æ°´å¹³è·ç¦»ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>screenY</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„å‚ç›´è·ç¦»ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>pageX</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºç½‘é¡µå·¦ä¸Šè§’çš„æ°´å¹³ä½ç½®ï¼ˆå³åŒ…æ‹¬é¡µé¢çš„æ»šåŠ¨è·ç¦»ï¼‰ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>pageY</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºç½‘é¡µå·¦ä¸Šè§’çš„å‚ç›´ä½ç½®ï¼ˆå³åŒ…æ‹¬é¡µé¢çš„æ»šåŠ¨è·ç¦»ï¼‰ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>radiusX</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹å‘¨å›´å—åˆ°å½±å“çš„æ¤­åœ†èŒƒå›´çš„ X è½´åŠå¾„ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>radiusY</code>ï¼šå¯é€‰ï¼šç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹å‘¨å›´å—åˆ°å½±å“çš„æ¤­åœ†èŒƒå›´çš„ Y è½´åŠå¾„ï¼Œé»˜è®¤ä¸º0ã€‚</li> <li><code>rotationAngle</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸åŒºåŸŸçš„æ¤­åœ†çš„æ—‹è½¬è§’åº¦ï¼Œå•ä½ä¸ºåº¦æ•°ï¼Œåœ¨0åˆ°90åº¦ä¹‹é—´ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</li> <li><code>force</code>ï¼šå¯é€‰ï¼Œç±»å‹ä¸ºæ•°å€¼ï¼ŒèŒƒå›´åœ¨<code>0</code>åˆ°<code>1</code>ä¹‹é—´ï¼Œè¡¨ç¤ºè§¦æ‘¸å‹åŠ›ã€‚<code>0</code>ä»£è¡¨æ²¡æœ‰å‹åŠ›ï¼Œ<code>1</code>ä»£è¡¨ç¡¬ä»¶æ‰€èƒ½è¯†åˆ«çš„æœ€å¤§å‹åŠ›ï¼Œé»˜è®¤ä¸º<code>0</code>ã€‚</li></ul> <h4 id="_2-2-touch-æ¥å£çš„å®ä¾‹å±æ€§"><a href="#_2-2-touch-æ¥å£çš„å®ä¾‹å±æ€§" class="header-anchor">#</a> 2.2 Touch æ¥å£çš„å®ä¾‹å±æ€§</h4> <h5 id="ï¼ˆ1ï¼‰touch-identifier-è§¦æ‘¸ç‚¹çš„id"><a href="#ï¼ˆ1ï¼‰touch-identifier-è§¦æ‘¸ç‚¹çš„id" class="header-anchor">#</a> ï¼ˆ1ï¼‰Touch.identifier è§¦æ‘¸ç‚¹çš„ID</h5> <p><code>Touch.identifier</code>å±æ€§è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè§¦æ‘¸ç‚¹çš„å”¯ä¸€ IDã€‚è¿™ä¸ªå€¼åœ¨æ•´ä¸ªè§¦æ‘¸è¿‡ç¨‹ä¿æŒä¸å˜ï¼Œç›´åˆ°è§¦æ‘¸äº‹ä»¶ç»“æŸã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>identifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="ï¼ˆ2ï¼‰touch-screenxï¼Œtouch-screenyï¼Œtouch-clientxï¼Œtouch-clientyï¼Œpagexï¼Œpagey-ï¼ˆç›¸å¯¹å±å¹•ã€æµè§ˆå™¨ã€æ–‡æ¡£çš„åæ ‡ï¼‰"><a href="#ï¼ˆ2ï¼‰touch-screenxï¼Œtouch-screenyï¼Œtouch-clientxï¼Œtouch-clientyï¼Œpagexï¼Œpagey-ï¼ˆç›¸å¯¹å±å¹•ã€æµè§ˆå™¨ã€æ–‡æ¡£çš„åæ ‡ï¼‰" class="header-anchor">#</a> ï¼ˆ2ï¼‰Touch.screenXï¼ŒTouch.screenYï¼ŒTouch.clientXï¼ŒTouch.clientYï¼ŒpageXï¼ŒpageY ï¼ˆç›¸å¯¹å±å¹•ã€æµè§ˆå™¨ã€æ–‡æ¡£çš„åæ ‡ï¼‰</h5> <p><code>Touch.screenX</code>å±æ€§å’Œ<code>Touch.screenY</code>å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼Œä¸é¡µé¢æ˜¯å¦æ»šåŠ¨æ— å…³ã€‚</p> <p><code>Touch.clientX</code>å±æ€§å’Œ<code>Touch.clientY</code>å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºæµè§ˆå™¨è§†å£å·¦ä¸Šè§’çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼Œä¸é¡µé¢æ˜¯å¦æ»šåŠ¨æ— å…³ã€‚</p> <p><code>Touch.pageX</code>å±æ€§å’Œ<code>Touch.pageY</code>å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºè§¦æ‘¸ç‚¹ç›¸å¯¹äºå½“å‰é¡µé¢å·¦ä¸Šè§’çš„æ¨ªåæ ‡å’Œçºµåæ ‡ï¼ŒåŒ…å«äº†é¡µé¢æ»šåŠ¨å¸¦æ¥çš„ä½ç§»ã€‚</p> <h5 id="ï¼ˆ3ï¼‰touch-radiusxï¼Œtouch-radiusyï¼Œtouch-rotationangle-ï¼ˆè§¦æ‘¸æ¤­åœ†åŒºåŸŸåŠå¾„ã€è§’åº¦ï¼‰"><a href="#ï¼ˆ3ï¼‰touch-radiusxï¼Œtouch-radiusyï¼Œtouch-rotationangle-ï¼ˆè§¦æ‘¸æ¤­åœ†åŒºåŸŸåŠå¾„ã€è§’åº¦ï¼‰" class="header-anchor">#</a> ï¼ˆ3ï¼‰Touch.radiusXï¼ŒTouch.radiusYï¼ŒTouch.rotationAngle ï¼ˆè§¦æ‘¸æ¤­åœ†åŒºåŸŸåŠå¾„ã€è§’åº¦ï¼‰</h5> <p><code>Touch.radiusX</code>å±æ€§å’Œ<code>Touch.radiusY</code>å±æ€§ï¼Œåˆ†åˆ«è¿”å›<strong>è§¦æ‘¸ç‚¹å‘¨å›´å—åˆ°å½±å“çš„æ¤­åœ†èŒƒå›´çš„ X è½´åŠå¾„å’Œ Y è½´åŠå¾„ï¼Œå•ä½ä¸ºåƒç´ ã€‚ä¹˜ä»¥ 2 å°±å¯ä»¥å¾—åˆ°è§¦æ‘¸èŒƒå›´çš„å®½åº¦å’Œé«˜åº¦</strong>ã€‚</p> <p><code>Touch.rotationAngle</code>å±æ€§è¡¨ç¤ºè§¦æ‘¸åŒºåŸŸçš„æ¤­åœ†çš„æ—‹è½¬è§’åº¦ï¼Œå•ä½ä¸ºåº¦æ•°ï¼Œåœ¨<code>0</code>åˆ°<code>90</code>åº¦ä¹‹é—´ã€‚</p> <p>ä¸Šé¢è¿™ä¸‰ä¸ªå±æ€§å…±åŒå®šä¹‰äº†<strong>ç”¨æˆ·ä¸å±å¹•æ¥è§¦çš„åŒºåŸŸ</strong>ï¼Œå¯¹äºæè¿°æ‰‹æŒ‡è¿™ä¸€ç±»éç²¾ç¡®çš„è§¦æ‘¸ï¼Œå¾ˆæœ‰å¸®åŠ©ã€‚æŒ‡å°–æ¥è§¦å±å¹•ï¼Œè§¦æ‘¸èŒƒå›´ä¼šå½¢æˆä¸€ä¸ªæ¤­åœ†ï¼Œè¿™ä¸‰ä¸ªå±æ€§å°±ç”¨æ¥æè¿°è¿™ä¸ªæ¤­åœ†åŒºåŸŸã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> rotate<span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> rotate<span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchend'</span><span class="token punctuation">,</span> rotate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> touch <span class="token operator">=</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  src<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> touch<span class="token punctuation">.</span>radiusX <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  src<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> touch<span class="token punctuation">.</span>radiusY <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  src<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'rotate('</span> <span class="token operator">+</span> touch<span class="token punctuation">.</span>rotationAngle <span class="token operator">+</span> <span class="token string">'deg)'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="ï¼ˆ4ï¼‰touch-force-è§¦æ‘¸å‹åŠ›"><a href="#ï¼ˆ4ï¼‰touch-force-è§¦æ‘¸å‹åŠ›" class="header-anchor">#</a> ï¼ˆ4ï¼‰Touch.force è§¦æ‘¸å‹åŠ›</h5> <p><code>Touch.force</code>å±æ€§è¿”å›ä¸€ä¸ª<code>0</code>åˆ°<code>1</code>ä¹‹é—´çš„æ•°å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸å‹åŠ›ã€‚<code>0</code>ä»£è¡¨æ²¡æœ‰å‹åŠ›ï¼Œ<code>1</code>ä»£è¡¨ç¡¬ä»¶æ‰€èƒ½è¯†åˆ«çš„æœ€å¤§å‹åŠ›ã€‚</p> <h5 id="ï¼ˆ5ï¼‰touch-target-å¼€å§‹è§¦æ‘¸æ—¶çš„å…ƒç´ "><a href="#ï¼ˆ5ï¼‰touch-target-å¼€å§‹è§¦æ‘¸æ—¶çš„å…ƒç´ " class="header-anchor">#</a> ï¼ˆ5ï¼‰Touch.target å¼€å§‹è§¦æ‘¸æ—¶çš„å…ƒç´ </h5> <p><code>Touch.target</code>å±æ€§è¿”å›ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼Œä»£è¡¨è§¦æ‘¸å‘ç”Ÿæ—¶æ‰€åœ¨çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚å³ä½¿è§¦æ‘¸ç‚¹å·²ç»ç¦»å¼€äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¯¥å±æ€§ä¾ç„¶ä¸å˜ã€‚</p> <h3 id="_3ã€touchlist-æ¥å£"><a href="#_3ã€touchlist-æ¥å£" class="header-anchor">#</a> 3ã€TouchList æ¥å£</h3> <p><code>TouchList</code>æ¥å£<strong>è¡¨ç¤ºä¸€ç»„è§¦æ‘¸ç‚¹çš„é›†åˆ</strong>ã€‚å®ƒçš„å®ä¾‹æ˜¯ä¸€ä¸ª<strong>ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</strong>ï¼Œæˆå‘˜æ˜¯<code>Touch</code>çš„å®ä¾‹å¯¹è±¡ï¼Œè¡¨ç¤ºæ‰€æœ‰è§¦æ‘¸ç‚¹ã€‚ç”¨æˆ·ç”¨ä¸‰æ ¹æ‰‹æŒ‡è§¦æ‘¸ï¼Œäº§ç”Ÿçš„<code>TouchList</code>å®ä¾‹å°±ä¼šåŒ…å«ä¸‰ä¸ªæˆå‘˜ï¼Œæ¯æ ¹æ‰‹æŒ‡çš„è§¦æ‘¸ç‚¹å¯¹åº”ä¸€ä¸ª<code>Touch</code>å®ä¾‹å¯¹è±¡ã€‚</p> <p>å®ƒçš„å®ä¾‹ä¸»è¦é€šè¿‡è§¦æ‘¸äº‹ä»¶çš„<code>TouchEvent.touches</code>ã€<code>TouchEvent.changedTouches</code>ã€<code>TouchEvent.targetTouches</code>è¿™å‡ ä¸ªå±æ€§è·å–ã€‚</p> <p>å®ƒçš„å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•åªæœ‰ä¸¤ä¸ªã€‚</p> <ul><li><code>TouchList.length</code>ï¼šæ•°å€¼ï¼Œè¡¨ç¤ºæˆå‘˜æ•°é‡ï¼ˆå³è§¦æ‘¸ç‚¹çš„æ•°é‡ï¼‰ã€‚</li> <li><code>TouchList.item()</code>ï¼šè¿”å›æŒ‡å®šä½ç½®çš„æˆå‘˜ï¼Œå®ƒçš„å‚æ•°æ˜¯è¯¥æˆå‘˜çš„ä½ç½®ç¼–å·ï¼ˆä»é›¶å¼€å§‹ï¼‰ã€‚</li></ul> <h3 id="_4ã€touchevent-æ¥å£"><a href="#_4ã€touchevent-æ¥å£" class="header-anchor">#</a> 4ã€TouchEvent æ¥å£</h3> <h4 id="_4-1-æ¦‚è¿°"><a href="#_4-1-æ¦‚è¿°" class="header-anchor">#</a> 4.1 æ¦‚è¿°</h4> <p>TouchEvent æ¥å£<strong>ç»§æ‰¿äº† Event æ¥å£</strong>ï¼Œè¡¨ç¤ºç”±<strong>è§¦æ‘¸å¼•å‘çš„äº‹ä»¶å®ä¾‹</strong>ï¼Œé€šå¸¸æ¥è‡ªè§¦æ‘¸å±æˆ–è½¨è¿¹æ¿ã€‚é™¤äº†è¢«ç»§æ‰¿çš„å±æ€§ä»¥å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€äº›è‡ªå·±çš„å±æ€§ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>TouchEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆè§¦æ‘¸äº‹ä»¶çš„å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">TouchEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>TouchEvent()</code>æ„é€ å‡½æ•°å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„é…ç½®å¯¹è±¡ï¼Œè¯¥å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯¹è±¡çš„æ‰€æœ‰å±æ€§ä¹Ÿæ˜¯å¯é€‰çš„ã€‚é™¤äº†<code>Event</code>æ¥å£çš„é…ç½®å±æ€§ï¼Œè¯¥æ¥å£è¿˜æœ‰ä¸€äº›è‡ªå·±çš„é…ç½®å±æ€§ã€‚</p> <ul><li><code>touches</code>ï¼š<code>TouchList</code>å®ä¾‹ï¼Œä»£è¡¨æ‰€æœ‰çš„å½“å‰å¤„äºæ´»è·ƒçŠ¶æ€çš„è§¦æ‘¸ç‚¹ï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºæ•°ç»„<code>[]</code>ã€‚</li> <li><code>targetTouches</code>ï¼š<code>TouchList</code>å®ä¾‹ï¼Œä»£è¡¨æ‰€æœ‰å¤„åœ¨è§¦æ‘¸çš„ç›®æ ‡å…ƒç´ èŠ‚ç‚¹å†…éƒ¨ã€ä¸”ä»ç„¶å¤„äºæ´»åŠ¨çŠ¶æ€çš„è§¦æ‘¸ç‚¹ï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºæ•°ç»„<code>[]</code>ã€‚</li> <li><code>changedTouches</code>ï¼š<code>TouchList</code>å®ä¾‹ï¼Œä»£è¡¨æœ¬æ¬¡è§¦æ‘¸äº‹ä»¶çš„ç›¸å…³è§¦æ‘¸ç‚¹ï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºæ•°ç»„<code>[]</code>ã€‚</li> <li><code>ctrlKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Ctrl é”®æ˜¯å¦åŒæ—¶æŒ‰ä¸‹ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>shiftKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Shift é”®æ˜¯å¦åŒæ—¶æŒ‰ä¸‹ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>altKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Alt é”®æ˜¯å¦åŒæ—¶æŒ‰ä¸‹ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li> <li><code>metaKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤º Meta é”®ï¼ˆæˆ– Windows é”®ï¼‰æ˜¯å¦åŒæ—¶æŒ‰ä¸‹ï¼Œé»˜è®¤å€¼ä¸º<code>false</code>ã€‚</li></ul> <h4 id="_4-2-å®ä¾‹å±æ€§"><a href="#_4-2-å®ä¾‹å±æ€§" class="header-anchor">#</a> 4.2 å®ä¾‹å±æ€§</h4> <p>TouchEvent æ¥å£çš„å®ä¾‹å…·æœ‰<code>Event</code>å®ä¾‹çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œæ­¤å¤–è¿˜æœ‰ä¸€äº›å®ƒè‡ªå·±çš„å®ä¾‹å±æ€§ï¼Œè¿™äº›å±æ€§å…¨éƒ¨éƒ½æ˜¯åªè¯»ã€‚</p> <h5 id="ï¼ˆ1ï¼‰touchevent-altkeyï¼Œtouchevent-ctrlkeyï¼Œtouchevent-shiftkeyï¼Œtouchevent-metakey-ï¼ˆæ˜¯å¦åŒæ—¶æŒ‰æŸäº›åŠŸèƒ½é”®ï¼‰"><a href="#ï¼ˆ1ï¼‰touchevent-altkeyï¼Œtouchevent-ctrlkeyï¼Œtouchevent-shiftkeyï¼Œtouchevent-metakey-ï¼ˆæ˜¯å¦åŒæ—¶æŒ‰æŸäº›åŠŸèƒ½é”®ï¼‰" class="header-anchor">#</a> ï¼ˆ1ï¼‰TouchEvent.altKeyï¼ŒTouchEvent.ctrlKeyï¼ŒTouchEvent.shiftKeyï¼ŒTouchEvent.metaKey ï¼ˆæ˜¯å¦åŒæ—¶æŒ‰æŸäº›åŠŸèƒ½é”®ï¼‰</h5> <ul><li><code>TouchEvent.altKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸æ—¶æ˜¯å¦æŒ‰ä¸‹äº† Alt é”®ã€‚</li> <li><code>TouchEvent.ctrlKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸æ—¶æ˜¯å¦æŒ‰ä¸‹äº† Ctrl é”®ã€‚</li> <li><code>TouchEvent.shiftKey</code>ï¼šå¸ƒå°”å€¼ï¼šè¡¨ç¤ºè§¦æ‘¸æ—¶æ˜¯å¦æŒ‰ä¸‹äº† Shift é”®ã€‚</li> <li><code>TouchEvent.metaKey</code>ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè§¦æ‘¸æ—¶æ˜¯å¦æŒ‰ä¸‹äº† Meta é”®ï¼ˆæˆ– Windows é”®ï¼‰ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'altKey = '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>altKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ctrlKey = '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>ctrlKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'metaKey = '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>metaKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'shiftKey = '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>shiftKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="ï¼ˆ2ï¼‰touchevent-changedtouches-ï¼ˆè§¦æ‘¸ç‚¹é›†åˆï¼Œä¸åŒè§¦æ‘¸äº‹ä»¶ï¼Œå«ä¹‰ä¸åŒï¼‰"><a href="#ï¼ˆ2ï¼‰touchevent-changedtouches-ï¼ˆè§¦æ‘¸ç‚¹é›†åˆï¼Œä¸åŒè§¦æ‘¸äº‹ä»¶ï¼Œå«ä¹‰ä¸åŒï¼‰" class="header-anchor">#</a> ï¼ˆ2ï¼‰TouchEvent.changedTouches ï¼ˆè§¦æ‘¸ç‚¹é›†åˆï¼Œä¸åŒè§¦æ‘¸äº‹ä»¶ï¼Œå«ä¹‰ä¸åŒï¼‰</h5> <p><code>TouchEvent.changedTouches</code>å±æ€§è¿”å›ä¸€ä¸ª<code>TouchList</code>å®ä¾‹ï¼Œæˆå‘˜æ˜¯ä¸€ç»„<code>Touch</code>å®ä¾‹å¯¹è±¡ï¼Œè¡¨ç¤ºæœ¬æ¬¡è§¦æ‘¸äº‹ä»¶çš„ç›¸å…³è§¦æ‘¸ç‚¹ã€‚</p> <p>å¯¹äº<strong>ä¸åŒçš„äº‹ä»¶ï¼Œè¯¥å±æ€§çš„å«ä¹‰æœ‰æ‰€ä¸åŒã€‚</strong></p> <ul><li><code>touchstart</code>äº‹ä»¶ï¼šè¢«æ¿€æ´»çš„è§¦æ‘¸ç‚¹</li> <li><code>touchmove</code>äº‹ä»¶ï¼šå‘ç”Ÿå˜åŒ–çš„è§¦æ‘¸ç‚¹</li> <li><code>touchend</code>äº‹ä»¶ï¼šæ¶ˆå¤±çš„è§¦æ‘¸ç‚¹ï¼ˆå³ä¸å†è¢«è§¦ç¢°çš„ç‚¹ï¼‰</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>changedTouches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>identifier<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="ï¼ˆ3ï¼‰touchevent-touches-ï¼ˆä»ç„¶æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰"><a href="#ï¼ˆ3ï¼‰touchevent-touches-ï¼ˆä»ç„¶æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰" class="header-anchor">#</a> ï¼ˆ3ï¼‰TouchEvent.touches ï¼ˆä»ç„¶æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰</h5> <p><code>TouchEvent.touches</code>å±æ€§è¿”å›ä¸€ä¸ª<code>TouchList</code>å®ä¾‹ï¼Œæˆå‘˜æ˜¯æ‰€æœ‰<strong>ä»ç„¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆå³è§¦æ‘¸ä¸­ï¼‰çš„è§¦æ‘¸ç‚¹</strong>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæ‰‹æŒ‡å°±æ˜¯ä¸€ä¸ªè§¦æ‘¸ç‚¹ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>someElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token function">handle_one_touch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸¤æ ¹æ‰‹æŒ‡è§¦æ‘¸</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token function">handle_two_touches</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token comment">// ä¸‰æ ¹æ‰‹æŒ‡è§¦æ‘¸</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token function">handle_three_touches</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token comment">// å…¶ä»–æƒ…å†µ</span>
    <span class="token keyword">default</span><span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Not supported'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="ï¼ˆ4ï¼‰touchevent-targettouches-ï¼ˆç›®æ ‡å…ƒç´ å†…æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰"><a href="#ï¼ˆ4ï¼‰touchevent-targettouches-ï¼ˆç›®æ ‡å…ƒç´ å†…æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰" class="header-anchor">#</a> ï¼ˆ4ï¼‰TouchEvent.targetTouches ï¼ˆç›®æ ‡å…ƒç´ å†…æ´»åŠ¨çš„è§¦æ‘¸ç‚¹é›†åˆï¼‰</h5> <p><code>TouchEvent.targetTouches</code>å±æ€§è¿”å›ä¸€ä¸ª<code>TouchList</code>å®ä¾‹ï¼Œæˆå‘˜æ˜¯<strong>è§¦æ‘¸äº‹ä»¶çš„ç›®æ ‡å…ƒç´ èŠ‚ç‚¹å†…éƒ¨ã€æ‰€æœ‰ä»ç„¶å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆå³è§¦æ‘¸ä¸­ï¼‰çš„è§¦æ‘¸ç‚¹</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">touches_in_target</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>ev<span class="token punctuation">.</span>touches<span class="token punctuation">.</span>length <span class="token operator">===</span> ev<span class="token punctuation">.</span>targetTouches<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ç”¨æ¥åˆ¤æ–­ï¼Œæ˜¯å¦æ‰€æœ‰è§¦æ‘¸ç‚¹éƒ½åœ¨ç›®æ ‡å…ƒç´ å†…ã€‚</p> <h3 id="_5ã€è§¦æ‘¸äº‹ä»¶çš„ç§ç±»"><a href="#_5ã€è§¦æ‘¸äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 5ã€è§¦æ‘¸äº‹ä»¶çš„ç§ç±»</h3> <p>è§¦æ‘¸å¼•å‘çš„äº‹ä»¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ã€‚å¯ä»¥é€šè¿‡<code>TouchEvent.type</code>å±æ€§ï¼ŒæŸ¥çœ‹åˆ°åº•å‘ç”Ÿçš„æ˜¯å“ªä¸€ç§äº‹ä»¶ã€‚</p> <ul><li><code>touchstart</code>ï¼šç”¨æˆ·å¼€å§‹è§¦æ‘¸æ—¶è§¦å‘ï¼Œå®ƒçš„<code>target</code>å±æ€§è¿”å›å‘ç”Ÿè§¦æ‘¸çš„å…ƒç´ èŠ‚ç‚¹ã€‚<strong>ã€å¼€å§‹è§¦æ‘¸ã€‘</strong></li> <li><code>touchend</code>ï¼šç”¨æˆ·ä¸å†æ¥è§¦è§¦æ‘¸å±æ—¶ï¼ˆæˆ–è€…ç§»å‡ºå±å¹•è¾¹ç¼˜æ—¶ï¼‰è§¦å‘ï¼Œå®ƒçš„<code>target</code>å±æ€§ä¸<code>touchstart</code>äº‹ä»¶ä¸€è‡´çš„ï¼Œå°±æ˜¯å¼€å§‹è§¦æ‘¸æ—¶æ‰€åœ¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚å®ƒçš„<code>changedTouches</code>å±æ€§è¿”å›ä¸€ä¸ª<code>TouchList</code>å®ä¾‹ï¼ŒåŒ…å«æ‰€æœ‰ä¸å†è§¦æ‘¸çš„è§¦æ‘¸ç‚¹ï¼ˆå³<code>Touch</code>å®ä¾‹å¯¹è±¡ï¼‰ã€‚<strong>ã€è§¦æ‘¸ç»“æŸã€‘</strong></li> <li><code>touchmove</code>ï¼šç”¨æˆ·ç§»åŠ¨è§¦æ‘¸ç‚¹æ—¶è§¦å‘ï¼Œå®ƒçš„<code>target</code>å±æ€§ä¸<code>touchstart</code>äº‹ä»¶ä¸€è‡´ã€‚å¦‚æœè§¦æ‘¸çš„åŠå¾„ã€è§’åº¦ã€åŠ›åº¦å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚<strong>ã€è§¦æ‘¸ç§»åŠ¨ä¸­ã€‘</strong></li> <li><code>touchcancel</code>ï¼šè§¦æ‘¸ç‚¹å–æ¶ˆæ—¶è§¦å‘ï¼Œæ¯”å¦‚åœ¨è§¦æ‘¸åŒºåŸŸè·³å‡ºä¸€ä¸ªæ¨¡æ€çª—å£ï¼ˆmodal windowï¼‰ã€è§¦æ‘¸ç‚¹ç¦»å¼€äº†æ–‡æ¡£åŒºåŸŸï¼ˆè¿›å…¥æµè§ˆå™¨èœå•æ ï¼‰ã€ç”¨æˆ·çš„è§¦æ‘¸ç‚¹å¤ªå¤šï¼Œè¶…è¿‡äº†æ”¯æŒçš„ä¸Šé™ï¼ˆè‡ªåŠ¨å–æ¶ˆæ—©å…ˆçš„è§¦æ‘¸ç‚¹ï¼‰ã€‚<strong>ã€è§¦æ‘¸ç‚¹è¢«å–æ¶ˆã€‘</strong></li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> handleStart<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> handleMove<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">handleStart</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> touches <span class="token operator">=</span> evt<span class="token punctuation">.</span>changedTouches<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> touches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>touches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> touches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">handleMove</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> touches <span class="token operator">=</span> evt<span class="token punctuation">.</span>changedTouches<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> touches<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> touch <span class="token operator">=</span> touches<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>touch<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span> touch<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="ä¹ã€æ‹–æ‹‰äº‹ä»¶"><a href="#ä¹ã€æ‹–æ‹‰äº‹ä»¶" class="header-anchor">#</a> ä¹ã€æ‹–æ‹‰äº‹ä»¶</h2> <h3 id="_1ã€æ‹–æ‹‰äº‹ä»¶çš„ç§ç±»"><a href="#_1ã€æ‹–æ‹‰äº‹ä»¶çš„ç§ç±»" class="header-anchor">#</a> 1ã€æ‹–æ‹‰äº‹ä»¶çš„ç§ç±»</h3> <p>æ‹–æ‹‰ï¼ˆdragï¼‰æŒ‡çš„æ˜¯ï¼Œ<strong>ç”¨æˆ·åœ¨æŸä¸ªå¯¹è±¡ä¸ŠæŒ‰ä¸‹é¼ æ ‡é”®ä¸æ”¾ï¼Œæ‹–åŠ¨å®ƒåˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œç„¶åé‡Šæ”¾é¼ æ ‡é”®ï¼Œå°†è¯¥å¯¹è±¡æ”¾åœ¨é‚£é‡Œ</strong>ã€‚</p> <p>æ‹–æ‹‰çš„å¯¹è±¡æœ‰å¥½å‡ ç§ï¼ŒåŒ…æ‹¬<strong>å…ƒç´ èŠ‚ç‚¹ã€å›¾ç‰‡ã€é“¾æ¥ã€é€‰ä¸­çš„æ–‡å­—ç­‰ç­‰</strong>ã€‚åœ¨ç½‘é¡µä¸­ï¼Œé™¤äº†å…ƒç´ èŠ‚ç‚¹é»˜è®¤ä¸å¯ä»¥æ‹–æ‹‰ï¼Œå…¶ä»–ï¼ˆå›¾ç‰‡ã€é“¾æ¥ã€é€‰ä¸­çš„æ–‡å­—ï¼‰éƒ½æ˜¯å¯ä»¥ç›´æ¥æ‹–æ‹‰çš„ã€‚ä¸ºäº†è®©å…ƒç´ èŠ‚ç‚¹å¯æ‹–æ‹‰ï¼Œå¯ä»¥å°†è¯¥èŠ‚ç‚¹çš„<code>draggable</code>å±æ€§è®¾ä¸º<code>true</code>ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  æ­¤åŒºåŸŸå¯æ‹–æ‹‰
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>draggable</code>å±æ€§<strong>å¯ç”¨äºä»»ä½•å…ƒç´ èŠ‚ç‚¹</strong>ï¼Œä½†æ˜¯å›¾ç‰‡ï¼ˆ<code>&lt;img&gt;</code>ï¼‰å’Œé“¾æ¥ï¼ˆ<code>&lt;a&gt;</code>ï¼‰ä¸åŠ è¿™ä¸ªå±æ€§ï¼Œå°±å¯ä»¥æ‹–æ‹‰ã€‚å¯¹äºå®ƒä»¬ï¼Œç”¨åˆ°è¿™ä¸ªå±æ€§çš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯å°†å…¶è®¾ä¸º<code>false</code>ï¼Œé˜²æ­¢æ‹–æ‹‰è¿™ä¸¤ç§å…ƒç´ ã€‚</p> <p><strong>æ³¨æ„</strong>ï¼Œä¸€æ—¦æŸä¸ªå…ƒç´ èŠ‚ç‚¹çš„<code>draggable</code>å±æ€§è®¾ä¸º<code>true</code>ï¼Œ<strong>å°±æ— æ³•å†ç”¨é¼ æ ‡é€‰ä¸­è¯¥èŠ‚ç‚¹å†…éƒ¨çš„æ–‡å­—æˆ–å­èŠ‚ç‚¹</strong>äº†ã€‚</p> <p>å½“å…ƒç´ èŠ‚ç‚¹æˆ–é€‰ä¸­çš„æ–‡æœ¬è¢«æ‹–æ‹‰æ—¶ï¼Œå°±<strong>ä¼šæŒç»­è§¦å‘æ‹–æ‹‰äº‹ä»¶</strong>ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ä¸€äº›äº‹ä»¶ã€‚</p> <p><strong>æ‹–æ‹‰çš„èŠ‚ç‚¹ä¸Šè§¦å‘ï¼š</strong></p> <ul><li><code>drag</code>ï¼š<strong>æ‹–æ‹‰è¿‡ç¨‹ä¸­</strong>ï¼Œåœ¨è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ä¸Š<strong>æŒç»­è§¦å‘</strong>ï¼ˆç›¸éš”å‡ ç™¾æ¯«ç§’ï¼‰ã€‚</li> <li><code>dragstart</code>ï¼šç”¨æˆ·<strong>å¼€å§‹æ‹–æ‹‰æ—¶</strong>ï¼Œåœ¨è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œè¯¥äº‹ä»¶çš„<code>target</code>å±æ€§æ˜¯è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ã€‚é€šå¸¸åº”è¯¥åœ¨è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¸­ï¼ŒæŒ‡å®šæ‹–æ‹‰çš„æ•°æ®ã€‚</li> <li><code>dragend</code>ï¼š<strong>æ‹–æ‹‰ç»“æŸæ—¶</strong>ï¼ˆé‡Šæ”¾é¼ æ ‡é”®æˆ–æŒ‰ä¸‹ ESC é”®ï¼‰åœ¨è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œè¯¥äº‹ä»¶çš„<code>target</code>å±æ€§æ˜¯è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ã€‚å®ƒä¸<code>dragstart</code>äº‹ä»¶ï¼Œåœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šè§¦å‘ã€‚ä¸ç®¡æ‹–æ‹‰æ˜¯å¦è·¨çª—å£ï¼Œæˆ–è€…ä¸­é€”è¢«å–æ¶ˆï¼Œ<code>dragend</code>äº‹ä»¶æ€»æ˜¯ä¼šè§¦å‘çš„ã€‚</li></ul> <p><strong>æ‹–æ‹‰åˆ°åˆ«çš„èŠ‚ç‚¹ä¸Šè§¦å‘ï¼š</strong></p> <ul><li><p><code>dragenter</code>ï¼š<strong>æ‹–æ‹‰è¿›å…¥å½“å‰èŠ‚ç‚¹</strong>æ—¶ï¼Œ<strong>åœ¨å½“å‰èŠ‚ç‚¹ä¸Šè§¦å‘ä¸€æ¬¡</strong>ï¼Œè¯¥äº‹ä»¶çš„<code>target</code>å±æ€§æ˜¯å½“å‰èŠ‚ç‚¹ã€‚é€šå¸¸åº”è¯¥åœ¨è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¸­ï¼Œ<strong>æŒ‡å®šæ˜¯å¦å…è®¸åœ¨å½“å‰èŠ‚ç‚¹æ”¾ä¸‹ï¼ˆdropï¼‰æ‹–æ‹‰çš„æ•°æ®</strong>ã€‚å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰è¯¥äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œæˆ–è€…ç›‘å¬å‡½æ•°ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼Œå°±æ„å‘³ç€ä¸å…è®¸åœ¨å½“å‰èŠ‚ç‚¹æ”¾ä¸‹æ•°æ®ã€‚åœ¨è§†è§‰ä¸Šæ˜¾ç¤ºæ‹–æ‹‰è¿›å…¥å½“å‰èŠ‚ç‚¹ï¼Œä¹Ÿæ˜¯åœ¨è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¸­è®¾ç½®ã€‚</p></li> <li><p><code>dragover</code>ï¼š<strong>æ‹–æ‹‰åˆ°å½“å‰èŠ‚ç‚¹ä¸Šæ–¹æ—¶</strong>ï¼Œåœ¨å½“å‰èŠ‚ç‚¹ä¸Š<strong>æŒç»­è§¦å‘</strong>ï¼ˆç›¸éš”å‡ ç™¾æ¯«ç§’ï¼‰ï¼Œè¯¥äº‹ä»¶çš„<code>target</code>å±æ€§æ˜¯å½“å‰èŠ‚ç‚¹ã€‚è¯¥äº‹ä»¶ä¸<code>dragenter</code>äº‹ä»¶çš„åŒºåˆ«æ˜¯ï¼Œ<code>dragenter</code>äº‹ä»¶åœ¨è¿›å…¥è¯¥èŠ‚ç‚¹æ—¶è§¦å‘ï¼Œç„¶ååªè¦æ²¡æœ‰ç¦»å¼€è¿™ä¸ªèŠ‚ç‚¹ï¼Œ<code>dragover</code>äº‹ä»¶ä¼šæŒç»­è§¦å‘ã€‚</p></li> <li><p><code>dragleave</code>ï¼š<strong>æ‹–æ‹‰æ“ä½œç¦»å¼€å½“å‰èŠ‚ç‚¹èŒƒå›´æ—¶</strong>ï¼Œåœ¨å½“å‰èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œè¯¥äº‹ä»¶çš„<code>target</code>å±æ€§æ˜¯å½“å‰èŠ‚ç‚¹ã€‚å¦‚æœè¦åœ¨è§†è§‰ä¸Šæ˜¾ç¤ºæ‹–æ‹‰ç¦»å¼€æ“ä½œå½“å‰èŠ‚ç‚¹ï¼Œå°±åœ¨è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¸­è®¾ç½®ã€‚</p></li> <li><p><code>drop</code>ï¼šè¢«æ‹–æ‹‰çš„èŠ‚ç‚¹æˆ–é€‰ä¸­çš„æ–‡æœ¬ï¼Œ<strong>é‡Šæ”¾åˆ°ç›®æ ‡èŠ‚ç‚¹æ—¶ï¼Œåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘</strong>ã€‚æ³¨æ„ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹ä¸å…è®¸<code>drop</code>ï¼Œå³ä½¿åœ¨è¯¥èŠ‚ç‚¹ä¸Šæ–¹æ¾å¼€é¼ æ ‡é”®ï¼Œä¹Ÿä¸ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚å¦‚æœç”¨æˆ·æŒ‰ä¸‹ ESC é”®ï¼Œå–æ¶ˆè¿™ä¸ªæ“ä½œï¼Œä¹Ÿä¸ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚è¯¥äº‹ä»¶çš„ç›‘å¬å‡½æ•°è´Ÿè´£å–å‡ºæ‹–æ‹‰æ•°æ®ï¼Œå¹¶è¿›è¡Œç›¸å…³å¤„ç†ã€‚</p></li></ul> <p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºï¼Œå¦‚ä½•åŠ¨æ€æ”¹å˜è¢«æ‹–åŠ¨èŠ‚ç‚¹çš„èƒŒæ™¯è‰²ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>div</code>èŠ‚ç‚¹è¢«æ‹–åŠ¨æ—¶ï¼ŒèƒŒæ™¯è‰²ä¼šå˜ä¸ºçº¢è‰²ï¼Œæ‹–åŠ¨ç»“æŸï¼Œåˆå˜å›ç»¿è‰²ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    div1ï¼Œæ­¤åŒºåŸŸå¯æ‹–æ‹‰
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    div2
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> div1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.div1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> div2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.div2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    div1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹æ‹–æ‹‰'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drag'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ‹–æ‹‰ä¸­'</span><span class="token punctuation">)</span> <span class="token comment">// æŒç»­è§¦å‘</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    div1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç»“æŸæ‹–æ‹‰'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ‹–åˆ°äº†div2'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//console.log('æ­£åœ¨div2ä¸Šæ–¹') // æŒç»­è§¦å‘</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¦»å¼€div2'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    div2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'åœ¨div2ä¸Šé‡Šæ”¾'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•å®ç°å°†ä¸€ä¸ªèŠ‚ç‚¹ä»å½“å‰çˆ¶èŠ‚ç‚¹ï¼Œæ‹–æ‹‰åˆ°å¦ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
 &lt;div class=&quot;dropzone&quot;&gt;
   &lt;div id=&quot;draggable&quot; draggable=&quot;true&quot;&gt;
     è¯¥èŠ‚ç‚¹å¯æ‹–æ‹‰
   &lt;/div&gt;
 &lt;/div&gt;
 &lt;div class=&quot;dropzone&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;dropzone&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;dropzone&quot;&gt;&lt;/div&gt;
*/</span>

<span class="token comment">// è¢«æ‹–æ‹‰èŠ‚ç‚¹</span>
<span class="token keyword">var</span> dragged<span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¿å­˜è¢«æ‹–æ‹‰èŠ‚ç‚¹</span>
  dragged <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
  <span class="token comment">// è¢«æ‹–æ‹‰èŠ‚ç‚¹çš„èƒŒæ™¯è‰²å˜é€æ˜</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¢«æ‹–æ‹‰èŠ‚ç‚¹çš„èƒŒæ™¯è‰²æ¢å¤æ­£å¸¸</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é˜²æ­¢æ‹–æ‹‰æ•ˆæœè¢«é‡ç½®ï¼Œå…è®¸è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹æ”¾å…¥ç›®æ ‡èŠ‚ç‚¹</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›®æ ‡èŠ‚ç‚¹çš„èƒŒæ™¯è‰²å˜ç´«è‰²</span>
  <span class="token comment">// ç”±äºè¯¥äº‹ä»¶ä¼šå†’æ³¡ï¼Œæ‰€ä»¥è¦è¿‡æ»¤èŠ‚ç‚¹</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'dropzone'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'purple'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç›®æ ‡èŠ‚ç‚¹çš„èƒŒæ™¯è‰²æ¢å¤åŸæ ·</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'dropzone'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é˜²æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼ˆæ¯”å¦‚æŸäº›å…ƒç´ èŠ‚ç‚¹ä¸Šå¯ä»¥æ‰“å¼€é“¾æ¥ï¼‰ï¼Œ</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'dropzone'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¢å¤ç›®æ ‡èŠ‚ç‚¹èƒŒæ™¯è‰²</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token comment">// å°†è¢«æ‹–æ‹‰èŠ‚ç‚¹æ’å…¥ç›®æ ‡èŠ‚ç‚¹</span>
    dragged<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>dragged<span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> dragged <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>å…³äºæ‹–æ‹‰äº‹ä»¶ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ³¨æ„ç‚¹ã€‚</p> <ul><li>æ‹–æ‹‰è¿‡ç¨‹åªè§¦å‘ä»¥ä¸Šè¿™äº›æ‹–æ‹‰äº‹ä»¶ï¼Œå°½ç®¡é¼ æ ‡åœ¨ç§»åŠ¨ï¼Œä½†æ˜¯<strong>é¼ æ ‡äº‹ä»¶ä¸ä¼šè§¦å‘</strong>ã€‚</li> <li>å°†æ–‡ä»¶ä»æ“ä½œç³»ç»Ÿæ‹–æ‹‰è¿›æµè§ˆå™¨ï¼Œä¸ä¼šè§¦å‘<code>dragstart</code>å’Œ<code>dragend</code>äº‹ä»¶ã€‚</li> <li><code>dragenter</code>å’Œ<code>dragover</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œç”¨æ¥å–å‡ºæ‹–æ‹‰çš„æ•°æ®ï¼ˆå³å…è®¸æ”¾ä¸‹è¢«æ‹–æ‹‰çš„å…ƒç´ ï¼‰ã€‚ç”±äºç½‘é¡µçš„å¤§éƒ¨åˆ†åŒºåŸŸä¸é€‚åˆä½œä¸ºæ”¾ä¸‹æ‹–æ‹‰å…ƒç´ çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªäº‹ä»¶çš„é»˜è®¤è®¾ç½®ä¸ºå½“å‰èŠ‚ç‚¹ä¸å…è®¸æ¥å—è¢«æ‹–æ‹‰çš„å…ƒç´ ã€‚<strong>å¦‚æœæƒ³è¦åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šæ”¾ä¸‹çš„æ•°æ®ï¼Œé¦–å…ˆå¿…é¡»é˜»æ­¢è¿™ä¸¤ä¸ªäº‹ä»¶çš„é»˜è®¤è¡Œä¸º</strong>ã€‚</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ondragover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>return false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ondragover</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>event.preventDefault()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸å–æ¶ˆæ‹–æ‹‰äº‹ä»¶æˆ–è€…é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œå°±ä¸èƒ½åœ¨<code>div</code>èŠ‚ç‚¹ä¸Šæ”¾ä¸‹è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹ã€‚</p> <h3 id="_2ã€dragevent-æ¥å£"><a href="#_2ã€dragevent-æ¥å£" class="header-anchor">#</a> 2ã€DragEvent æ¥å£</h3> <p><strong>æ‹–æ‹‰äº‹ä»¶éƒ½ç»§æ‰¿äº†<code>DragEvent</code>æ¥å£ï¼Œè¿™ä¸ªæ¥å£åˆç»§æ‰¿äº†<code>MouseEvent</code>æ¥å£å’Œ<code>Event</code>æ¥å£ã€‚</strong></p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›ä¸€ä¸ª<code>DragEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆæ‹–æ‹‰äº‹ä»¶çš„å®ä¾‹å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">DragEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>DragEvent()</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong>å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„ç±»å‹</strong>ï¼Œè¯¥å‚æ•°å¿…é¡»ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„<strong>é…ç½®å¯¹è±¡</strong>ï¼Œç”¨æ¥è®¾ç½®äº‹ä»¶çš„å±æ€§ï¼Œè¯¥å‚æ•°å¯é€‰ã€‚é…ç½®å¯¹è±¡é™¤äº†æ¥å—<code>MouseEvent</code>æ¥å£å’Œ<code>Event</code>æ¥å£çš„é…ç½®å±æ€§ï¼Œè¿˜å¯ä»¥<strong>è®¾ç½®<code>dataTransfer</code>å±æ€§è¦ä¹ˆæ˜¯<code>null</code>ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ª<code>DataTransfer</code>æ¥å£çš„å®ä¾‹ã€‚</strong></p> <p><code>DataTransfer</code>çš„å®ä¾‹å¯¹è±¡ç”¨æ¥è¯»å†™æ‹–æ‹‰äº‹ä»¶ä¸­ä¼ è¾“çš„æ•°æ®ï¼Œè¯¦è§ä¸‹æ–‡ã€ŠDataTransfer æ¥å£ã€‹çš„éƒ¨åˆ†ã€‚</p> <h3 id="_3ã€datatransfer-æ¥å£æ¦‚è¿°"><a href="#_3ã€datatransfer-æ¥å£æ¦‚è¿°" class="header-anchor">#</a> 3ã€DataTransfer æ¥å£æ¦‚è¿°</h3> <p><strong>æ‰€æœ‰æ‹–æ‹‰äº‹ä»¶çš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ª<code>DragEvent.dataTransfer</code>å±æ€§ï¼Œç”¨æ¥è¯»å†™éœ€è¦ä¼ é€’çš„æ•°æ®</strong>ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ª<code>DataTransfer</code>æ¥å£çš„å®ä¾‹ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›ä¸€ä¸ª<code>DataTransfer()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ<code>DataTransfer</code>å®ä¾‹å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dataTrans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataTransfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>DataTransfer()</code>æ„é€ å‡½æ•°<strong>ä¸æ¥å—å‚æ•°</strong>ã€‚</p> <p>æ‹–æ‹‰çš„æ•°æ®åˆ†æˆä¸¤æ–¹é¢ï¼š<strong>æ•°æ®çš„ç§ç±»ï¼ˆåˆç§°æ ¼å¼ï¼‰å’Œæ•°æ®çš„å€¼</strong>ã€‚æ•°æ®çš„ç§ç±»æ˜¯ä¸€ä¸ª MIME å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚<code>text/plain</code>ã€<code>image/jpeg</code>ï¼‰ï¼Œæ•°æ®çš„å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ‹–æ‹‰ä¸€æ®µæ–‡æœ¬ï¼Œåˆ™æ•°æ®é»˜è®¤å°±æ˜¯é‚£æ®µæ–‡æœ¬ï¼›å¦‚æœæ‹–æ‹‰ä¸€ä¸ªé“¾æ¥ï¼Œåˆ™æ•°æ®é»˜è®¤å°±æ˜¯é“¾æ¥çš„ URLã€‚</p> <p>æ‹–æ‹‰äº‹ä»¶å¼€å§‹æ—¶ï¼Œå¼€å‘è€…å¯ä»¥æä¾›æ•°æ®ç±»å‹å’Œæ•°æ®å€¼ã€‚æ‹–æ‹‰è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…é€šè¿‡<code>dragenter</code>å’Œ<code>dragover</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œæ£€æŸ¥æ•°æ®ç±»å‹ï¼Œä»¥ç¡®å®šæ˜¯å¦å…è®¸æ”¾ä¸‹ï¼ˆdropï¼‰è¢«æ‹–æ‹‰çš„å¯¹è±¡ã€‚æ¯”å¦‚ï¼Œåœ¨åªå…è®¸æ”¾ä¸‹é“¾æ¥çš„åŒºåŸŸï¼Œæ£€æŸ¥æ‹–æ‹‰çš„æ•°æ®ç±»å‹æ˜¯å¦ä¸º<code>text/uri-list</code>ã€‚</p> <p><strong>å‘ç”Ÿ<code>drop</code>äº‹ä»¶æ—¶ï¼Œç›‘å¬å‡½æ•°å–å‡ºæ‹–æ‹‰çš„æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œå¤„ç†ã€‚</strong></p> <h3 id="_4ã€datatransfer-çš„å®ä¾‹å±æ€§"><a href="#_4ã€datatransfer-çš„å®ä¾‹å±æ€§" class="header-anchor">#</a> 4ã€DataTransfer çš„å®ä¾‹å±æ€§</h3> <h4 id="_4-1-datatransfer-dropeffect-è®¾ç½®æ¥å—æ‹–æ‹‰çš„åŒºåŸŸçš„æ•ˆæœ"><a href="#_4-1-datatransfer-dropeffect-è®¾ç½®æ¥å—æ‹–æ‹‰çš„åŒºåŸŸçš„æ•ˆæœ" class="header-anchor">#</a> 4.1 DataTransfer.dropEffect è®¾ç½®æ¥å—æ‹–æ‹‰çš„åŒºåŸŸçš„æ•ˆæœ</h4> <p><code>DataTransfer.dropEffect</code>å±æ€§<strong>ç”¨æ¥è®¾ç½®æ”¾ä¸‹ï¼ˆdropï¼‰è¢«æ‹–æ‹‰èŠ‚ç‚¹æ—¶çš„æ•ˆæœ</strong>ï¼Œä¼šå½±å“åˆ°æ‹–æ‹‰ç»è¿‡ç›¸å…³åŒºåŸŸæ—¶é¼ æ ‡çš„å½¢çŠ¶ã€‚å®ƒå¯èƒ½å–ä¸‹é¢çš„å€¼ã€‚</p> <ul><li>copyï¼šå¤åˆ¶è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li> <li>moveï¼šç§»åŠ¨è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li> <li>linkï¼šåˆ›å»ºæŒ‡å‘è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹çš„é“¾æ¥</li> <li>noneï¼šæ— æ³•æ”¾ä¸‹è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li></ul> <p>é™¤äº†ä¸Šé¢è¿™äº›å€¼ï¼Œè®¾ç½®å…¶ä»–çš„å€¼éƒ½æ˜¯æ— æ•ˆçš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">'copy'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¢«æ‹–æ‹‰å…ƒç´ ä¸€æ—¦<code>drop</code>ï¼Œæ¥å—çš„åŒºåŸŸä¼šå¤åˆ¶è¯¥èŠ‚ç‚¹ã€‚</p> <p><code>dropEffect</code>å±æ€§ä¸€èˆ¬<strong>åœ¨<code>dragenter</code>å’Œ<code>dragover</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¸­è®¾ç½®</strong>ï¼Œå¯¹äº<code>dragstart</code>ã€<code>drag</code>ã€<code>dragleave</code>è¿™ä¸‰ä¸ªäº‹ä»¶ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚å› ä¸ºè¯¥å±æ€§åªå¯¹æ¥å—è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹çš„åŒºåŸŸæœ‰æ•ˆï¼Œå¯¹è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹æœ¬èº«æ˜¯æ— æ•ˆçš„ã€‚è¿›å…¥ç›®æ ‡åŒºåŸŸåï¼Œæ‹–æ‹‰è¡Œä¸ºä¼šåˆå§‹åŒ–æˆè®¾å®šçš„æ•ˆæœã€‚</p> <h4 id="_4-2-datatransfer-effectallowed-è®¾ç½®è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹å…è®¸çš„æ•ˆæœ"><a href="#_4-2-datatransfer-effectallowed-è®¾ç½®è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹å…è®¸çš„æ•ˆæœ" class="header-anchor">#</a> 4.2 DataTransfer.effectAllowed è®¾ç½®è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹å…è®¸çš„æ•ˆæœ</h4> <p><code>DataTransfer.effectAllowed</code>å±æ€§<strong>è®¾ç½®æœ¬æ¬¡æ‹–æ‹‰ä¸­å…è®¸çš„æ•ˆæœ</strong>ã€‚å®ƒå¯èƒ½å–ä¸‹é¢çš„å€¼ã€‚</p> <ul><li>copyï¼šå¤åˆ¶è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li> <li>moveï¼šç§»åŠ¨è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li> <li>linkï¼šåˆ›å»ºæŒ‡å‘è¢«æ‹–æ‹‰èŠ‚ç‚¹çš„é“¾æ¥</li> <li>copyLinkï¼šå…è®¸<code>copy</code>æˆ–<code>link</code></li> <li>copyMoveï¼šå…è®¸<code>copy</code>æˆ–<code>move</code></li> <li>linkMoveï¼šå…è®¸<code>link</code>æˆ–<code>move</code></li> <li>allï¼šå…è®¸æ‰€æœ‰æ•ˆæœ</li> <li>noneï¼šæ— æ³•æ”¾ä¸‹è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹</li> <li>uninitializedï¼šé»˜è®¤å€¼ï¼Œç­‰åŒäº<code>all</code></li></ul> <p>å¦‚æœæŸç§æ•ˆæœæ˜¯ä¸å…è®¸çš„ï¼Œç”¨æˆ·å°±æ— æ³•åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸­è¾¾æˆè¿™ç§æ•ˆæœã€‚</p> <p><strong>è¿™ä¸ªå±æ€§ä¸<code>dropEffect</code>å±æ€§æ˜¯åŒä¸€ä»¶äº‹çš„ä¸¤ä¸ªæ–¹é¢ã€‚å‰è€…è®¾ç½®è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹å…è®¸çš„æ•ˆæœï¼Œåè€…è®¾ç½®æ¥å—æ‹–æ‹‰çš„åŒºåŸŸçš„æ•ˆæœï¼Œå®ƒä»¬å¾€å¾€é…åˆä½¿ç”¨ã€‚</strong></p> <p><strong><code>dragstart</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®è¿™ä¸ªå±æ€§</strong>ã€‚å…¶ä»–äº‹ä»¶çš„ç›‘å¬å‡½æ•°é‡Œé¢è®¾ç½®è¿™ä¸ªå±æ€§æ˜¯æ— æ•ˆçš„ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>source<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è¢«æ‹–æ‹‰èŠ‚ç‚¹ä¸Šè®¾ç½®</span>
  e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>effectAllowed <span class="token operator">=</span> <span class="token string">'move'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

target<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ¥å—åŒºåŸŸèŠ‚ç‚¹ä¸Šè®¾ç½®</span>
  e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>dropEffect <span class="token operator">=</span> <span class="token string">'move'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åªè¦<code>dropEffect</code>å±æ€§å’Œ<code>effectAllowed</code>å±æ€§ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªä¸º<code>none</code>ï¼Œå°±æ— æ³•åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šå®Œæˆ<code>drop</code>æ“ä½œã€‚</p> <h4 id="_4-3-datatransfer-files-æœ¬åœ°æ–‡ä»¶"><a href="#_4-3-datatransfer-files-æœ¬åœ°æ–‡ä»¶" class="header-anchor">#</a> 4.3 DataTransfer.files æœ¬åœ°æ–‡ä»¶</h4> <p><code>DataTransfer.files</code>å±æ€§æ˜¯<strong>ä¸€ä¸ª FileList å¯¹è±¡ï¼ŒåŒ…å«ä¸€ç»„æœ¬åœ°æ–‡ä»¶</strong>ï¼Œå¯ä»¥ç”¨æ¥åœ¨æ‹–æ‹‰æ“ä½œä¸­ä¼ é€ã€‚å¦‚æœæœ¬æ¬¡æ‹–æ‹‰ä¸æ¶‰åŠæ–‡ä»¶ï¼Œåˆ™è¯¥å±æ€§ä¸ºç©ºçš„ FileList å¯¹è±¡ã€‚</p> <h5 id="ä¾‹å­ï¼šæ¥æ”¶æ‹–æ‹‰æ–‡ä»¶"><a href="#ä¾‹å­ï¼šæ¥æ”¶æ‹–æ‹‰æ–‡ä»¶" class="header-anchor">#</a> ä¾‹å­ï¼šæ¥æ”¶æ‹–æ‹‰æ–‡ä»¶</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;div id=&quot;output&quot; style=&quot;min-height: 200px;border: 1px solid black;&quot;&gt;</span>
<span class="token comment">//   æ–‡ä»¶æ‹–æ‹‰åˆ°è¿™é‡Œ</span>
<span class="token comment">// &lt;/div&gt;</span>

<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;dragenter&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  div<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;dragover&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;drop&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">event</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> files <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> files<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>textContent <span class="token operator">+=</span> files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> files<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>size <span class="token operator">+</span> <span class="token string">'å­—èŠ‚\n'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡<code>dataTransfer.files</code>å±æ€§è¯»å–è¢«æ‹–æ‹‰çš„æ–‡ä»¶çš„ä¿¡æ¯ã€‚å¦‚æœæƒ³è¦<strong>è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå°±è¦ä½¿ç”¨<code>FileReader</code>å¯¹è±¡ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> fileList <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fileList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> file <span class="token operator">=</span> fileList<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è§£æä¸ºurl</span>
    reader<span class="token punctuation">.</span><span class="token function-variable function">onloadend</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>readyState <span class="token operator">===</span> FileReader<span class="token punctuation">.</span><span class="token constant">DONE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> content <span class="token operator">=</span> reader<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;img src=&quot;'</span><span class="token operator">+</span> content <span class="token operator">+</span><span class="token string">'&quot;&gt; File: '</span> <span class="token operator">+</span> file<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'\n\n'</span> <span class="token operator">+</span> content<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    reader<span class="token punctuation">.</span><span class="token function">readAsBinaryString</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="_4-4-datatransfer-types-æ•°æ®æ ¼å¼"><a href="#_4-4-datatransfer-types-æ•°æ®æ ¼å¼" class="header-anchor">#</a> 4.4 DataTransfer.types æ•°æ®æ ¼å¼</h4> <p><code>DataTransfer.types</code>å±æ€§<strong>æ˜¯ä¸€ä¸ªåªè¯»çš„æ•°ç»„</strong>ï¼Œæ¯ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‡Œé¢æ˜¯<strong>æ‹–æ‹‰çš„æ•°æ®æ ¼å¼</strong>ï¼ˆé€šå¸¸æ˜¯ MIME å€¼ï¼‰ã€‚æ¯”å¦‚ï¼Œå¦‚æœæ‹–æ‹‰çš„æ˜¯æ–‡å­—ï¼Œå¯¹åº”çš„æˆå‘˜å°±æ˜¯<code>text/plain</code>ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œé€šè¿‡æ£€æŸ¥<code>dataTransfer</code>å±æ€§çš„ç±»å‹ï¼Œå†³å®šæ˜¯å¦å…è®¸åœ¨å½“å‰èŠ‚ç‚¹æ‰§è¡Œ<code>drop</code>æ“ä½œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doDragOver</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> isLink <span class="token operator">=</span> <span class="token function">contains</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>types<span class="token punctuation">,</span> <span class="token string">'text/uri-list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLink<span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªæœ‰å½“è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œæ‰å…è®¸åœ¨å½“å‰èŠ‚ç‚¹æ”¾ä¸‹ã€‚</p> <h4 id="_4-5-datatransfer-items"><a href="#_4-5-datatransfer-items" class="header-anchor">#</a> 4.5 DataTransfer.items</h4> <p><code>DataTransfer.items</code>å±æ€§<strong>è¿”å›ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„åªè¯»å¯¹è±¡ï¼ˆDataTransferItemList å®ä¾‹ï¼‰</strong>ï¼Œæ¯ä¸ªæˆå‘˜å°±æ˜¯æœ¬æ¬¡æ‹–æ‹‰çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆDataTransferItem å®ä¾‹ï¼‰ã€‚å¦‚æœæœ¬æ¬¡æ‹–æ‹‰ä¸åŒ…å«å¯¹è±¡ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ã€‚</p> <p>DataTransferItemList å®ä¾‹å…·æœ‰ä»¥ä¸‹çš„å±æ€§å’Œæ–¹æ³•ã€‚</p> <ul><li><code>length</code>ï¼šè¿”å›æˆå‘˜çš„æ•°é‡</li> <li><code>add(data, type)</code>ï¼šå¢åŠ ä¸€ä¸ªæŒ‡å®šå†…å®¹å’Œç±»å‹ï¼ˆæ¯”å¦‚<code>text/html</code>å’Œ<code>text/plain</code>ï¼‰çš„å­—ç¬¦ä¸²ä½œä¸ºæˆå‘˜</li> <li><code>add(file)</code>ï¼š<code>add</code>æ–¹æ³•çš„å¦ä¸€ç§ç”¨æ³•ï¼Œå¢åŠ ä¸€ä¸ªæ–‡ä»¶ä½œä¸ºæˆå‘˜</li> <li><code>remove(index)</code>ï¼šç§»é™¤æŒ‡å®šä½ç½®çš„æˆå‘˜</li> <li><code>clear()</code>ï¼šç§»é™¤æ‰€æœ‰çš„æˆå‘˜</li></ul> <p>DataTransferItem å®ä¾‹å…·æœ‰ä»¥ä¸‹çš„å±æ€§å’Œæ–¹æ³•ã€‚</p> <ul><li><code>kind</code>ï¼šè¿”å›æˆå‘˜çš„ç§ç±»ï¼ˆ<code>string</code>è¿˜æ˜¯<code>file</code>ï¼‰ã€‚</li> <li><code>type</code>ï¼šè¿”å›æˆå‘˜çš„ç±»å‹ï¼ˆé€šå¸¸æ˜¯ MIME å€¼ï¼‰ã€‚</li> <li><code>getAsFile()</code>ï¼šå¦‚æœè¢«æ‹–æ‹‰æ˜¯æ–‡ä»¶ï¼Œè¿”å›è¯¥æ–‡ä»¶ï¼Œå¦åˆ™è¿”å›<code>null</code>ã€‚</li> <li><code>getAsString(callback)</code>ï¼šå¦‚æœè¢«æ‹–æ‹‰çš„æ˜¯å­—ç¬¦ä¸²ï¼Œå°†è¯¥å­—ç¬¦ä¼ å…¥æŒ‡å®šçš„å›è°ƒå‡½æ•°å¤„ç†ã€‚è¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦ä¼ å…¥å›è°ƒå‡½æ•°ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'drop'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>kind <span class="token operator">+</span> <span class="token string">': '</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5ã€datatransfer-çš„å®ä¾‹æ–¹æ³•"><a href="#_5ã€datatransfer-çš„å®ä¾‹æ–¹æ³•" class="header-anchor">#</a> 5ã€DataTransfer çš„å®ä¾‹æ–¹æ³•</h3> <h4 id="_5-1-datatransfer-setdata-è®¾ç½®æ‹–æ‹‰äº‹ä»¶æ‰€å¸¦æœ‰çš„æ•°æ®"><a href="#_5-1-datatransfer-setdata-è®¾ç½®æ‹–æ‹‰äº‹ä»¶æ‰€å¸¦æœ‰çš„æ•°æ®" class="header-anchor">#</a> 5.1 DataTransfer.setData() è®¾ç½®æ‹–æ‹‰äº‹ä»¶æ‰€å¸¦æœ‰çš„æ•°æ®</h4> <p><code>DataTransfer.setData()</code>æ–¹æ³•ç”¨æ¥<strong>è®¾ç½®æ‹–æ‹‰äº‹ä»¶æ‰€å¸¦æœ‰çš„æ•°æ®</strong>ã€‚è¯¥æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token string">'Text to drag'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸ºå½“å‰çš„æ‹–æ‹‰äº‹ä»¶åŠ å…¥çº¯æ–‡æœ¬æ•°æ®ã€‚</p> <p>è¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªå‚æ•°<strong>è¡¨ç¤ºæ•°æ®ç±»å‹</strong>ï¼ˆæ¯”å¦‚<code>text/plain</code>ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>å…·ä½“æ•°æ®</strong>ã€‚å¦‚æœæŒ‡å®šç±»å‹çš„æ•°æ®åœ¨<code>dataTransfer</code>å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®å°†è¢«åŠ å…¥ï¼Œå¦åˆ™åŸæœ‰çš„æ•°æ®å°†è¢«æ–°æ•°æ®æ›¿æ¢ã€‚</p> <p>å¦‚æœæ˜¯æ‹–æ‹‰æ–‡æœ¬æ¡†æˆ–è€…æ‹–æ‹‰é€‰ä¸­çš„æ–‡æœ¬ï¼Œä¼šé»˜è®¤å°†å¯¹åº”çš„æ–‡æœ¬æ•°æ®ï¼Œæ·»åŠ åˆ°<code>dataTransfer</code>å±æ€§ï¼Œä¸ç”¨æ‰‹åŠ¨æŒ‡å®šã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  aaa
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‹–æ‹‰è¿™ä¸ª<code>&lt;div&gt;</code>å…ƒç´ ä¼šè‡ªåŠ¨å¸¦ä¸Šæ–‡æœ¬æ•°æ®<code>aaa</code>ã€‚</p> <p>ä½¿ç”¨<code>setData</code>æ–¹æ³•ï¼Œå¯ä»¥æ›¿æ¢åˆ°åŸæœ‰æ•°æ®ã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">ondragstart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>event.dataTransfer.setData(<span class="token punctuation">'</span>text/plain<span class="token punctuation">'</span>, <span class="token punctuation">'</span>bbb<span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  aaa
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ‹–æ‹‰æ•°æ®å®é™…ä¸Šæ˜¯<code>bbb</code>ï¼Œè€Œä¸æ˜¯<code>aaa</code>ã€‚</p> <p>ä¸‹é¢æ˜¯æ·»åŠ å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚ç”±äº<code>text/plain</code>æ˜¯æœ€æ™®éæ”¯æŒçš„æ ¼å¼ï¼Œä¸ºäº†ä¿è¯å…¼å®¹æ€§ï¼Œå»ºè®®æœ€åæ€»æ˜¯ä¿å­˜ä¸€ä»½çº¯æ–‡æœ¬æ ¼å¼çš„æ•°æ®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dt <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">;</span>

<span class="token comment">// æ·»åŠ é“¾æ¥</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/uri-list'</span><span class="token punctuation">,</span> <span class="token string">'http://www.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token string">'http://www.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ·»åŠ  HTML ä»£ç </span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/html'</span><span class="token punctuation">,</span> <span class="token string">'Hello there, &lt;strong&gt;stranger&lt;/strong&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token string">'Hello there, &lt;strong&gt;stranger&lt;/strong&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ·»åŠ å›¾åƒçš„ URL</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/uri-list'</span><span class="token punctuation">,</span> imageurl<span class="token punctuation">)</span><span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> imageurl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å¯ä»¥ä¸€æ¬¡æä¾›å¤šç§æ ¼å¼çš„æ•°æ®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> dt <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'application/x-bookmark'</span><span class="token punctuation">,</span> bookmarkString<span class="token punctuation">)</span><span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/uri-list'</span><span class="token punctuation">,</span> <span class="token string">'http://www.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dt<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token string">'http://www.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œé€šè¿‡åœ¨åŒä¸€ä¸ªäº‹ä»¶ä¸Šé¢ï¼Œå­˜æ”¾ä¸‰ç§ç±»å‹çš„æ•°æ®ï¼Œä½¿å¾—æ‹–æ‹‰äº‹ä»¶å¯ä»¥åœ¨ä¸åŒçš„å¯¹è±¡ä¸Šé¢ï¼Œ<code>drop</code>ä¸åŒçš„å€¼ã€‚æ³¨æ„ï¼Œç¬¬ä¸€ç§æ ¼å¼æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ¼å¼ï¼Œæµè§ˆå™¨é»˜è®¤æ— æ³•è¯»å–ï¼Œè¿™æ„å‘³ç€ï¼Œåªæœ‰æŸä¸ªéƒ¨ç½²äº†ç‰¹å®šä»£ç çš„èŠ‚ç‚¹ï¼Œæ‰å¯èƒ½<code>drop</code>ï¼ˆè¯»å–åˆ°ï¼‰è¿™ä¸ªæ•°æ®ã€‚</p> <h4 id="_5-2-datatransfer-getdata-è¿”å›æŒ‡å®šç±»å‹çš„æ•°æ®"><a href="#_5-2-datatransfer-getdata-è¿”å›æŒ‡å®šç±»å‹çš„æ•°æ®" class="header-anchor">#</a> 5.2 DataTransfer.getData() è¿”å›æŒ‡å®šç±»å‹çš„æ•°æ®</h4> <p><code>DataTransfer.getData()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆè¡¨ç¤ºæ•°æ®ç±»å‹ï¼‰ä½œä¸ºå‚æ•°ï¼Œ<strong>è¿”å›äº‹ä»¶æ‰€å¸¦çš„æŒ‡å®šç±»å‹çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯ç”¨<code>setData</code>æ–¹æ³•æ·»åŠ çš„æ•°æ®ï¼‰</strong>ã€‚å¦‚æœæŒ‡å®šç±»å‹çš„æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚é€šå¸¸åªæœ‰<code>drop</code>äº‹ä»¶è§¦å‘åï¼Œæ‰èƒ½å–å‡ºæ•°æ®ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>drop</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œç”¨æ¥å–å‡ºæŒ‡å®šç±»å‹çš„æ•°æ®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">onDrop</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>textContent <span class="token operator">=</span> data<span class="token punctuation">;</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢ä»£ç å–å‡ºæ‹–æ‹‰äº‹ä»¶çš„æ–‡æœ¬æ•°æ®ï¼Œå°†å…¶æ›¿æ¢æˆå½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚æ³¨æ„ï¼Œè¿™æ—¶è¿˜å¿…é¡»å–æ¶ˆæµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œå› ä¸ºå‡å¦‚ç”¨æˆ·æ‹–æ‹‰çš„æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œæµè§ˆå™¨é»˜è®¤ä¼šåœ¨å½“å‰çª—å£æ‰“å¼€è¿™ä¸ªé“¾æ¥ã€‚</p> <p><code>getData</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå…¶ä¸­åŒ…å«å¤šé¡¹æ•°æ®ï¼Œå°±å¿…é¡»æ‰‹åŠ¨è§£æã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doDrop</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> lines <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'text/uri-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> line <span class="token keyword">of</span> lines<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    link<span class="token punctuation">.</span>href <span class="token operator">=</span> line<span class="token punctuation">;</span>
    link<span class="token punctuation">.</span>textContent <span class="token operator">=</span> line<span class="token punctuation">;</span>
    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getData</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ç»„é“¾æ¥ï¼Œå°±å¿…é¡»è‡ªè¡Œè§£æã€‚</p> <p>ç±»å‹å€¼æŒ‡å®šä¸º<code>URL</code>ï¼Œå¯ä»¥å–å‡ºç¬¬ä¸€ä¸ªæœ‰æ•ˆé“¾æ¥ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> link <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token string">'URL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸‹é¢çš„ä¾‹å­æ˜¯ä»å¤šç§ç±»å‹çš„æ•°æ®é‡Œé¢å–å‡ºæ•°æ®ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doDrop</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> types <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>types<span class="token punctuation">;</span>
  <span class="token keyword">var</span> supportedTypes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'text/uri-list'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  types <span class="token operator">=</span> supportedTypes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> types<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>types<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>types<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_5-3-datatransfer-cleardata-æ¸…é™¤æŒ‡å®šæˆ–å…¨éƒ¨æ•°æ®"><a href="#_5-3-datatransfer-cleardata-æ¸…é™¤æŒ‡å®šæˆ–å…¨éƒ¨æ•°æ®" class="header-anchor">#</a> 5.3 DataTransfer.clearData() æ¸…é™¤æŒ‡å®šæˆ–å…¨éƒ¨æ•°æ®</h4> <p><code>DataTransfer.clearData()</code>æ–¹æ³•æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆè¡¨ç¤ºæ•°æ®ç±»å‹ï¼‰ä½œä¸ºå‚æ•°ï¼Œåˆ é™¤äº‹ä»¶æ‰€å¸¦çš„æŒ‡å®šç±»å‹çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œåˆ™åˆ é™¤æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæŒ‡å®šç±»å‹ä¸å­˜åœ¨ï¼Œåˆ™è°ƒç”¨è¯¥æ–¹æ³•ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>event<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">clearData</span><span class="token punctuation">(</span><span class="token string">'text/uri-list'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢ä»£ç æ¸…é™¤äº‹ä»¶æ‰€å¸¦çš„<code>text/uri-list</code>ç±»å‹çš„æ•°æ®ã€‚</p> <p>è¯¥æ–¹æ³•ä¸ä¼šç§»é™¤æ‹–æ‹‰çš„æ–‡ä»¶ï¼Œå› æ­¤è°ƒç”¨è¯¥æ–¹æ³•åï¼Œ<code>DataTransfer.types</code>å±æ€§å¯èƒ½ä¾ç„¶ä¼šè¿”å›<code>Files</code>ç±»å‹ï¼ˆå‰ææ˜¯å­˜åœ¨æ–‡ä»¶æ‹–æ‹‰ï¼‰ã€‚</p> <p>æ³¨æ„ï¼Œè¯¥æ–¹æ³•<strong>åªèƒ½åœ¨<code>dragstart</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¹‹ä¸­ä½¿ç”¨</strong>ï¼Œå› ä¸ºè¿™æ˜¯æ‹–æ‹‰æ“ä½œçš„æ•°æ®å”¯ä¸€å¯å†™çš„æ—¶æœºã€‚</p> <h4 id="_5-4-datatransfer-setdragimage-è®¾ç½®æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„å›¾ç‰‡"><a href="#_5-4-datatransfer-setdragimage-è®¾ç½®æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„å›¾ç‰‡" class="header-anchor">#</a> 5.4 DataTransfer.setDragImage() è®¾ç½®æ‹–åŠ¨è¿‡ç¨‹ä¸­çš„å›¾ç‰‡</h4> <p>æ‹–åŠ¨è¿‡ç¨‹ä¸­ï¼ˆ<code>dragstart</code>äº‹ä»¶è§¦å‘åï¼‰ï¼Œæµè§ˆå™¨<strong>ä¼šæ˜¾ç¤ºä¸€å¼ å›¾ç‰‡è·Ÿéšé¼ æ ‡ä¸€èµ·ç§»åŠ¨</strong>ï¼Œè¡¨ç¤ºè¢«æ‹–åŠ¨çš„èŠ‚ç‚¹ã€‚è¿™å¼ å›¾ç‰‡æ˜¯<strong>è‡ªåŠ¨åˆ›é€ çš„</strong>ï¼Œé€šå¸¸æ˜¾ç¤ºä¸ºè¢«æ‹–åŠ¨èŠ‚ç‚¹çš„å¤–è§‚ï¼Œä¸éœ€è¦è‡ªå·±åŠ¨æ‰‹è®¾ç½®ã€‚</p> <p><code>DataTransfer.setDragImage()</code>æ–¹æ³•<strong>å¯ä»¥è‡ªå®šä¹‰è¿™å¼ å›¾ç‰‡</strong>ã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯<code>&lt;img&gt;</code>èŠ‚ç‚¹æˆ–è€…<code>&lt;canvas&gt;</code>èŠ‚ç‚¹ï¼Œå¦‚æœçœç•¥æˆ–ä¸º<code>null</code>ï¼Œåˆ™ä½¿ç”¨è¢«æ‹–åŠ¨çš„èŠ‚ç‚¹çš„å¤–è§‚ï¼›ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé¼ æ ‡ç›¸å¯¹äºè¯¥å›¾ç‰‡å·¦ä¸Šè§’çš„æ¨ªåæ ‡å’Œå³åæ ‡ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* HTML ä»£ç å¦‚ä¸‹
 &lt;div id=&quot;drag-with-image&quot; class=&quot;dragdemo&quot; draggable=&quot;true&quot;&gt;
   drag me
 &lt;/div&gt;
*/</span>

<span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drag-with-image'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'dragstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://path/to/img'</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span><span class="token function">setDragImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="åã€å…¶ä»–å¸¸è§äº‹ä»¶"><a href="#åã€å…¶ä»–å¸¸è§äº‹ä»¶" class="header-anchor">#</a> åã€å…¶ä»–å¸¸è§äº‹ä»¶</h2> <h3 id="_1ã€èµ„æºäº‹ä»¶"><a href="#_1ã€èµ„æºäº‹ä»¶" class="header-anchor">#</a> 1ã€èµ„æºäº‹ä»¶</h3> <h4 id="_1-1-beforeunload-äº‹ä»¶-ï¼ˆå…³é—­çª—å£å‰è°ƒç”¨ï¼‰"><a href="#_1-1-beforeunload-äº‹ä»¶-ï¼ˆå…³é—­çª—å£å‰è°ƒç”¨ï¼‰" class="header-anchor">#</a> 1.1 beforeunload äº‹ä»¶ ï¼ˆå…³é—­çª—å£å‰è°ƒç”¨ï¼‰</h4> <p><code>beforeunload</code>äº‹ä»¶åœ¨<strong>çª—å£ã€æ–‡æ¡£ã€å„ç§èµ„æºå°†è¦å¸è½½å‰è§¦å‘</strong>ã€‚å®ƒå¯ä»¥ç”¨æ¥é˜²æ­¢ç”¨æˆ·ä¸å°å¿ƒå¸è½½èµ„æºã€‚</p> <p>å¦‚æœè¯¥äº‹ä»¶å¯¹è±¡çš„<code>returnValue</code>å±æ€§æ˜¯ä¸€ä¸ªéç©ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦è¦å¸è½½è¯¥èµ„æºã€‚ä½†æ˜¯ï¼Œç”¨æˆ·æŒ‡å®šçš„å­—ç¬¦ä¸²å¯èƒ½æ— æ³•æ˜¾ç¤ºï¼Œæµè§ˆå™¨ä¼šå±•ç¤ºé¢„å®šä¹‰çš„å­—ç¬¦ä¸²ã€‚å¦‚æœç”¨æˆ·ç‚¹å‡»â€œå–æ¶ˆâ€æŒ‰é’®ï¼Œèµ„æºå°±ä¸ä¼šå¸è½½ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token string">'ä½ ç¡®å®šç¦»å¼€å—ï¼Ÿ'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”¨æˆ·å¦‚æœ<strong>å…³é—­çª—å£ï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œè¦æ±‚ç”¨æˆ·ç¡®è®¤</strong>ã€‚</p> <p>æµè§ˆå™¨å¯¹è¿™ä¸ªäº‹ä»¶çš„è¡Œä¸ºå¾ˆä¸ä¸€è‡´ï¼Œæœ‰çš„æµè§ˆå™¨è°ƒç”¨<code>event.preventDefault()</code>ï¼Œä¹Ÿä¼šå¼¹å‡ºå¯¹è¯æ¡†ã€‚IE æµè§ˆå™¨éœ€è¦æ˜¾å¼è¿”å›ä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸²ï¼Œæ‰ä¼šå¼¹å‡ºå¯¹è¯æ¡†ã€‚è€Œä¸”ï¼Œ<strong>å¤§å¤šæ•°æµè§ˆå™¨åœ¨å¯¹è¯æ¡†ä¸­ä¸æ˜¾ç¤ºæŒ‡å®šæ–‡æœ¬ï¼Œåªæ˜¾ç¤ºé»˜è®¤æ–‡æœ¬</strong>ã€‚å› æ­¤ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„å†™æ³•ï¼Œå–å¾—æœ€å¤§çš„å…¼å®¹æ€§ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'beforeunload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> confirmationMessage <span class="token operator">=</span> <span class="token string">'ç¡®è®¤å…³é—­çª—å£ï¼Ÿ'</span><span class="token punctuation">;</span>

  e<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> confirmationMessage<span class="token punctuation">;</span>
  <span class="token keyword">return</span> confirmationMessage<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ³¨æ„ï¼Œè®¸å¤šæ‰‹æœºæµè§ˆå™¨é»˜è®¤å¿½ç•¥è¿™ä¸ªäº‹ä»¶ï¼Œæ¡Œé¢æµè§ˆå™¨ä¹Ÿæœ‰åŠæ³•å¿½ç•¥è¿™ä¸ªäº‹ä»¶ã€‚æ‰€ä»¥ï¼Œå®ƒå¯èƒ½æ ¹æœ¬ä¸ä¼šç”Ÿæ•ˆï¼Œä¸èƒ½ä¾èµ–å®ƒæ¥é˜»æ­¢ç”¨æˆ·å…³é—­çª—å£ã€‚å¦å¤–ï¼Œä¸€æ—¦ä½¿ç”¨äº†<code>beforeunload</code>äº‹ä»¶ï¼Œæµè§ˆå™¨å°±ä¸ä¼šç¼“å­˜å½“å‰ç½‘é¡µï¼Œä½¿ç”¨â€œå›é€€â€æŒ‰é’®å°†é‡æ–°å‘æœåŠ¡å™¨è¯·æ±‚ç½‘é¡µã€‚è¿™æ˜¯å› ä¸ºç›‘å¬è¿™ä¸ªäº‹ä»¶çš„ç›®çš„ï¼Œä¸€èˆ¬æ˜¯ä¿®æ”¹åˆå§‹çŠ¶æ€ï¼Œè¿™æ—¶ç¼“å­˜åˆå§‹é¡µé¢å°±æ²¡æ„ä¹‰äº†ã€‚</p> <p>åŸºæœ¬ä¸Šï¼Œåªæœ‰ä¸€ç§åœºåˆå¯ä»¥ç›‘å¬<code>unload</code>äº‹ä»¶ï¼Œå…¶ä»–æƒ…å†µéƒ½ä¸åº”è¯¥ç›‘å¬ï¼š<strong>ç”¨æˆ·ä¿®æ”¹äº†è¡¨å•ï¼Œè¿˜æ²¡æœ‰ä¿å­˜å°±è¦ç¦»å¼€</strong>ã€‚</p> <h4 id="_1-2-unload-äº‹ä»¶-ï¼ˆå³å°†å…³é—­çª—å£æ—¶è°ƒç”¨ï¼‰"><a href="#_1-2-unload-äº‹ä»¶-ï¼ˆå³å°†å…³é—­çª—å£æ—¶è°ƒç”¨ï¼‰" class="header-anchor">#</a> 1.2 unload äº‹ä»¶ ï¼ˆå³å°†å…³é—­çª—å£æ—¶è°ƒç”¨ï¼‰</h4> <p><code>unload</code>äº‹ä»¶åœ¨<strong>çª—å£å…³é—­æˆ–è€…<code>document</code>å¯¹è±¡å°†è¦å¸è½½æ—¶è§¦å‘</strong>ã€‚å®ƒçš„è§¦å‘é¡ºåºæ’åœ¨<code>beforeunload</code>ã€<code>pagehide</code>äº‹ä»¶åé¢ã€‚</p> <p><code>unload</code>äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ–‡æ¡£å¤„äºä¸€ä¸ªç‰¹æ®ŠçŠ¶æ€ã€‚æ‰€æœ‰èµ„æºä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯å¯¹ç”¨æˆ·æ¥è¯´éƒ½ä¸å¯è§ï¼ŒUI äº’åŠ¨å…¨éƒ¨æ— æ•ˆã€‚è¿™ä¸ªäº‹ä»¶æ˜¯æ— æ³•å–æ¶ˆçš„ï¼Œå³ä½¿åœ¨ç›‘å¬å‡½æ•°é‡Œé¢æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¸èƒ½åœæ­¢æ–‡æ¡£çš„å¸è½½ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'unload'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ–‡æ¡£å°†è¦å¸è½½'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ‰‹æœºä¸Šï¼Œæµè§ˆå™¨æˆ–ç³»ç»Ÿå¯èƒ½ä¼šç›´æ¥ä¸¢å¼ƒç½‘é¡µï¼Œè¿™æ—¶è¯¥äº‹ä»¶æ ¹æœ¬ä¸ä¼šå‘ç”Ÿã€‚è€Œä¸”è·Ÿ<code>beforeunload</code>äº‹ä»¶ä¸€æ ·ï¼Œä¸€æ—¦ä½¿ç”¨äº†<code>unload</code>äº‹ä»¶ï¼Œæµè§ˆå™¨å°±ä¸ä¼šç¼“å­˜å½“å‰ç½‘é¡µï¼Œç†ç”±åŒä¸Šã€‚å› æ­¤ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½ä¸åº”è¯¥ä¾èµ–è¿™ä¸ªäº‹ä»¶ï¼ŒæŒ‡å®šç½‘é¡µå¸è½½æ—¶è¦æ‰§è¡Œçš„ä»£ç ï¼Œå¯ä»¥è€ƒè™‘å®Œå…¨ä¸ä½¿ç”¨è¿™ä¸ªäº‹ä»¶ã€‚</p> <h4 id="_1-3-load-äº‹ä»¶ï¼Œerror-äº‹ä»¶-ï¼Œabortäº‹ä»¶-ï¼ˆé¡µé¢æˆ–æŸä¸ªèµ„æºåŠ è½½æˆåŠŸ-å¤±è´¥-å–æ¶ˆæ—¶è°ƒç”¨ï¼‰"><a href="#_1-3-load-äº‹ä»¶ï¼Œerror-äº‹ä»¶-ï¼Œabortäº‹ä»¶-ï¼ˆé¡µé¢æˆ–æŸä¸ªèµ„æºåŠ è½½æˆåŠŸ-å¤±è´¥-å–æ¶ˆæ—¶è°ƒç”¨ï¼‰" class="header-anchor">#</a> 1.3 load äº‹ä»¶ï¼Œerror äº‹ä»¶ ï¼Œabortäº‹ä»¶ ï¼ˆé¡µé¢æˆ–æŸä¸ªèµ„æºåŠ è½½æˆåŠŸ/å¤±è´¥/å–æ¶ˆæ—¶è°ƒç”¨ï¼‰</h4> <p><code>load</code>äº‹ä»¶<strong>åœ¨é¡µé¢æˆ–æŸä¸ªèµ„æºåŠ è½½æˆåŠŸæ—¶è§¦å‘</strong>ã€‚æ³¨æ„ï¼Œ<strong>é¡µé¢æˆ–èµ„æºä»æµè§ˆå™¨ç¼“å­˜åŠ è½½ï¼Œå¹¶ä¸ä¼šè§¦å‘<code>load</code>äº‹ä»¶</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ‰€æœ‰èµ„æºéƒ½åŠ è½½å®Œæˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>error</code>äº‹ä»¶æ˜¯<strong>åœ¨é¡µé¢æˆ–èµ„æºåŠ è½½å¤±è´¥æ—¶è§¦å‘</strong>ã€‚</p> <p><code>abort</code>äº‹ä»¶æ˜¯<strong>åœ¨ç”¨æˆ·å–æ¶ˆåŠ è½½æ—¶è§¦å‘</strong>ã€‚</p> <p>è¿™ä¸‰ä¸ªäº‹ä»¶å®é™…ä¸Šå±äºè¿›åº¦äº‹ä»¶ï¼Œä¸ä»…å‘ç”Ÿåœ¨<code>document</code>å¯¹è±¡ï¼Œè¿˜å‘ç”Ÿåœ¨å„ç§å¤–éƒ¨èµ„æºä¸Šé¢ã€‚æµè§ˆç½‘é¡µå°±æ˜¯ä¸€ä¸ªåŠ è½½å„ç§èµ„æºçš„è¿‡ç¨‹ï¼Œå›¾åƒï¼ˆimageï¼‰ã€æ ·å¼è¡¨ï¼ˆstyle sheetï¼‰ã€è„šæœ¬ï¼ˆscriptï¼‰ã€è§†é¢‘ï¼ˆvideoï¼‰ã€éŸ³é¢‘ï¼ˆaudioï¼‰ã€Ajaxè¯·æ±‚ï¼ˆXMLHttpRequestï¼‰ç­‰ç­‰ã€‚è¿™äº›èµ„æºå’Œ<code>document</code>å¯¹è±¡ã€<code>window</code>å¯¹è±¡ã€XMLHttpRequestUpload å¯¹è±¡ï¼Œéƒ½ä¼šè§¦å‘<code>load</code>äº‹ä»¶å’Œ<code>error</code>äº‹ä»¶ã€‚</p> <p><strong>è§¦å‘è¿™ä¸‰ä¸ªäº‹ä»¶çš„å¯¹è±¡æœ‰</strong>ï¼š</p> <ul><li>window</li> <li>document</li> <li>body</li> <li>img</li> <li>style</li> <li>script</li> <li>video</li> <li>audio</li> <li>Ajax</li> <li>ç­‰ç­‰</li></ul> <h3 id="_2ã€session-å†å²äº‹ä»¶"><a href="#_2ã€session-å†å²äº‹ä»¶" class="header-anchor">#</a> 2ã€session å†å²äº‹ä»¶</h3> <h4 id="_2-1-pageshow-äº‹ä»¶ï¼ˆé¡µé¢æ˜¾ç¤ºï¼ŒåŠ è½½é¡µé¢åæ‰§è¡Œï¼‰ï¼Œpagehide-äº‹ä»¶ï¼ˆé€€å‡ºå½“å‰é¡µé¢è§¦å‘ï¼‰"><a href="#_2-1-pageshow-äº‹ä»¶ï¼ˆé¡µé¢æ˜¾ç¤ºï¼ŒåŠ è½½é¡µé¢åæ‰§è¡Œï¼‰ï¼Œpagehide-äº‹ä»¶ï¼ˆé€€å‡ºå½“å‰é¡µé¢è§¦å‘ï¼‰" class="header-anchor">#</a> 2.1 pageshow äº‹ä»¶ï¼ˆé¡µé¢æ˜¾ç¤ºï¼ŒåŠ è½½é¡µé¢åæ‰§è¡Œï¼‰ï¼Œpagehide äº‹ä»¶ï¼ˆé€€å‡ºå½“å‰é¡µé¢è§¦å‘ï¼‰</h4> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šåœ¨å½“å‰ä¼šè¯ï¼ˆsessionï¼‰ç¼“å­˜é¡µé¢ï¼Œå½“ç”¨æˆ·<strong>ç‚¹å‡»â€œå‰è¿›/åé€€â€æŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šä»ç¼“å­˜ä¸­åŠ è½½é¡µé¢ã€‚</strong></p> <p>pageshow äº‹ä»¶<strong>åœ¨é¡µé¢åŠ è½½æ—¶è§¦å‘ï¼ŒåŒ…æ‹¬ç¬¬ä¸€æ¬¡åŠ è½½å’Œä»ç¼“å­˜åŠ è½½ä¸¤ç§æƒ…å†µ</strong>ã€‚å¦‚æœè¦æŒ‡å®šé¡µé¢æ¯æ¬¡åŠ è½½ï¼ˆä¸ç®¡æ˜¯ä¸æ˜¯ä»æµè§ˆå™¨ç¼“å­˜ï¼‰æ—¶éƒ½è¿è¡Œçš„ä»£ç ï¼Œå¯ä»¥æ”¾åœ¨è¿™ä¸ªäº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚</p> <p>ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œå®ƒçš„è§¦å‘é¡ºåºæ’åœ¨<code>load</code>äº‹ä»¶åé¢ã€‚ä»ç¼“å­˜åŠ è½½æ—¶ï¼Œ<code>load</code>äº‹ä»¶ä¸ä¼šè§¦å‘ï¼Œå› ä¸ºç½‘é¡µåœ¨ç¼“å­˜ä¸­çš„æ ·å­é€šå¸¸æ˜¯<code>load</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°è¿è¡Œåçš„æ ·å­ï¼Œæ‰€ä»¥ä¸å¿…é‡å¤æ‰§è¡Œã€‚åŒç†ï¼Œå¦‚æœæ˜¯ä»ç¼“å­˜ä¸­åŠ è½½é¡µé¢ï¼Œç½‘é¡µå†…åˆå§‹åŒ–çš„ JavaScript è„šæœ¬ï¼ˆæ¯”å¦‚ DOMContentLoaded äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼‰ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'pageshow: '</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>pageshow äº‹ä»¶<strong>æœ‰ä¸€ä¸ª<code>persisted</code>å±æ€§</strong>ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œè¿™ä¸ªå±æ€§æ˜¯<code>false</code>ï¼›å½“é¡µé¢ä»ç¼“å­˜åŠ è½½æ—¶ï¼Œè¿™ä¸ªå±æ€§æ˜¯<code>true</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æ˜¯å¦ä»ç¼“å­˜åŠ è½½</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>pagehide</code>äº‹ä»¶ä¸<code>pageshow</code>äº‹ä»¶ç±»ä¼¼ï¼Œå½“ç”¨æˆ·<strong>é€šè¿‡â€œå‰è¿›/åé€€â€æŒ‰é’®ï¼Œç¦»å¼€å½“å‰é¡µé¢æ—¶è§¦å‘</strong>ã€‚å®ƒä¸ unload äº‹ä»¶çš„åŒºåˆ«åœ¨äºï¼Œå¦‚æœåœ¨ window å¯¹è±¡ä¸Šå®šä¹‰<code>unload</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ä¹‹åï¼Œé¡µé¢ä¸ä¼šä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼Œè€Œä½¿ç”¨<code>pagehide</code>äº‹ä»¶ï¼Œé¡µé¢ä¼šä¿å­˜åœ¨ç¼“å­˜ä¸­ã€‚</p> <p><code>pagehide</code>äº‹ä»¶å®ä¾‹ä¹Ÿ<strong>æœ‰ä¸€ä¸ª<code>persisted</code>å±æ€§ï¼Œå°†è¿™ä¸ªå±æ€§è®¾ä¸º<code>true</code>ï¼Œå°±è¡¨ç¤ºé¡µé¢è¦ä¿å­˜åœ¨ç¼“å­˜ä¸­ï¼›è®¾ä¸º<code>false</code>ï¼Œè¡¨ç¤ºç½‘é¡µä¸ä¿å­˜åœ¨ç¼“å­˜ä¸­</strong>ï¼Œè¿™æ—¶å¦‚æœè®¾ç½®äº†unload äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ pagehide äº‹ä»¶åç«‹å³è¿è¡Œã€‚</p> <p>å¦‚æœé¡µé¢åŒ…å«<code>&lt;frame&gt;</code>æˆ–<code>&lt;iframe&gt;</code>å…ƒç´ ï¼Œåˆ™<code>&lt;frame&gt;</code>é¡µé¢çš„<code>pageshow</code>äº‹ä»¶å’Œ<code>pagehide</code>äº‹ä»¶ï¼Œéƒ½ä¼šåœ¨ä¸»é¡µé¢ä¹‹å‰è§¦å‘ã€‚</p> <p><strong>æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªäº‹ä»¶åªåœ¨æµè§ˆå™¨çš„<code>history</code>ï¼ˆå†å²ï¼‰å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œè·Ÿç½‘é¡µæ˜¯å¦å¯è§æ²¡æœ‰å…³ç³»ã€‚</strong></p> <h4 id="_2-2-popstate-äº‹ä»¶ï¼ˆåœ¨æµè§ˆå™¨çš„historyå¯¹è±¡çš„å½“å‰è®°å½•å‘ç”Ÿæ˜¾å¼åˆ‡æ¢æ—¶è§¦å‘ï¼‰"><a href="#_2-2-popstate-äº‹ä»¶ï¼ˆåœ¨æµè§ˆå™¨çš„historyå¯¹è±¡çš„å½“å‰è®°å½•å‘ç”Ÿæ˜¾å¼åˆ‡æ¢æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 2.2 popstate äº‹ä»¶ï¼ˆåœ¨æµè§ˆå™¨çš„<code>history</code>å¯¹è±¡çš„å½“å‰è®°å½•å‘ç”Ÿæ˜¾å¼åˆ‡æ¢æ—¶è§¦å‘ï¼‰</h4> <p><code>popstate</code>äº‹ä»¶<strong>åœ¨æµè§ˆå™¨çš„<code>history</code>å¯¹è±¡çš„å½“å‰è®°å½•å‘ç”Ÿæ˜¾å¼åˆ‡æ¢æ—¶è§¦å‘</strong>ã€‚æ³¨æ„ï¼Œè°ƒç”¨<code>history.pushState()</code>æˆ–<code>history.replaceState()</code>ï¼Œå¹¶ä¸ä¼šè§¦å‘<code>popstate</code>äº‹ä»¶ã€‚è¯¥äº‹ä»¶åªåœ¨ç”¨æˆ·åœ¨<code>history</code>è®°å½•ä¹‹é—´æ˜¾å¼åˆ‡æ¢æ—¶è§¦å‘ï¼Œæ¯”å¦‚<strong>é¼ æ ‡ç‚¹å‡»â€œåé€€/å‰è¿›â€æŒ‰é’®ï¼Œæˆ–è€…åœ¨è„šæœ¬ä¸­è°ƒç”¨<code>history.back()</code>ã€<code>history.forward()</code>ã€<code>history.go()</code>æ—¶è§¦å‘</strong>ã€‚</p> <p>è¯¥äº‹ä»¶å¯¹è±¡æœ‰ä¸€ä¸ª<code>state</code>å±æ€§ï¼Œä¿å­˜<code>history.pushState</code>æ–¹æ³•å’Œ<code>history.replaceState</code>æ–¹æ³•ä¸ºå½“å‰è®°å½•æ·»åŠ çš„<code>state</code>å¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onpopstate</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'state: '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'title 1'</span><span class="token punctuation">,</span> <span class="token string">'?page=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>page<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'title 2'</span><span class="token punctuation">,</span> <span class="token string">'?page=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">replaceState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>page<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'title 3'</span><span class="token punctuation">,</span> <span class="token string">'?page=3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// state: {&quot;page&quot;:1}</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// state: null</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// state: {&quot;page&quot;:3}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>pushState</code>æ–¹æ³•å‘<code>history</code>æ·»åŠ äº†ä¸¤æ¡è®°å½•ï¼Œç„¶å<code>replaceState</code>æ–¹æ³•æ›¿æ¢æ‰å½“å‰è®°å½•ã€‚å› æ­¤ï¼Œè¿ç»­ä¸¤æ¬¡<code>back</code>æ–¹æ³•ï¼Œä¼šè®©å½“å‰æ¡ç›®é€€å›åˆ°åŸå§‹ç½‘å€ï¼Œå®ƒæ²¡æœ‰é™„å¸¦<code>state</code>å¯¹è±¡ï¼Œæ‰€ä»¥äº‹ä»¶çš„<code>state</code>å±æ€§ä¸º<code>null</code>ï¼Œç„¶åå‰è¿›ä¸¤æ¡è®°å½•ï¼Œåˆå›åˆ°<code>replaceState</code>æ–¹æ³•æ·»åŠ çš„è®°å½•ã€‚</p> <p>æµè§ˆå™¨å¯¹äºé¡µé¢é¦–æ¬¡åŠ è½½ï¼Œæ˜¯å¦è§¦å‘<code>popstate</code>äº‹ä»¶ï¼Œå¤„ç†ä¸ä¸€æ ·ï¼ŒFirefox ä¸è§¦å‘è¯¥äº‹ä»¶ã€‚</p> <h4 id="_2-3-hashchange-äº‹ä»¶-ï¼ˆhashå‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰"><a href="#_2-3-hashchange-äº‹ä»¶-ï¼ˆhashå‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 2.3 hashchange äº‹ä»¶ ï¼ˆhashå‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰</h4> <p><code>hashchange</code>äº‹ä»¶åœ¨ U<strong>RL çš„ hash éƒ¨åˆ†ï¼ˆå³<code>#</code>å·åé¢çš„éƒ¨åˆ†ï¼ŒåŒ…æ‹¬<code>#</code>å·ï¼‰å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘</strong>ã€‚è¯¥äº‹ä»¶<strong>ä¸€èˆ¬åœ¨<code>window</code>å¯¹è±¡ä¸Šç›‘å¬</strong>ã€‚</p> <p><code>hashchange</code>çš„äº‹ä»¶å®ä¾‹å…·æœ‰ä¸¤ä¸ªç‰¹æœ‰å±æ€§ï¼š<code>oldURL</code>å±æ€§å’Œ<code>newURL</code>å±æ€§ï¼Œåˆ†åˆ«è¡¨ç¤ºå˜åŒ–å‰åçš„å®Œæ•´ URLã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// URL æ˜¯ http://www.example.com/</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> myFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>oldURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location<span class="token punctuation">.</span>hash <span class="token operator">=</span> <span class="token string">'part2'</span><span class="token punctuation">;</span>
<span class="token comment">// http://www.example.com/</span>
<span class="token comment">// http://www.example.com/#part2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3ã€ç½‘é¡µçŠ¶æ€äº‹ä»¶"><a href="#_3ã€ç½‘é¡µçŠ¶æ€äº‹ä»¶" class="header-anchor">#</a> 3ã€ç½‘é¡µçŠ¶æ€äº‹ä»¶</h3> <h4 id="_3-1-domcontentloaded-äº‹ä»¶-ï¼ˆdomå†…å®¹åŠ è½½å®Œæˆåè§¦å‘ï¼‰"><a href="#_3-1-domcontentloaded-äº‹ä»¶-ï¼ˆdomå†…å®¹åŠ è½½å®Œæˆåè§¦å‘ï¼‰" class="header-anchor">#</a> 3.1 DOMContentLoaded äº‹ä»¶ ï¼ˆDOMå†…å®¹åŠ è½½å®Œæˆåè§¦å‘ï¼‰</h4> <p><strong>ç½‘é¡µä¸‹è½½å¹¶è§£æå®Œæˆä»¥åï¼Œæµè§ˆå™¨å°±ä¼šåœ¨<code>document</code>å¯¹è±¡ä¸Šè§¦å‘ DOMContentLoaded äº‹ä»¶</strong>ã€‚è¿™æ—¶ï¼Œä»…ä»…å®Œæˆäº†ç½‘é¡µçš„è§£æï¼ˆæ•´å¼ é¡µé¢çš„ DOM ç”Ÿæˆäº†ï¼‰ï¼Œ<strong>æ‰€æœ‰å¤–éƒ¨èµ„æºï¼ˆæ ·å¼è¡¨ã€è„šæœ¬ã€iframe ç­‰ç­‰ï¼‰å¯èƒ½è¿˜æ²¡æœ‰ä¸‹è½½ç»“æŸ</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªäº‹ä»¶<strong>æ¯”<code>load</code>äº‹ä»¶ï¼Œå‘ç”Ÿæ—¶é—´æ—©å¾—å¤š</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOMç”Ÿæˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ³¨æ„ï¼Œç½‘é¡µçš„ JavaScript è„šæœ¬æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè„šæœ¬ä¸€æ—¦å‘ç”Ÿå µå¡ï¼Œå°†æ¨è¿Ÿè§¦å‘<code>DOMContentLoaded</code>äº‹ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'DOM ç”Ÿæˆ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è¿™æ®µä»£ç ä¼šæ¨è¿Ÿè§¦å‘ DOMContentLoaded äº‹ä»¶</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-2-readystatechange-äº‹ä»¶ï¼ˆdocument-å¯¹è±¡å’Œ-xmlhttprequest-å¯¹è±¡çš„readystateå±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰"><a href="#_3-2-readystatechange-äº‹ä»¶ï¼ˆdocument-å¯¹è±¡å’Œ-xmlhttprequest-å¯¹è±¡çš„readystateå±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 3.2 readystatechange äº‹ä»¶ï¼ˆDocument å¯¹è±¡å’Œ XMLHttpRequest å¯¹è±¡çš„<code>readyState</code>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰</h4> <p><code>readystatechange</code>äº‹ä»¶<strong>å½“ Document å¯¹è±¡å’Œ XMLHttpRequest å¯¹è±¡çš„<code>readyState</code>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘</strong>ã€‚<code>document.readyState</code>æœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼š<code>loading</code>ï¼ˆç½‘é¡µæ­£åœ¨åŠ è½½ï¼‰ã€<code>interactive</code>ï¼ˆç½‘é¡µå·²ç»è§£æå®Œæˆï¼Œä½†æ˜¯å¤–éƒ¨èµ„æºä»ç„¶å¤„åœ¨åŠ è½½çŠ¶æ€ï¼‰å’Œ<code>complete</code>ï¼ˆç½‘é¡µå’Œæ‰€æœ‰å¤–éƒ¨èµ„æºå·²ç»ç»“æŸåŠ è½½ï¼Œ<code>load</code>äº‹ä»¶å³å°†è§¦å‘ï¼‰ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">'interactive'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™ä¸ªäº‹ä»¶å¯ä»¥çœ‹ä½œ<code>DOMContentLoaded</code>äº‹ä»¶çš„å¦ä¸€ç§å®ç°æ–¹æ³•ã€‚</p> <h3 id="_4ã€çª—å£äº‹ä»¶"><a href="#_4ã€çª—å£äº‹ä»¶" class="header-anchor">#</a> 4ã€çª—å£äº‹ä»¶</h3> <h4 id="_4-1-scroll-äº‹ä»¶-ï¼ˆæ–‡æ¡£æˆ–æ–‡æ¡£å…ƒç´ æ»šåŠ¨æ—¶è§¦å‘ï¼‰"><a href="#_4-1-scroll-äº‹ä»¶-ï¼ˆæ–‡æ¡£æˆ–æ–‡æ¡£å…ƒç´ æ»šåŠ¨æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 4.1 scroll äº‹ä»¶ ï¼ˆæ–‡æ¡£æˆ–æ–‡æ¡£å…ƒç´ æ»šåŠ¨æ—¶è§¦å‘ï¼‰</h4> <p><code>scroll</code>äº‹ä»¶åœ¨<strong>æ–‡æ¡£æˆ–æ–‡æ¡£å…ƒç´ æ»šåŠ¨æ—¶è§¦å‘</strong>ï¼Œä¸»è¦å‡ºç°åœ¨ç”¨æˆ·æ‹–åŠ¨æ»šåŠ¨æ¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¯¥äº‹ä»¶<strong>ä¼šè¿ç»­åœ°å¤§é‡è§¦å‘</strong>ï¼Œæ‰€ä»¥å®ƒçš„ç›‘å¬å‡½æ•°ä¹‹ä¸­ä¸åº”è¯¥æœ‰éå¸¸è€—è´¹è®¡ç®—çš„æ“ä½œã€‚æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨<code>requestAnimationFrame</code>æˆ–<code>setTimeout</code>æ§åˆ¶è¯¥äº‹ä»¶çš„è§¦å‘é¢‘ç‡ï¼Œç„¶åå¯ä»¥ç»“åˆ<code>customEvent</code>æŠ›å‡ºä¸€ä¸ªæ–°äº‹ä»¶ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> name<span class="token punctuation">,</span> obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// èŠ‚æµå‡½æ•° æ§åˆ¶è§¦å‘é¢‘ç‡</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> obj <span class="token operator">||</span> window<span class="token punctuation">;</span>
    <span class="token keyword">var</span> running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
      running <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// ç»“åˆæ­¤æ–¹æ³•æ§åˆ¶åœ¨æ¯ç§’60æ¬¡</span>
        obj<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        running <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// å°† scroll äº‹ä»¶é‡å®šä¹‰ä¸º optimizedScroll äº‹ä»¶</span>
  <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token string">'optimizedScroll'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'optimizedScroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Resource conscious scroll callback!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>throttle</code>å‡½æ•°ç”¨äºæ§åˆ¶äº‹ä»¶è§¦å‘é¢‘ç‡ï¼Œ<code>requestAnimationFrame</code>æ–¹æ³•ä¿è¯æ¯æ¬¡é¡µé¢é‡ç»˜ï¼ˆæ¯ç§’60æ¬¡ï¼‰ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡<code>scroll</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢æ–¹æ³•å°†<code>scroll</code>äº‹ä»¶çš„è§¦å‘é¢‘ç‡ï¼Œé™åˆ¶åœ¨æ¯ç§’60æ¬¡ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯<code>scroll</code>äº‹ä»¶åªè¦é¢‘ç‡ä½äºæ¯ç§’60æ¬¡ï¼Œå°±ä¼šè§¦å‘<code>optimizedScroll</code>äº‹ä»¶ï¼Œä»è€Œæ‰§è¡Œ<code>optimizedScroll</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚</p> <p>æ”¹ç”¨<code>setTimeout</code>æ–¹æ³•ï¼Œå¯ä»¥æ”¾ç½®æ›´å¤§çš„æ—¶é—´é—´éš”ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> scrollThrottler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> scrollTimeout<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">scrollThrottler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>scrollTimeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      scrollTimeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        scrollTimeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">actualScrollHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">actualScrollHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ¯æ¬¡<code>scroll</code>äº‹ä»¶éƒ½ä¼šæ‰§è¡Œ<code>scrollThrottler</code>å‡½æ•°ã€‚è¯¥å‡½æ•°é‡Œé¢æœ‰ä¸€ä¸ªå®šæ—¶å™¨<code>setTimeout</code>ï¼Œæ¯66æ¯«ç§’è§¦å‘ä¸€æ¬¡ï¼ˆæ¯ç§’15æ¬¡ï¼‰çœŸæ­£æ‰§è¡Œçš„ä»»åŠ¡<code>actualScrollHandler</code>ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´ä¸€èˆ¬çš„<code>throttle</code>å‡½æ•°çš„å†™æ³•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>time <span class="token operator">+</span> wait <span class="token operator">-</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢çš„ä»£ç å°†<code>scroll</code>äº‹ä»¶çš„è§¦å‘é¢‘ç‡ï¼Œé™åˆ¶åœ¨ä¸€ç§’ä¸€æ¬¡ã€‚</p> <p><a href="https://www.lodashjs.com/" target="_blank" rel="noopener noreferrer">lodash<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>å‡½æ•°åº“æä¾›äº†ç°æˆçš„<code>throttle</code>å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span><span class="token function">throttle</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æœ¬ä¹¦å‰é¢ä»‹ç»è¿‡<code>debounce</code>çš„æ¦‚å¿µï¼Œ<code>throttle</code>ä¸å®ƒåŒºåˆ«åœ¨äºï¼Œ<code>throttle</code>æ˜¯â€œèŠ‚æµâ€ï¼Œç¡®ä¿ä¸€æ®µæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œ<code>debounce</code>æ˜¯â€œé˜²æŠ–â€ï¼Œè¦è¿ç»­æ“ä½œç»“æŸåå†æ‰§è¡Œã€‚ä»¥ç½‘é¡µæ»šåŠ¨ä¸ºä¾‹ï¼Œ<code>debounce</code>è¦ç­‰åˆ°ç”¨æˆ·åœæ­¢æ»šåŠ¨åæ‰æ‰§è¡Œï¼Œ<code>throttle</code>åˆ™æ˜¯å¦‚æœç”¨æˆ·ä¸€ç›´åœ¨æ»šåŠ¨ç½‘é¡µï¼Œé‚£ä¹ˆåœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­è¿˜æ˜¯ä¼šæ‰§è¡Œã€‚</p> <h4 id="_4-2-resize-äº‹ä»¶ï¼ˆçª—å£å¤§å°å˜åŒ–æ—¶è§¦å‘ï¼‰"><a href="#_4-2-resize-äº‹ä»¶ï¼ˆçª—å£å¤§å°å˜åŒ–æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 4.2 resize äº‹ä»¶ï¼ˆçª—å£å¤§å°å˜åŒ–æ—¶è§¦å‘ï¼‰</h4> <p><code>resize</code>äº‹ä»¶<strong>åœ¨æ”¹å˜æµè§ˆå™¨çª—å£å¤§å°æ—¶è§¦å‘</strong>ï¼Œä¸»è¦<strong>å‘ç”Ÿåœ¨<code>window</code>å¯¹è±¡ä¸Šé¢</strong>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">resizeMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth <span class="token operator">&lt;</span> <span class="token number">768</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç§»åŠ¨è®¾å¤‡çš„è§†å£'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> resizeMethod<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¯¥äº‹ä»¶ä¹Ÿä¼šè¿ç»­åœ°å¤§é‡è§¦å‘ï¼Œæ‰€ä»¥æœ€å¥½åƒä¸Šé¢çš„<code>scroll</code>äº‹ä»¶ä¸€æ ·ï¼Œé€šè¿‡<code>throttle</code>å‡½æ•°æ§åˆ¶äº‹ä»¶è§¦å‘é¢‘ç‡ã€‚</p> <h4 id="_4-3-fullscreenchange-äº‹ä»¶ï¼ˆå…ƒç´ è¿›å…¥-é€€å‡ºå…¨å±æ—¶è§¦å‘ï¼‰ï¼Œfullscreenerror-äº‹ä»¶ï¼ˆæ— æ³•åˆ‡æ¢å…¨å±æ—¶è§¦å‘ï¼‰"><a href="#_4-3-fullscreenchange-äº‹ä»¶ï¼ˆå…ƒç´ è¿›å…¥-é€€å‡ºå…¨å±æ—¶è§¦å‘ï¼‰ï¼Œfullscreenerror-äº‹ä»¶ï¼ˆæ— æ³•åˆ‡æ¢å…¨å±æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 4.3 fullscreenchange äº‹ä»¶ï¼ˆå…ƒç´ è¿›å…¥/é€€å‡ºå…¨å±æ—¶è§¦å‘ï¼‰ï¼Œfullscreenerror äº‹ä»¶ï¼ˆæ— æ³•åˆ‡æ¢å…¨å±æ—¶è§¦å‘ï¼‰</h4> <p><code>fullscreenchange</code>äº‹ä»¶<strong>åœ¨å…ƒç´ è¿›å…¥æˆ–é€€å‡ºå…¨å±çŠ¶æ€æ—¶è§¦å‘</strong>ï¼Œè¯¥äº‹ä»¶<strong>å‘ç”Ÿåœ¨<code>document</code>å¯¹è±¡ä¸Šé¢</strong>ã€‚</p> <p><strong>æ³¨æ„ï¼Œæ­¤äº‹ä»¶éæµè§ˆå™¨çš„è¿›å…¥/é€€å‡ºå…¨å±æ—¶è§¦å‘çš„äº‹ä»¶ã€‚</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'fullscreenchange'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>fullscreenElement<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¨å±çš„å…ƒç´ ï¼Œå¦‚æœä¸ºnullæ—¶è¡¨ç¤ºå·²é€€å‡ºå…¨å±</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®å…ƒç´ ä¸ºå…¨å±å±•ç¤º</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>fullscreenerror</code>äº‹ä»¶åœ¨<strong>æµè§ˆå™¨æ— æ³•åˆ‡æ¢åˆ°å…¨å±çŠ¶æ€æ—¶è§¦å‘</strong>ã€‚</p> <h3 id="_5ã€å‰ªè´´æ¿äº‹ä»¶"><a href="#_5ã€å‰ªè´´æ¿äº‹ä»¶" class="header-anchor">#</a> 5ã€å‰ªè´´æ¿äº‹ä»¶</h3> <p>ä»¥ä¸‹ä¸‰ä¸ªäº‹ä»¶å±äºå‰ªè´´æ¿æ“ä½œçš„ç›¸å…³äº‹ä»¶ã€‚</p> <ul><li><code>cut</code>ï¼šå°†é€‰ä¸­çš„å†…å®¹ä»æ–‡æ¡£ä¸­ç§»é™¤ï¼ŒåŠ å…¥å‰ªè´´æ¿æ—¶è§¦å‘ã€‚<strong>ã€å‰ªåˆ‡ã€‘</strong></li> <li><code>copy</code>ï¼šè¿›è¡Œå¤åˆ¶åŠ¨ä½œæ—¶è§¦å‘ã€‚<strong>ã€æ‹·è´ã€‘</strong></li> <li><code>paste</code>ï¼šå‰ªè´´æ¿å†…å®¹ç²˜è´´åˆ°æ–‡æ¡£åè§¦å‘ã€‚<strong>ã€ç²˜è´´ã€‘</strong></li></ul> <p>è¿™ä¸‰ä¸ªäº‹ä»¶éƒ½æ˜¯**<code>ClipboardEvent</code>æ¥å£çš„å®ä¾‹**ã€‚<code>ClipboardEvent</code>æœ‰ä¸€ä¸ªå®ä¾‹å±æ€§<code>clipboardData</code>ï¼Œæ˜¯ä¸€ä¸ª DataTransfer å¯¹è±¡ï¼Œå­˜æ”¾å‰ªè´´çš„æ•°æ®ã€‚å…·ä½“çš„ API æ¥å£å’Œæ“ä½œæ–¹æ³•ï¼Œè¯·å‚è§ã€Šæ‹–æ‹‰äº‹ä»¶ã€‹çš„ DataTransfer å¯¹è±¡éƒ¨åˆ†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/plain'</span><span class="token punctuation">,</span> <span class="token string">'Hello, world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'text/html'</span><span class="token punctuation">,</span> <span class="token string">'&lt;b&gt;Hello, world!&lt;/b&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ä¸Šé¢çš„ä»£ç ä½¿å¾—å¤åˆ¶è¿›å…¥å‰ªè´´æ¿çš„ï¼Œéƒ½æ˜¯å¼€å‘è€…æŒ‡å®šçš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç”¨æˆ·æƒ³è¦æ‹·è´çš„æ•°æ®ã€‚</p> <h3 id="_6ã€ç„¦ç‚¹äº‹ä»¶"><a href="#_6ã€ç„¦ç‚¹äº‹ä»¶" class="header-anchor">#</a> 6ã€ç„¦ç‚¹äº‹ä»¶</h3> <p>ç„¦ç‚¹äº‹ä»¶å‘ç”Ÿåœ¨å…ƒç´ èŠ‚ç‚¹å’Œ<code>document</code>å¯¹è±¡ä¸Šé¢ï¼Œä¸è·å¾—æˆ–å¤±å»ç„¦ç‚¹ç›¸å…³ã€‚å®ƒä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å››ä¸ªäº‹ä»¶ã€‚</p> <ul><li><code>focus</code>ï¼šå…ƒç´ èŠ‚ç‚¹<strong>è·å¾—ç„¦ç‚¹</strong>åè§¦å‘ï¼Œè¯¥äº‹ä»¶ä¸ä¼šå†’æ³¡ã€‚</li> <li><code>blur</code>ï¼šå…ƒç´ èŠ‚ç‚¹<strong>å¤±å»ç„¦ç‚¹</strong>åè§¦å‘ï¼Œè¯¥äº‹ä»¶ä¸ä¼šå†’æ³¡ã€‚</li> <li><code>focusin</code>ï¼šå…ƒç´ èŠ‚ç‚¹<strong>å°†è¦è·å¾—ç„¦ç‚¹</strong>æ—¶è§¦å‘ï¼Œå‘ç”Ÿåœ¨<code>focus</code>äº‹ä»¶ä¹‹å‰ã€‚è¯¥äº‹ä»¶ä¼šå†’æ³¡ã€‚</li> <li><code>focusout</code>ï¼šå…ƒç´ èŠ‚ç‚¹<strong>å°†è¦å¤±å»ç„¦ç‚¹</strong>æ—¶è§¦å‘ï¼Œå‘ç”Ÿåœ¨<code>blur</code>äº‹ä»¶ä¹‹å‰ã€‚è¯¥äº‹ä»¶ä¼šå†’æ³¡ã€‚</li></ul> <p>è¿™å››ä¸ªäº‹ä»¶éƒ½ç»§æ‰¿äº†<code>FocusEvent</code>æ¥å£ã€‚<code>FocusEvent</code>å®ä¾‹å…·æœ‰ä»¥ä¸‹å±æ€§ã€‚</p> <ul><li><code>FocusEvent.target</code>ï¼šäº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ã€‚</li> <li><code>FocusEvent.relatedTarget</code>ï¼šå¯¹äº<code>focusin</code>äº‹ä»¶ï¼Œè¿”å›å¤±å»ç„¦ç‚¹çš„èŠ‚ç‚¹ï¼›å¯¹äº<code>focusout</code>äº‹ä»¶ï¼Œè¿”å›å°†è¦æ¥å—ç„¦ç‚¹çš„èŠ‚ç‚¹ï¼›å¯¹äº<code>focus</code>å’Œ<code>blur</code>äº‹ä»¶ï¼Œè¿”å›<code>null</code>ã€‚</li></ul> <p>ç”±äº<code>focus</code>å’Œ<code>blur</code>äº‹ä»¶ä¸ä¼šå†’æ³¡ï¼Œåªèƒ½åœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œæ‰€ä»¥<code>addEventListener</code>æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°éœ€è¦è®¾ä¸º<code>true</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'focus'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'blur'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä¸Šé¢ä»£ç é’ˆå¯¹è¡¨å•çš„æ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ¥å—ç„¦ç‚¹æ—¶è®¾ç½®èƒŒæ™¯è‰²ï¼Œå¤±å»ç„¦ç‚¹æ—¶å»é™¤èƒŒæ™¯è‰²ã€‚</p> <h3 id="_7ã€customevent-æ¥å£ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰"><a href="#_7ã€customevent-æ¥å£ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰" class="header-anchor">#</a> 7ã€CustomEvent æ¥å£ï¼ˆè‡ªå®šä¹‰äº‹ä»¶ï¼‰</h3> <p>CustomEvent æ¥å£<strong>ç”¨äºç”Ÿæˆè‡ªå®šä¹‰çš„äº‹ä»¶å®ä¾‹</strong>ã€‚é‚£äº›æµè§ˆå™¨é¢„å®šä¹‰çš„äº‹ä»¶ï¼Œè™½ç„¶å¯ä»¥æ‰‹åŠ¨ç”Ÿæˆï¼Œä½†æ˜¯å¾€å¾€ä¸èƒ½åœ¨äº‹ä»¶ä¸Šç»‘å®šæ•°æ®ã€‚å¦‚æœéœ€è¦åœ¨è§¦å‘äº‹ä»¶çš„åŒæ—¶ï¼Œä¼ å…¥æŒ‡å®šçš„æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨ CustomEvent æ¥å£ç”Ÿæˆçš„è‡ªå®šä¹‰äº‹ä»¶å¯¹è±¡ã€‚</p> <p>æµè§ˆå™¨åŸç”Ÿæä¾›<code>CustomEvent()</code>æ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ CustomEvent äº‹ä»¶å®ä¾‹ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>CustomEvent()</code>æ„é€ å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºäº‹ä»¶çš„åå­—ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶çš„é…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚<code>CustomEvent</code>çš„é…ç½®å¯¹è±¡é™¤äº†æ¥å— Event äº‹ä»¶çš„é…ç½®å±æ€§ï¼Œåªæœ‰ä¸€ä¸ªè‡ªå·±çš„å±æ€§ã€‚</p> <ul><li><code>detail</code>ï¼šè¡¨ç¤ºäº‹ä»¶çš„é™„å¸¦æ•°æ®ï¼Œé»˜è®¤ä¸º<code>null</code>ã€‚</li></ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string">'detail'</span><span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">eventHandler</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰äº†<code>build</code>äº‹ä»¶ã€‚è¯¥äº‹ä»¶è§¦å‘åï¼Œä¼šè¢«ç›‘å¬åˆ°ï¼Œä»è€Œè¾“å‡ºè¯¥äº‹ä»¶å®ä¾‹çš„<code>detail</code>å±æ€§ï¼ˆå³å­—ç¬¦ä¸²<code>hello</code>ï¼‰ã€‚</p> <p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> myEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'myevent'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  detail<span class="token operator">:</span> <span class="token punctuation">{</span>
    foo<span class="token operator">:</span> <span class="token string">'bar'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  bubbles<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  cancelable<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'myevent'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

el<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>myEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä¸Šé¢ä»£ç ä¹Ÿè¯´æ˜ï¼ŒCustomEvent çš„äº‹ä»¶å®ä¾‹ï¼Œé™¤äº†å…·æœ‰ Event æ¥å£çš„å®ä¾‹å±æ€§ï¼Œè¿˜å…·æœ‰<code>detail</code>å±æ€§ã€‚</p> <h2 id="åä¸€ã€globaleventhandlers-æ¥å£-ï¼ˆå…¨å±€äº‹ä»¶å¤„ç†æ¥å£ï¼‰"><a href="#åä¸€ã€globaleventhandlers-æ¥å£-ï¼ˆå…¨å±€äº‹ä»¶å¤„ç†æ¥å£ï¼‰" class="header-anchor">#</a> åä¸€ã€GlobalEventHandlers æ¥å£ ï¼ˆå…¨å±€äº‹ä»¶å¤„ç†æ¥å£ï¼‰</h2> <p>æŒ‡å®šäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œæ¨èä½¿ç”¨çš„æ–¹æ³•æ˜¯å…ƒç´ çš„<code>addEventListener</code>æ–¹æ³•ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> clickHandler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>é™¤äº†ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ç›´æ¥æŒ‡å®šäº‹ä»¶çš„å›è°ƒå‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div<span class="token punctuation">.</span>onclick <span class="token operator">=</span> clickHandler<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™ä¸ªæ¥å£æ˜¯ç”±<code>GlobalEventHandlers</code>æ¥å£æä¾›çš„ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ï¼Œç¼ºç‚¹æ˜¯åªèƒ½ä¸ºæ¯ä¸ªäº‹ä»¶æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”æ— æ³•æŒ‡å®šäº‹ä»¶è§¦å‘çš„é˜¶æ®µï¼ˆæ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µï¼‰ã€‚</p> <p><strong><code>HTMLElement</code>ã€<code>Document</code>å’Œ<code>Window</code>éƒ½ç»§æ‰¿äº†è¿™ä¸ªæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå„ç§ HTML å…ƒç´ ã€<code>document</code>å¯¹è±¡ã€<code>window</code>å¯¹è±¡ä¸Šé¢éƒ½å¯ä»¥ä½¿ç”¨<code>GlobalEventHandlers</code>æ¥å£æä¾›çš„å±æ€§</strong>ã€‚ä¸‹é¢å°±åˆ—å‡ºè¿™ä¸ªæ¥å£æä¾›çš„ä¸»è¦çš„äº‹ä»¶å±æ€§ã€‚</p> <h3 id="_1ã€globaleventhandlers-onabort-ï¼ˆä¸­æ–­äº‹ä»¶ï¼‰"><a href="#_1ã€globaleventhandlers-onabort-ï¼ˆä¸­æ–­äº‹ä»¶ï¼‰" class="header-anchor">#</a> 1ã€GlobalEventHandlers.onabort ï¼ˆä¸­æ–­äº‹ä»¶ï¼‰</h3> <p>æŸä¸ªå¯¹è±¡çš„<code>abort</code>äº‹ä»¶ï¼ˆåœæ­¢åŠ è½½ï¼‰å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè°ƒç”¨<code>onabort</code>å±æ€§æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p> <p>å„ç§å…ƒç´ çš„åœæ­¢åŠ è½½äº‹ä»¶ï¼Œåˆ°åº•å¦‚ä½•è§¦å‘ï¼Œç›®å‰å¹¶æ²¡æœ‰ç»Ÿä¸€çš„è§„å®šã€‚å› æ­¤å®é™…ä¸Šï¼Œè¿™ä¸ªå±æ€§ç°åœ¨ä¸€èˆ¬åªç”¨åœ¨<code>&lt;img&gt;</code>å…ƒç´ ä¸Šé¢ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// HTML ä»£ç å¦‚ä¸‹</span>
<span class="token comment">// &lt;img src=&quot;example.jpg&quot; id=&quot;img&quot;&gt;</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span><span class="token function-variable function">onabort</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å›¾ç‰‡åŠ è½½ä¸­æ–­'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2ã€globaleventhandlers-onerror-ï¼ˆé”™è¯¯äº‹ä»¶ï¼‰"><a href="#_2ã€globaleventhandlers-onerror-ï¼ˆé”™è¯¯äº‹ä»¶ï¼‰" class="header-anchor">#</a> 2ã€GlobalEventHandlers.onerror ï¼ˆé”™è¯¯äº‹ä»¶ï¼‰</h3> <p><code>error</code>äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå°±ä¼šè°ƒç”¨<code>onerror</code>å±æ€§æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p> <p><code>error</code>äº‹ä»¶<strong>åˆ†æˆä¸¤ç§</strong>ã€‚</p> <p><strong>ä¸€ç§æ˜¯ JavaScript çš„è¿è¡Œæ—¶é”™è¯¯</strong>ï¼Œè¿™ä¼šä¼ åˆ°<code>window</code>å¯¹è±¡ï¼Œå¯¼è‡´<code>window.onerror()</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> source<span class="token punctuation">,</span> lineno<span class="token punctuation">,</span> colno<span class="token punctuation">,</span> error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>window.onerror</code>çš„å¤„ç†å‡½æ•°å…±æ¥å—äº”ä¸ªå‚æ•°ï¼Œå«ä¹‰å¦‚ä¸‹ã€‚</p> <ul><li>messageï¼šé”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²</li> <li>sourceï¼šæŠ¥é”™è„šæœ¬çš„ URL</li> <li>linenoï¼šæŠ¥é”™çš„è¡Œå·ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°</li> <li>colnoï¼šæŠ¥é”™çš„åˆ—å·ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°</li> <li>errorï¼š é”™è¯¯å¯¹è±¡</li></ul> <p>å¦<strong>ä¸€ç§æ˜¯èµ„æºåŠ è½½é”™è¯¯</strong>ï¼Œæ¯”å¦‚<code>&lt;img&gt;</code>æˆ–<code>&lt;script&gt;</code>åŠ è½½çš„èµ„æºå‡ºç°åŠ è½½é”™è¯¯ã€‚è¿™æ—¶ï¼ŒError å¯¹è±¡ä¼šä¼ åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œå¯¼è‡´è¯¥å…ƒç´ çš„<code>onerror</code>å±æ€§å¼€å§‹æ‰§è¡Œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ³¨æ„ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œèµ„æºçš„åŠ è½½é”™è¯¯ä¸ä¼šè§¦å‘<code>window.onerror</code>ã€‚</p> <h3 id="_3ã€globaleventhandlers-onloadï¼ˆåŠ è½½å®Œæˆäº‹ä»¶ï¼‰ã€globaleventhandlers-onloadstartï¼ˆå¼€å§‹åŠ è½½äº‹ä»¶ï¼‰"><a href="#_3ã€globaleventhandlers-onloadï¼ˆåŠ è½½å®Œæˆäº‹ä»¶ï¼‰ã€globaleventhandlers-onloadstartï¼ˆå¼€å§‹åŠ è½½äº‹ä»¶ï¼‰" class="header-anchor">#</a> 3ã€GlobalEventHandlers.onloadï¼ˆåŠ è½½å®Œæˆäº‹ä»¶ï¼‰ã€GlobalEventHandlers.onloadstartï¼ˆå¼€å§‹åŠ è½½äº‹ä»¶ï¼‰</h3> <p>å…ƒç´ å®ŒæˆåŠ è½½æ—¶ï¼Œä¼šè§¦å‘<code>load</code>äº‹ä»¶ï¼Œæ‰§è¡Œ<code>onload()</code>ã€‚å®ƒçš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯<code>window</code>å¯¹è±¡å’Œ<code>&lt;img&gt;</code>å…ƒç´ ã€‚å¯¹äº<code>window</code>å¯¹è±¡æ¥è¯´ï¼Œåªæœ‰é¡µé¢çš„æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆï¼ˆåŒ…æ‹¬å›¾ç‰‡ã€è„šæœ¬ã€æ ·å¼è¡¨ã€å­—ä½“ç­‰æ‰€æœ‰å¤–éƒ¨èµ„æºï¼‰ï¼Œæ‰ä¼šè§¦å‘<code>load</code>äº‹ä»¶ã€‚</p> <p>å¯¹äº<code>&lt;img&gt;</code>å’Œ<code>&lt;video&gt;</code>ç­‰å…ƒç´ ï¼ŒåŠ è½½å¼€å§‹æ—¶è¿˜ä¼šè§¦å‘<code>loadstart</code>äº‹ä»¶ï¼Œå¯¼è‡´æ‰§è¡Œ<code>onloadstart</code>ã€‚</p> <h3 id="_4ã€globaleventhandlers-onfocusï¼ˆè·å–ç„¦ç‚¹äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onblurï¼ˆå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼‰"><a href="#_4ã€globaleventhandlers-onfocusï¼ˆè·å–ç„¦ç‚¹äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onblurï¼ˆå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼‰" class="header-anchor">#</a> 4ã€GlobalEventHandlers.onfocusï¼ˆè·å–ç„¦ç‚¹äº‹ä»¶ï¼‰ï¼ŒGlobalEventHandlers.onblurï¼ˆå¤±å»ç„¦ç‚¹äº‹ä»¶ï¼‰</h3> <p>å½“å‰å…ƒç´ è·å¾—ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘<code>element.onfocus</code>ï¼›å¤±å»ç„¦ç‚¹æ—¶ï¼Œä¼šè§¦å‘<code>element.onblur</code>ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function-variable function">onfocus</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onfocus event detected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;onblur event detected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ³¨æ„ï¼Œå¦‚æœä¸æ˜¯å¯ä»¥æ¥å—ç”¨æˆ·è¾“å…¥çš„å…ƒç´ ï¼Œè¦è§¦å‘<code>onfocus</code>ï¼Œè¯¥å…ƒç´ å¿…é¡»æœ‰<code>tabindex</code>å±æ€§ã€‚</p> <h3 id="_5ã€globaleventhandlers-onscrollï¼ˆæ»šåŠ¨äº‹ä»¶ï¼‰"><a href="#_5ã€globaleventhandlers-onscrollï¼ˆæ»šåŠ¨äº‹ä»¶ï¼‰" class="header-anchor">#</a> 5ã€GlobalEventHandlers.onscrollï¼ˆæ»šåŠ¨äº‹ä»¶ï¼‰</h3> <p>é¡µé¢æˆ–å…ƒç´ æ»šåŠ¨æ—¶ï¼Œä¼šè§¦å‘<code>scroll</code>äº‹ä»¶ï¼Œå¯¼è‡´æ‰§è¡Œ<code>onscroll()</code>ã€‚</p> <h3 id="_6ã€globaleventhandlers-oncontextmenuï¼ˆå³é”®èœå•äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onshowï¼ˆæ˜¾ç¤ºå³é”®èœå•æ—¶è§¦å‘ï¼‰"><a href="#_6ã€globaleventhandlers-oncontextmenuï¼ˆå³é”®èœå•äº‹ä»¶ï¼‰ï¼Œglobaleventhandlers-onshowï¼ˆæ˜¾ç¤ºå³é”®èœå•æ—¶è§¦å‘ï¼‰" class="header-anchor">#</a> 6ã€GlobalEventHandlers.oncontextmenuï¼ˆå³é”®èœå•äº‹ä»¶ï¼‰ï¼ŒGlobalEventHandlers.onshowï¼ˆæ˜¾ç¤ºå³é”®èœå•æ—¶è§¦å‘ï¼‰</h3> <p>ç”¨æˆ·åœ¨é¡µé¢ä¸ŠæŒ‰ä¸‹é¼ æ ‡çš„å³é”®ï¼Œä¼šè§¦å‘<code>contextmenu</code>äº‹ä»¶ï¼Œå¯¼è‡´æ‰§è¡Œ<code>oncontextmenu()</code>ã€‚å¦‚æœè¯¥å±æ€§æ‰§è¡Œåè¿”å›<code>false</code>ï¼Œå°±ç­‰äºç¦æ­¢äº†å³é”®èœå•ã€‚<code>document.oncontextmenu</code>ä¸<code>window.oncontextmenu</code>æ•ˆæœä¸€æ ·ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// ç¦ç”¨å³é”®èœå•</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>oncontextmenu</code>å±æ€§æ‰§è¡Œåè¿”å›<code>false</code>ï¼Œå³é”®èœå•å°±ä¸ä¼šå‡ºç°ã€‚</p> <p>å…ƒç´ çš„å³é”®èœå•æ˜¾ç¤ºæ—¶ï¼Œä¼šè§¦å‘è¯¥å…ƒç´ çš„<code>onshow</code>ç›‘å¬å‡½æ•°ã€‚</p> <h3 id="_7ã€å…¶ä»–çš„äº‹ä»¶å±æ€§"><a href="#_7ã€å…¶ä»–çš„äº‹ä»¶å±æ€§" class="header-anchor">#</a> 7ã€å…¶ä»–çš„äº‹ä»¶å±æ€§</h3> <p>é¼ æ ‡çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>onclick</li> <li>ondblclick</li> <li>onmousedown</li> <li>onmouseenter</li> <li>onmouseleave</li> <li>onmousemove</li> <li>onmouseout</li> <li>onmouseover</li> <li>onmouseup</li> <li>onwheel</li></ul> <p>é”®ç›˜çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>onkeydown</li> <li>onkeypress</li> <li>onkeyup</li></ul> <p>ç„¦ç‚¹çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>onblur</li> <li>onfocus</li></ul> <p>è¡¨å•çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>oninput</li> <li>onchange</li> <li>onsubmit</li> <li>onreset</li> <li>oninvalid</li> <li>onselect</li></ul> <p>è§¦æ‘¸çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>ontouchcancel</li> <li>ontouchend</li> <li>ontouchmove</li> <li>ontouchstart</li></ul> <p>æ‹–åŠ¨çš„äº‹ä»¶å±æ€§åˆ†æˆä¸¤ç±»ï¼šä¸€ç±»ä¸è¢«æ‹–åŠ¨å…ƒç´ ç›¸å…³ï¼Œå¦ä¸€ç±»ä¸æ¥æ”¶è¢«æ‹–åŠ¨å…ƒç´ çš„å®¹å™¨å…ƒç´ ç›¸å…³ã€‚</p> <p>è¢«æ‹–åŠ¨å…ƒç´ çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>ondragstartï¼šæ‹–åŠ¨å¼€å§‹</li> <li>ondragï¼šæ‹–åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ¯éš”å‡ ç™¾æ¯«ç§’è§¦å‘ä¸€æ¬¡</li> <li>ondragendï¼šæ‹–åŠ¨ç»“æŸ</li></ul> <p>æ¥æ”¶è¢«æ‹–åŠ¨å…ƒç´ çš„å®¹å™¨å…ƒç´ çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>ondragenterï¼šè¢«æ‹–åŠ¨å…ƒç´ è¿›å…¥å®¹å™¨å…ƒç´ ã€‚</li> <li>ondragleaveï¼šè¢«æ‹–åŠ¨å…ƒç´ ç¦»å¼€å®¹å™¨å…ƒç´ ã€‚</li> <li>ondragoverï¼šè¢«æ‹–åŠ¨å…ƒç´ åœ¨å®¹å™¨å…ƒç´ ä¸Šæ–¹ï¼Œæ¯éš”å‡ ç™¾æ¯«ç§’è§¦å‘ä¸€æ¬¡ã€‚</li> <li>ondropï¼šæ¾å¼€é¼ æ ‡åï¼Œè¢«æ‹–åŠ¨å…ƒç´ æ”¾å…¥å®¹å™¨å…ƒç´ ã€‚</li></ul> <p><code>&lt;dialog&gt;</code>å¯¹è¯æ¡†å…ƒç´ çš„äº‹ä»¶å±æ€§ã€‚</p> <ul><li>oncancel</li> <li>onclose</li></ul> <h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="header-anchor">#</a> æ–‡æ¡£</h2> <p>å­¦ä¹ æ–‡æ¡£ï¼š<a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener noreferrer">https://wangdoc.com/javascript/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/xavi-bryant/vuepressBlog/edit/master/docs/ã€ŠJavaScriptæ•™ç¨‹ã€‹ç¬”è®°/06.äº‹ä»¶.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2020/09/24, 11:09:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/vuepressBlog/pages/7d961b8030c6099e/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        DOM
      </div></a> <a href="/vuepressBlog/pages/bab4930124ad2c10/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        æµè§ˆå™¨æ¨¡å‹
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/vuepressBlog/pages/7d961b8030c6099e/" class="prev">DOM</a></span> <span class="next"><a href="/vuepressBlog/pages/bab4930124ad2c10/">æµè§ˆå™¨æ¨¡å‹</a>
        â†’
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/vuepressBlog/archives/" class="iconfont icon-bi">æœ€è¿‘æ›´æ–°</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vuepressBlog/pages/bug/"><div>npmå¸¸ç”¨å‘½ä»¤</div></a> <span>9-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/vuepressBlog/note/xgqq/"><div>ã€Šæ´»ç€ã€‹</div></a> <span>07-28</span></dt></dl><dl><dd>03</dd> <dt><a href="/vuepressBlog/Bistro/"><div>âœ² å°é…’é¦†</div></a> <span>07-28</span></dt></dl> <dl><dd></dd> <dt><a href="/vuepressBlog/archives/" class="more">æ›´å¤šæ–‡ç« &gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xavi-bryant" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=325974397" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
     | Copyright Â© 2019-2020
    <span>è½æ‹“å“Ÿ |  <a href="http://beian.miit.gov.cn" style="font-weight:bold">æµ™ICPå¤‡2020035101å·-2</a> <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vuepressBlog/assets/js/app.01b93228.js" defer></script><script src="/vuepressBlog/assets/js/2.15c062aa.js" defer></script><script src="/vuepressBlog/assets/js/3.9268bcf7.js" defer></script><script src="/vuepressBlog/assets/js/149.4a705130.js" defer></script>
  </body>
</html>